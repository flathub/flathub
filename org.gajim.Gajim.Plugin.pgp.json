{
    "id": "org.gajim.Gajim.Plugin.pgp",
    "runtime": "org.gajim.Gajim",
    "runtime-version": "stable",
    "sdk": "org.gnome.Sdk//3.28",
    "build-extension": true,
    "separate-locales": false,
    "appstream-compose": false,
    "build-options": {
        "env": {
            "PYTHONPATH": "/app/plugins/pgp/lib/python3.5/site-packages/"
        }
    },
    "modules": [
        {
            "name": "python3-python-gnupg",
            "buildsystem": "simple",
            "build-commands": [
                "install -d ${FLATPAK_DEST}/lib/python3.5/site-packages/",
                "pip3 install --prefix=${FLATPAK_DEST} python_gnupg-0.4.3-py2.py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/4a/87/76ead690afc4c7710012ede242537cd9807dde9de6299e65d075925c0b02/python_gnupg-0.4.3-py2.py3-none-any.whl",
                    "sha256": "faa69bab58ed0936f0ccf96c99b92369b7a1819305d37dfe5c927d21a437a09d"
                }
            ]
        },
        {
            "name": "gajim-pgp",
            "buildsystem": "simple",
            "build-commands": [
                "cp -R -t ${FLATPAK_DEST} *"
            ],
            "post-install": [
                "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo org.gajim.Gajim.Plugin.pgp.metainfo.xml",
                "appstream-compose --basename=org.gajim.Gajim.Plugin.pgp --prefix=${FLATPAK_DEST} --origin=flatpak org.gajim.Gajim.Plugin.pgp"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://ftp.gajim.org/plugins_releases/pgp_1.2.6.zip",
                    "sha256": "bb90eb906d5fc63e0f3610268cbd42d03617a13332914551f1895a354d04f915"
                },
                {
                    "type": "file",
                    "path": "org.gajim.Gajim.Plugin.pgp.metainfo.xml",
                    "sha256": "cda6e41cdff3f7ff98136721a522305046714343236f9eb54b3e4cba5ccb34ad"
                }
            ]
        }
    ]
}
