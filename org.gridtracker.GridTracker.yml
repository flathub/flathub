app-id: org.gridtracker.GridTracker
runtime: org.kde.Platform
runtime-version: '5.15'
sdk: org.kde.Sdk
command: GridTracker
rename-desktop-file: GridTracker.desktop
rename-icon: gridtracker
finish-args:
  - --share=ipc
  - --socket=x11
  - --device=all
  - --socket=pulseaudio
  - --share=network
  - --filesystem=home
cleanup:
  - /man
  - /include
  - /share/man
  - /share/doc
  - /doc
  - '*.a'
  - '*.la'
  - /bin/usr
modules:
  - name: prepare
    buildsystem: simple
    build-commands:
       - mkdir -p $FLATPAK_DEST/bin
       - mkdir -p $FLATPAK_DEST/share/applications/
       - mkdir -p $FLATPAK_DEST/share/icons/hicolor/128x128/apps/
  - name: gridtraker
    buildsystem: simple
    build-commands:
       - cp -r * $FLATPAK_DEST/bin
       - mv $FLATPAK_DEST/bin/gridtracker.png $FLATPAK_DEST/share/icons/hicolor/128x128/apps/gridtracker.png
    sources:
      - type: archive
        url: https://www.dropbox.com/s/0rbduq0ibxrrj0e/GridTracker-Linux-64-1.20.0927.tar.gz?dl=1
        sha256: d7bc84d25cb935b873a22035f35b96bf0600f15cb7740f3fe08469af3d1d2e5a
  - name: metainfo
    buildsystem: simple
    build-commands:
        - install -D org.gridtracker.GridTracker.metainfo.xml $FLATPAK_DEST/share/metainfo/org.gridtracker.GridTracker.metainfo.xml
        - install -D GridTracker.desktop $FLATPAK_DEST/share/applications/GridTracker.desktop
    sources:
      - type: file
        path: org.gridtracker.GridTracker.metainfo.xml
      - type: file
        path: GridTracker.desktop
