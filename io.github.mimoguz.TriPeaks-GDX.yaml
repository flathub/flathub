app-id: io.github.mimoguz.TriPeaks-GDX
runtime: org.freedesktop.Platform
runtime-version: "24.08"
command: io.github.mimoguz.TriPeaks-GDX.sh
sdk: org.freedesktop.Sdk
sdk-extensions:
- org.freedesktop.Sdk.Extension.openjdk17

finish-args:
- --socket=x11
- --share=ipc
- --device=dri
- --env=JAVA_HOME=/app/jre

modules:
  - name: openjdk
    buildsystem: simple
    build-commands:
      - /usr/lib/sdk/openjdk17/install.sh

  - name: tripeaks
    sources:
      - type: archive
        url: https://github.com/mimoguz/tripeaks-gdx/releases/download/v1.2.3/lwjgl3-1.2.3.zip
        sha256: 85e0371d95f94476533f40e5a3723805ff61f3a8c4374eefc936bd0b92def82d
      - type: file
        path: io.github.mimoguz.TriPeaks-GDX.sh
      - type: file
        url: https://raw.githubusercontent.com/mimoguz/tripeaks-gdx/2527f6824c68f4b41c520959f1430029a511767b/io.github.mimoguz.TriPeaks-GDX.desktop
        sha256: 6ebe18a88c96576693a6691d457227080f4bbe9420dbd1f9532c20599bc85602
      - type: file
        dest-filename: icon.svg
        url: https://raw.githubusercontent.com/mimoguz/tripeaks-gdx/refs/tags/v1.2.3/lwjgl3/icons/logo.svg
        sha256: 37140a644755d6feb62d1e85f49ae6d098effa179a24324bc06b22a4b81bed77

    buildsystem: simple
    build-commands:
      - cp -r bin /app
      - cp -r lib /app
      - install -m700 ${FLATPAK_ID}.sh -t /app/bin
      - install -Dm7600 ${FLATPAK_ID}.desktop -t /app/share/applications
      - install -Dm7600 icon.svg /app/share/icons/hicolor/scalable/apps/${FLATPAK_ID}.svg
