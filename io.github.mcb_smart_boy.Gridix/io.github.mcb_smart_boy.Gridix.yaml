app-id: io.github.mcb_smart_boy.Gridix
runtime: org.gnome.Platform
runtime-version: '46'
sdk: org.gnome.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.rust-stable
command: gridix

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --share=network
  - --filesystem=home

build-options:
  append-path: /usr/lib/sdk/rust-stable/bin

modules:
  - name: xdotool
    buildsystem: simple
    build-commands:
      - make PREFIX=/app install
    sources:
      - type: archive
        url: https://github.com/jordansissel/xdotool/releases/download/v3.20211022.1/xdotool-3.20211022.1.tar.gz
        sha256: 96f0facfde6d78eacad35b91b0f46fecd0b35e474c03e00e30da3f0912727c2b

  - name: gridix
    buildsystem: simple
    build-commands:
      - install -Dm755 gridix /app/bin/gridix
      - install -Dm644 io.github.mcb_smart_boy.Gridix.desktop /app/share/applications/io.github.mcb_smart_boy.Gridix.desktop
      - install -Dm644 io.github.mcb_smart_boy.Gridix.metainfo.xml /app/share/metainfo/io.github.mcb_smart_boy.Gridix.metainfo.xml
      - install -Dm644 io.github.mcb_smart_boy.Gridix.png /app/share/icons/hicolor/256x256/apps/io.github.mcb_smart_boy.Gridix.png
    sources:
      - type: archive
        url: https://github.com/MCB-SMART-BOY/Gridix/releases/download/v0.5.2/gridix-linux-x86_64.tar.gz
        sha256: 5076f24dabde987c6ab0b76f314affa7e8ba1b415eab5b497d665f35c393171b
      - type: file
        path: io.github.mcb_smart_boy.Gridix.desktop
      - type: file
        path: io.github.mcb_smart_boy.Gridix.metainfo.xml
      - type: file
        path: io.github.mcb_smart_boy.Gridix.png
