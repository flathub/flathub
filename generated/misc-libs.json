{
    "name": "misc-libs",
    "buildsystem": "simple",
    "build-commands": [],
    "modules": [
        {
            "name": "libbsd",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://libbsd.freedesktop.org/releases/libbsd-0.10.0.tar.xz",
                    "sha256": "34b8adc726883d0e85b3118fa13605e179a62b31ba51f676136ecb2d0bc1a887"
                }
            ]
        },
        {
            "name": "libbsd-32bit",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://libbsd.freedesktop.org/releases/libbsd-0.10.0.tar.xz",
                    "sha256": "34b8adc726883d0e85b3118fa13605e179a62b31ba51f676136ecb2d0bc1a887"
                }
            ],
            "only-arches": [
                "x86_64"
            ],
            "build-options": {
                "prepend-ld-library-path": "/app/lib32",
                "prepend-pkg-config-path": "/app/lib32/pkgconfig",
                "ldflags": "-L/app/lib32 -Wl,-z,relro,-z,now -Wl,--as-needed",
                "ldflags-override": true,
                "libdir": "/app/lib32",
                "arch": {
                    "x86_64": {
                        "append-path": "/usr/lib/sdk/toolchain-i386/bin",
                        "prepend-pkg-config-path": "/usr/lib/i386-linux-gnu/pkgconfig",
                        "env": {
                            "CC": "ccache i686-unknown-linux-gnu-gcc",
                            "CXX": "ccache i686-unknown-linux-gnu-g++"
                        }
                    }
                }
            }
        },
        {
            "name": "sndio11",
            "config-opts": [
                "--with-libbsd"
            ],
            "cleanup": [
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://archive.ubuntu.com/ubuntu/pool/universe/s/sndio/sndio_1.1.0.orig.tar.gz",
                    "sha256": "fcd7f845ff70f38c2898d737450b8aa3e1bb0afb9d147e8429ef22c0b2c2db57"
                },
                {
                    "type": "shell",
                    "commands": [
                        "for i in libsndio aucat midicat; do\n  sed 's/cp /cp -f /g' -i $i/Makefile.in\ndone\n"
                    ]
                }
            ]
        },
        {
            "name": "sndio11-32bit",
            "config-opts": [
                "--with-libbsd"
            ],
            "cleanup": [
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://archive.ubuntu.com/ubuntu/pool/universe/s/sndio/sndio_1.1.0.orig.tar.gz",
                    "sha256": "fcd7f845ff70f38c2898d737450b8aa3e1bb0afb9d147e8429ef22c0b2c2db57"
                },
                {
                    "type": "shell",
                    "commands": [
                        "for i in libsndio aucat midicat; do\n  sed 's/cp /cp -f /g' -i $i/Makefile.in\ndone\n"
                    ]
                }
            ],
            "only-arches": [
                "x86_64"
            ],
            "build-options": {
                "prepend-ld-library-path": "/app/lib32",
                "prepend-pkg-config-path": "/app/lib32/pkgconfig",
                "ldflags": "-L/app/lib32 -Wl,-z,relro,-z,now -Wl,--as-needed",
                "ldflags-override": true,
                "libdir": "/app/lib32",
                "arch": {
                    "x86_64": {
                        "append-path": "/usr/lib/sdk/toolchain-i386/bin",
                        "prepend-pkg-config-path": "/usr/lib/i386-linux-gnu/pkgconfig",
                        "env": {
                            "CC": "ccache i686-unknown-linux-gnu-gcc",
                            "CXX": "ccache i686-unknown-linux-gnu-g++"
                        }
                    }
                }
            }
        },
        {
            "name": "google-perfools",
            "buildsystem": "autotools",
            "build-options": {
                "cflags": "-fpermissive -Wno-error=narrowing",
                "cxxflags": "-fpermissive -Wno-error=narrowing"
            },
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/gperftools/gperftools.git",
                    "commit": "9608fa3bcf8020d35f59fbf70cd3cbe4b015b972",
                    "tag": "gperftools-2.7"
                }
            ]
        },
        {
            "name": "google-perfools-32bit",
            "buildsystem": "autotools",
            "build-options": {
                "cflags": "-fpermissive -Wno-error=narrowing",
                "cxxflags": "-fpermissive -Wno-error=narrowing",
                "prepend-ld-library-path": "/app/lib32",
                "prepend-pkg-config-path": "/app/lib32/pkgconfig",
                "ldflags": "-L/app/lib32 -Wl,-z,relro,-z,now -Wl,--as-needed",
                "ldflags-override": true,
                "libdir": "/app/lib32",
                "arch": {
                    "x86_64": {
                        "append-path": "/usr/lib/sdk/toolchain-i386/bin",
                        "prepend-pkg-config-path": "/usr/lib/i386-linux-gnu/pkgconfig",
                        "env": {
                            "CC": "ccache i686-unknown-linux-gnu-gcc",
                            "CXX": "ccache i686-unknown-linux-gnu-g++"
                        }
                    }
                }
            },
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/gperftools/gperftools.git",
                    "commit": "9608fa3bcf8020d35f59fbf70cd3cbe4b015b972",
                    "tag": "gperftools-2.7"
                }
            ],
            "only-arches": [
                "x86_64"
            ]
        },
        {
            "name": "gamemode",
            "buildsystem": "meson",
            "config-opts": [
                "-Dwith-systemd=false",
                "-Dwith-daemon=false",
                "-Dwith-examples=false"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/FeralInteractive/gamemode",
                    "tag": "1.5.1"
                }
            ]
        },
        {
            "name": "gamemode-32bit",
            "buildsystem": "meson",
            "config-opts": [
                "-Dwith-systemd=false",
                "-Dwith-daemon=false",
                "-Dwith-examples=false"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/FeralInteractive/gamemode",
                    "tag": "1.5.1"
                }
            ],
            "only-arches": [
                "x86_64"
            ],
            "build-options": {
                "prepend-ld-library-path": "/app/lib32",
                "prepend-pkg-config-path": "/app/lib32/pkgconfig",
                "ldflags": "-L/app/lib32 -Wl,-z,relro,-z,now -Wl,--as-needed",
                "ldflags-override": true,
                "libdir": "/app/lib32",
                "arch": {
                    "x86_64": {
                        "append-path": "/usr/lib/sdk/toolchain-i386/bin",
                        "prepend-pkg-config-path": "/usr/lib/i386-linux-gnu/pkgconfig",
                        "env": {
                            "CC": "ccache i686-unknown-linux-gnu-gcc",
                            "CXX": "ccache i686-unknown-linux-gnu-g++"
                        }
                    }
                }
            }
        },
        {
            "name": "rapidjson",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DRAPIDJSON_BUILD_DOC=OFF",
                "-DRAPIDJSON_BUILD_EXAMPLES=OFF",
                "-DRAPIDJSON_BUILD_TESTS=OFF",
                "-DRAPIDJSON_BUILD_THIRDPARTY_GTEST=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/miloyip/rapidjson/archive/v1.1.0.tar.gz",
                    "sha256": "bf7ced29704a1e696fbccf2a2b4ea068e7774fa37f6d7dd4039d0787f8bed98e"
                }
            ]
        },
        {
            "name": "discord-rpc",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_SHARED_LIBS=ON"
            ],
            "post-install": [
                "install -Dm755 examples/send-presence/send-presence -t /app/bin/"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/discordapp/discord-rpc/archive/v3.4.0.tar.gz",
                    "sha256": "e13427019027acd187352dacba6c65953af66fdf3c35fcf38fc40b454a9d7855"
                }
            ]
        },
        {
            "name": "discord-rpc-32bit",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DBUILD_SHARED_LIBS=ON"
            ],
            "post-install": [
                "install -Dm755 examples/send-presence/send-presence -t /app/bin/"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/discordapp/discord-rpc/archive/v3.4.0.tar.gz",
                    "sha256": "e13427019027acd187352dacba6c65953af66fdf3c35fcf38fc40b454a9d7855"
                }
            ],
            "only-arches": [
                "x86_64"
            ],
            "build-options": {
                "prepend-ld-library-path": "/app/lib32",
                "prepend-pkg-config-path": "/app/lib32/pkgconfig",
                "ldflags": "-L/app/lib32 -Wl,-z,relro,-z,now -Wl,--as-needed",
                "ldflags-override": true,
                "libdir": "/app/lib32",
                "arch": {
                    "x86_64": {
                        "append-path": "/usr/lib/sdk/toolchain-i386/bin",
                        "prepend-pkg-config-path": "/usr/lib/i386-linux-gnu/pkgconfig",
                        "env": {
                            "CC": "ccache i686-unknown-linux-gnu-gcc",
                            "CXX": "ccache i686-unknown-linux-gnu-g++"
                        }
                    }
                }
            }
        }
    ]
}