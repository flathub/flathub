app-id: org.KekikAkademi.eFatura
runtime: org.gnome.Platform
runtime-version: "44"
sdk: org.gnome.Sdk
command: eFaturaGUI
finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --share=network
  - --socket=pulseaudio
  - --env=TESSDATA_PREFIX=/app/share/tessdata
cleanup:
  - /sbin
  - /include
  - /lib/cmake
  - /lib/pkgconfig
  - /bin/protoc
  - /share/doc
  - /share/pkgconfig
  - /share/man
  - /share/cmake*
  - "*.a"
  - "*.la"
modules:
  - name: leptonica
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: archive
        url: https://github.com/DanBloomberg/leptonica/releases/download/1.82.0/leptonica-1.82.0.tar.gz
        sha256: 155302ee914668c27b6fe3ca9ff2da63b245f6d62f3061c8f27563774b8ae2d6
  - name: tesseract
    buildsystem: cmake-ninja
    builddir: true
    sources:
      - type: archive
        url: https://github.com/tesseract-ocr/tesseract/archive/refs/tags/5.2.0.zip
        sha256: f30e343cb93ca77f1fad013aeb87edb9191dcd1c7d4ee55d425f70c2af7817a1
  - name: tessdata-fast
    buildsystem: simple
    build-commands:
      - cp * /app/share/tessdata
    sources:
      - type: file
        url: https://github.com/tesseract-ocr/tessdata_fast/raw/4.1.0/eng.traineddata
        sha256: 7d4322bd2a7749724879683fc3912cb542f19906c83bcc1a52132556427170b2
  - python3-requirements.yaml
  - name: eFatura-yukleyici
    buildsystem: simple
    build-commands:
      - install -Dm644 Shared/org.KekikAkademi.eFatura.desktop /app/share/applications/org.KekikAkademi.eFatura.desktop
      - install -Dm644 Shared/org.KekikAkademi.eFatura.appdata.xml /app/share/appdata/org.KekikAkademi.eFatura.appdata.xml
      - install -Dm644 Shared/org.KekikAkademi.eFatura.svg /app/share/icons/hicolor/scalable/apps/org.KekikAkademi.eFatura.svg
      - python3 -m pip install . --prefix=${FLATPAK_DEST}
    sources:
      - type: git
        url: https://github.com/keyiflerolsun/eFatura.git
        commit: 0e2607b3a0da4130d2231e5c34b6d6a53d1ae51c