id: com.obsproject.Studio.Plugin.obs-kinect
branch: stable
runtime: com.obsproject.Studio
runtime-version: stable
sdk: org.kde.Sdk//6.3
build-extension: true
separate-locales: false
appstream-compose: false
build-options:
  prefix: /app/plugins/obs-kinect
modules:
#  - shared-modules/libusb/libusb.json

  - name: libusb
    config-opts: --disable-static
    cleanup:
        - /lib/*.la
        - /lib/pkgconfig
        - /include
    post-install:
      - "install -Dm644 COPYING ${FLATPAK_DEST}/share/licenses/libusb/COPYING"
    sources:
        - type: archive
          url: https://github.com/libusb/libusb/releases/download/v1.0.26/libusb-1.0.26.tar.bz2
          sha256: 12ce7a61fc9854d1d2a1ffe095f7b5fac19ddba095c259e6067a46500381b5a5

#  - name: glfw
#    buildsystem: cmake
#    config-opts:
#      - -DBUILD_SHARED_LIBS=ON
#    cleanup:
#        - /lib/*.la
#        - /lib/pkgconfig
#        - /include
#    sources:
#      - type: archive
#        url: https://github.com/glfw/glfw/releases/download/3.3.8/glfw-3.3.8.zip
#        sha256: 4d025083cc4a3dd1f91ab9b9ba4f5807193823e565a5bcf4be202669d9911ea6

  - name: libfreenect2
    buildsystem: cmake
    config-opts:
      - -DCMAKE_PREFIX_PATH=${FLATPAK_DEST}/lib/pkgconfig
    sources:
      - type: archive
        url: https://github.com/OpenKinect/libfreenect2/archive/refs/tags/v0.2.1.tar.gz
        sha256: c09e52c97b0e90335f4762ed5363293ad0fc1ea0064e578b879e7d15cc3559df

#  - name: obs-kinect
#    buildsystem: simple
#    build-commands:
#      - unzip  ubuntu*.zip
#      - rm -f ubuntu*.zip
#      - install -D
#    sources:
#      - type: file
#        url: https://github.com/SirLynix/obs-kinect/releases/download/v1.0-rc1/ubuntu-1.0rc1-x64-releasedbg.zip
#        sha256: d49e016e798d3940bf6e99be93cc984b2aed3b96befdae79287d7927e6391144
#      - type: file
#        path: com.obsproject.Studio.Plugin.obs-kinect.metainfo.xml
