{
    "app-id": "apps.momits.Electrip",
    "runtime": "org.gnome.Platform",
    "runtime-version": "3.28",
    "sdk": "org.gnome.Sdk",
    "command": "electrip",
    "finish-args": [
        "--socket=x11",
        "--socket=wayland",
        "--share=network",
        "--filesystem=home",
        "--socket=pulseaudio",
        "--filesystem=xdg-run/dconf",
        "--filesystem=~/.config/dconf:ro",
        "--talk-name=ca.desrt.dconf",
        "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
        "--device=all"
    ],
    "modules": [
        {
            "name": "PyGObject",
            "buildsystem": "simple",
            "ensure-writable": [
                "easy-install.pth"
            ],
            "build-commands": [
                "python3 setup.py install --prefix=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/86/c5/70bd78009fcf29c71db615e28f0b487bf7c5b2741237877dc718626a5741/PyGObject-3.28.2.tar.gz",
                    "sha256": "f704f4be3b4ae3cae70acf82ac64a8c7c44d3acad2d33e9849056ac317345f5e"
                }
            ]
        },
        {
            "name": "pycairo",
            "buildsystem": "simple",
            "ensure-writable": [
                "easy-install.pth"
            ],
            "build-commands": [
                "python3 setup.py install --prefix=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/60/47/d335364f0ca00e475a40a5a664f17691bf77b3973f999b157d56ee89e04a/pycairo-1.17.0.tar.gz",
                    "sha256": "cdd4d1d357325dec3a21720b85d273408ef83da5f15c184f2eff3212ff236b9f"
                }
            ]
        },
        {
            "name": "sdl",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.libsdl.org/release/SDL-1.2.15.tar.gz",
                    "sha256": "d6d316a793e5e348155f0dd93b979798933fb98aa1edebcc108829d6474aad00"
                },
                {
                    "type": "patch",
                    "path": "flatpak/SDL-1.2.15-const_XData32.patch"
                }
            ]
        },
        {
            "name": "sdl-image",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.libsdl.org/projects/SDL_image/release/SDL_image-1.2.12.tar.gz",
                    "sha256": "0b90722984561004de84847744d566809dbb9daf732a9e503b91a1b5a84e5699"
                }
            ]
        },
        {
            "name": "sdl-ttf",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.libsdl.org/projects/SDL_ttf/release/SDL_ttf-2.0.11.tar.gz",
                    "sha256": "724cd895ecf4da319a3ef164892b72078bd92632a5d812111261cde248ebcdb7"
                }
            ]
        },
        {
            "name": "sdl-mixer",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.libsdl.org/projects/SDL_mixer/release/SDL_mixer-1.2.12.tar.gz",
                    "sha256": "1644308279a975799049e4826af2cfc787cad2abb11aa14562e402521f86992a"
                }
            ]
        },
        {
            "name": "Pygame",
            "buildsystem": "simple",
            "ensure-writable": [
                "easy-install.pth"
            ],
            "build-commands": [
                "python3 config.py -auto",
                "python3 setup.py install --prefix=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/61/06/3c25051549c252cc6fde01c8aeae90b96831370884504fe428a623316def/pygame-1.9.3.tar.gz",
                    "sha256": "751021819bdc0cbe5cbd51904abb6ff9e9aee5b0e8955af02284d0e77d6c9ec2"
                }
            ]
        },
        {
            "name": "electrip",
            "sources": [
                {
                    "type": "git",
                    "url": "git://git.code.sf.net/p/electrip/git",
                    "tag": "5.5.1",
                    "commit": "fbfe626446fe5e4fcd94f6ed028e02d68606ad3a"
                }
            ],
            "buildsystem": "simple",
            "ensure-writable": [
              "easy-install.pth"
            ],
            "build-commands": [
                "python3 src/setup.py install --prefix=/app"
            ],
            "post-install": [
                "install -Dm544 electrip /app/bin/electrip",
                "install -Dm444 apps.momits.Electrip.appdata.xml share/metainfo/apps.momits.Electrip.appdata.xml",
                "install -Dm444 apps.momits.Electrip.desktop /app/share/applications/apps.momits.Electrip.desktop",
                "install -Dm644 src/electrip/icons/logo_icon_64.png /app/share/icons/hicolor/64x64/apps/apps.momits.Electrip.png",
                "install -Dm644 src/electrip/icons/logo_icon_128.png /app/share/icons/hicolor/128x128/apps/apps.momits.Electrip.png"
            ]
        }
    ]
}