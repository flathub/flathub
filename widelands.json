{
    "name": "widelands",
    "buildsystem": "cmake",
    "builddir": true,
    "config-opts": [
        "-DCMAKE_BUILD_TYPE=Release",
        "-DCMAKE_INSTALL_PREFIX=/app/bin",
        "-DWL_INSTALL_BASEDIR=/app/share/widelands",
        "-DWL_INSTALL_DATADIR=/app/share/widelands",
        "-DBOOST_ROOT=/app",
        "-DGLEW_ROOT=/app",
        "-DGLEW_GLEW_LIBRARY=/app/lib/libGLEW.so",
        "-DGLEW_INCLUDE_DIR=/app/include/GL",
        "-DGLEW_LIBRARY:FILEPATH=/app/lib/libGLEW.a",
        "-DOPENGL_glu_LIBRARY=/app/lib/libGLU.a",
        "-DOPTION_BUILD_WEBSITE_TOOLS=OFF"
    ],
    "sources": [
        {
            "type": "archive",
            "url": "https://launchpad.net/widelands/build19/build19/+download/widelands-build19-src-gcc7.tar.bz2",
            "sha256": "ef73b8cf5a7c680bad5caade907f1cc6ee88dd3729470b9214a3c72658585458"
        },
        {
            "type": "file",
            "path": "widelands.svg",
            "sha256": "4f860318acb3271b7cf6dcc6ba53fa265977d66894597195bea3b82d35b22335"
        },
        {
            "type": "patch",
            "path": "widelands-build19-ppc64le.patch",
            "strip-components": 1,
            "only-arches": [
                "ppc64le"
            ]
            "sha256": "6ecebb71541c726c591e15ea693a01beb0173fa2040283153d958df456ce735b"
        },
        {
            "type": "patch",
            "path": "widelands-build19-icu-bidi.patch",
            "strip-components": 1,
            "sha256": "651f6d7ea6843752032872c4a20014418d52c5fa01dc72d4ede1d4f030206742"
        },
        {
            "type": "file",
            "path": "widelands_setup.bash"
        },
        {
            "type": "file",
            "path": "widelands_create_icons.bash"
        },
        {
            "type": "file",
            "path": "widelands_create_desktop.bash"
        },
        {
            "type": "file",
            "path": "widelands_create_appdata.bash"
        },
        {
            "type": "file",
            "path": "widelands_edit_desktop.bash"
        },
        {
            "type": "file",
            "path": "widelands_edit_appdata.bash"
        },
        {
            "type": "file",
            "path": "widelands_install_icons.bash"
        },
        {
            "type": "file",
            "path": "widelands_install_pixmaps.bash"
        },
        {
            "type": "file",
            "path": "widelands_install_desktop.bash"
        },
        {
            "type": "file",
            "path": "widelands_install_appdata.bash"
        },
        {
            "type": "file",
            "path": "widelands_install_docs.bash"
        },
        {
            "type": "file",
            "path": "widelands_install_licenses.bash"
        },
        {
            "type": "file",
            "path": "widelands_check_desktop.bash"
        },
        {
            "type": "file",
            "path": "widelands_check_appdata.bash"
        },
        {
            "type": "file",
            "path": "widelands_create.bash"
        },
        {
            "type": "file",
            "path": "widelands_edit.bash"
        },
        {
            "type": "file",
            "path": "widelands_install.bash"
        },
        {
            "type": "file",
            "path": "widelands_check.bash"
        },
        {
            "type": "shell",
            "commands": [
                "echo 'flatpak scripts: create & edit';
                ./widelands_create.bash;
                ./widelands_edit.bash;
                echo;"
            ]
        }
    ],
    "post-install": [
        "echo 'flatpak scripts: install & check';
        [[ \"$( basename \"$( readlink -f '.' )\" )\" != \"_flatpak_build\" ]] || cd '..';
        pwd;
        ./widelands_install.bash;
        ./widelands_check.bash;
        echo;"
    ],
    "cleanup": [
        "bin/wl_render_richtext"
    ]
}
