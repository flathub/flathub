{
  "app-id": "net.bloupla.clia",
  "runtime": "org.gnome.Platform",
  "runtime-version": "47",
  "sdk": "org.gnome.Sdk",
  "command": "clia",
  "finish-args": [
    "--share=ipc",
    "--socket=fallback-x11",
    "--socket=wayland",
    "--device=dri",
    "--share=network",
    "--socket=session-bus",
    "--socket=system-bus",
    "--talk-name=org.freedesktop.Flatpak",
    "--filesystem=xdg-run/dconf",
    "--filesystem=~/.local/share:create",
    "--env=PYTHONPATH=/app/lib/python3.12/site-packages",
    "--env=GI_TYPELIB_PATH=/app/lib/girepository-1.0",
    "--env=TERM=xterm-256color"
  ],
  "modules": [
    {
      "name": "vte",
      "buildsystem": "meson",
      "config-opts": [
        "-Dgir=true",
        "-Dvapi=false",
        "-Dgtk3=false",
        "-Dgtk4=true",
        "-Ddocs=false"
      ],
      "build-options": {
        "env": {
          "PKG_CONFIG_PATH": "/app/lib/pkgconfig:/usr/lib/pkgconfig"
        }
      },
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/vte/0.76/vte-0.76.4.tar.xz",
          "sha256": "9c52d1da6c6f7409289351fc1cba8948cd3b47d048cbfede763a0f75b77453cc"
        }
      ],
      "cleanup": [
        "/etc",
        "/lib/systemd"
      ]
    },
    {
      "name": "python-deps",
      "buildsystem": "simple",
      "build-commands": [
        "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} requests"
      ],
      "sources": [
        {
          "type": "file",
          "url": "https://files.pythonhosted.org/packages/py3/r/requests/requests-2.32.3-py3-none-any.whl",
          "sha256": "70761cfe03c773ceb22aa2f671b4757976145175cdfca038c02654d061d6dcc6"
        },
        {
            "type": "file",
            "url": "https://files.pythonhosted.org/packages/py3/c/certifi/certifi-2024.7.4-py3-none-any.whl",
            "sha256": "c198e21b1289c2ab85ee4e67bb4b4ef3ead0892059901a8d5b622f24a1101e90"
        },
        {
            "type": "file",
            "url": "https://files.pythonhosted.org/packages/py3/c/charset_normalizer/charset_normalizer-3.3.2-py3-none-any.whl",
            "sha256": "3e4d1f6587322d2788836a99c69062fbb091331ec940e02d12d179c1d53e25fc"
        },
        {
            "type": "file",
            "url": "https://files.pythonhosted.org/packages/py3/i/idna/idna-3.7-py3-none-any.whl",
            "sha256": "82fee1fc78add43492d3a1898bfa6d8a904cc97d8427f683ed8e798d07761aa0"
        },
        {
            "type": "file",
            "url": "https://files.pythonhosted.org/packages/py3/u/urllib3/urllib3-2.2.2-py3-none-any.whl",
            "sha256": "a448b2f64d686155468037e1ace9f2d2199776e17f0a46610480d311f73e3472"
        }
      ]
    },
    {
      "name": "clia",
      "buildsystem": "simple",
      "build-commands": [
        "install -D clia.py /app/bin/clia",
        "install -D net.bloupla.clia.desktop /app/share/applications/net.bloupla.clia.desktop",
        "install -D net.bloupla.clia.svg /app/share/icons/hicolor/scalable/apps/net.bloupla.clia.svg",
        "install -D net.bloupla.clia.appdata.xml /app/share/metainfo/net.bloupla.clia.appdata.xml",
        "install -Dm644 LICENSE -t /app/share/licenses/net.bloupla.clia/",
        "install -d /app/share/app-info/screenshots/net.bloupla.clia",
        "install -p -Dm644 screenshot1.png /app/share/app-info/screenshots/net.bloupla.clia/screenshot1.png",
        "install -p -Dm644 screenshot2.png /app/share/app-info/screenshots/net.bloupla.clia/screenshot2.png"
      ],
      "sources": [
        {
          "type": "dir",
          "path": "."
        }
      ]
    }
  ]
}

