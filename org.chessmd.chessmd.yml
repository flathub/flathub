id: org.chessmd.chessmd
runtime: org.kde.Platform
runtime-version: '6.9'
sdk: org.kde.Sdk
command: start.sh

finish-args: 
  - --share=ipc
  - --share=network
  - --socket=x11
  - --filesystem=host
  - --device=dri
  
modules:
  - name: Caissa
    buildsystem: simple
    subdir: src
    sources:
      - type: archive
        url: https://github.com/Witek902/Caissa/archive/refs/tags/1.23.zip
        sha256: 3042e0bec79f51fff158e0774eb9f91c7915cc6e52a8e6d2e1b79cf54c8d19e4

    build-commands:
      - mkdir -p /app/engine
      - make
      - install -D caissa /app/engine/caissa
    cleanup:
       - '*.o'
      
  - name: chessmd
    buildsystem: simple
    sources:
      - type: file
        path: start.sh
      - type: file
        url: https://github.com/dxu0107-png/flathub/raw/refs/heads/new-branch/app/openings.bin
        sha256: 848ecdec753ba1fea44d0a437badc668b084c544205cd58ac3614f0d912c4ff0
      - type: file
        url: https://github.com/dxu0107-png/flathub/raw/refs/heads/new-branch/app/openings.headers
        sha256: f4809eeaaef844c6ba5e45b93b94716e77eb1a17a657283c15732f54c5d39aa1
        size: 39349922
    build-commands:
      - install -Dm755 start.sh /app/bin/start.sh
      - mkdir -p /app/opening
      - install -D openings.bin /app/opening/openings.bin
      - install -D openings.headers /app/opening/openings.headers
  
  - name: ChessMD
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
    sources:
      - type: archive
        url: https://github.com/dxu0107-png/flathub/raw/refs/heads/new-branch/app/ChessMD-1.0.tar.gz
        sha256: 42d66dac74999373827361ea364e4c0c08c251da24227d6ad47fe58a16776b4e
    cleanup:
       - '*.o'
 
   


