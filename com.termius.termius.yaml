app-id: com.termius.termius

runtime: org.gnome.Platform
runtime-version: "3.32"
sdk: org.gnome.Sdk

command: termius-app

finish-args:
  - --socket=x11
  - --share=network

modules:
  - name: terminus
    buildsystem: simple
    build-commands:
        - ar x Termius.deb
        - tar -xvf data.tar.xz
        - mv usr /
        - mv opt /
        - mv etc /
        #- install -D torbrowser.appdata.xml  /app/share/metainfo/org.torproject.torbrowser.appdata.xml
        #- install -D torbrowser.desktop  /app/share/applications/org.torproject.torbrowser.desktop
        - chmod +x /opt/Termius/termius-app
    
    cleanup:
      #- /Browser/TorBrowser/Docs/
    sources:
        - type: file
          url: https://raw.githubusercontent.com/liberodark/flathub/com.termius.termius/com.termius.termius.appdata.xml
          sha256: 7578aefb46c8a8d96f4dc1f1b64d322e2416a35cde377b1bd05d80933b288df6

        #- type: file
         # url: https://raw.githubusercontent.com/micahflee/torbrowser-launcher/develop/share/applications/torbrowser.desktop
         # sha256: edc4a08adcfb78468a34bd46ef8f0de0ef5fdb141bd438709e755dc8b2a3eee6

        - type: script
          commands:
            # Yes. This is dirty. The tarball contains a Firefox profile directory which Firefox expects to be able to write...
            # The tmp directory is, at least when following this manifest and not overwriting the settings, a tmpfs, so we can (or have to) copy over everytime we launch.
            #- cp -ar --reflink=auto /app/Browser /tmp/
            #- cd /tmp/
            #- cd Browser
            #- ./start-tor-browser
         # dest-filename: launch.sh

        - type: file
          url: https://www.termius.com/download/linux/Termius.deb
          sha256: 57dd27dbbe351d5f8539c0bac4db1e6f84b88c2de02a11d32f3e5f0474c3309b
