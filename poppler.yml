name: poppler
config-opts:
  - "-DENABLE_ZLIB=ON"
  - "-DENABLE_LIBTIFF=ON"
  - "-DENABLE_LIBPNG=ON"
  - "-DENABLE_GLIB=ON"
  - "-DENABLE_CMS='lcms2'"
  - "-DENABLE_LIBOPENJPEG='openjpeg2'"
  - "-DENABLE_DCTDECODER='libjpeg'"
  - "-DENABLE_SPLASH=OFF"
  - "-DENABLE_BOOST=OFF"
  - "-DENABLE_CPP=OFF"
buildsystem: cmake-ninja
builddir: true
modules:
  - name: openjpeg2
    buildsystem: cmake-ninja
    builddir: true
    cleanup:
      - /bin
      - /include
      - /lib/openjpeg-*
      - /lib/pkgconfig
    sources:
      - type: archive
        url: "https://github.com/uclouvain/openjpeg/archive/v2.5.0.tar.gz"
        sha256: 0333806d6adecc6f7a91243b2b839ff4d2053823634d4f6ed7a59bc87409122a
        x-checker-data:
          type: anitya
          project-id: 2550
          stable-only: true
          url-template: "https://github.com/uclouvain/openjpeg/archive/v$version.tar.gz"
cleanup:
  - /include
  - /lib/pkgconfig
sources:
  - type: archive
    url: "https://poppler.freedesktop.org/poppler-23.02.0.tar.xz"
    sha256: 3315dda270fe2b35cf1f41d275948c39652fa863b90de0766f6b293d9a558fc9
    x-checker-data:
      type: anitya
      project-id: 3686
      stable-only: true
      url-template: "https://poppler.freedesktop.org/poppler-$version.tar.xz"
