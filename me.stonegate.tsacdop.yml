app-id: "me.stonegate.tsacdop"
runtime: org.gnome.Platform
runtime-version: "41"
sdk: org.gnome.Sdk
command: tsacdop
separate-locales: false
finish-args:
- "--share=ipc"
- "--socket=fallback-x11"
- "--socket=wayland"
- "--socket=pulseaudio"
- "--share=network"
- "--device=dri"
- "--filesystem=xdg-download"
- "--talk-name=org.freedesktop.Notifications"
modules: 
- libvlc.yml
- name: tsacdop
  buildsystem: simple
  only-arches:
  - "x86_64"
  build-commands:
  - "ls tsacdop"
  - "cp -r tsacdop/ /app/tsacdop"
  - "chmod +x /app/tsacdop/bundle/tsacdop_desktop"
  - "install -Dm644 /app/tsacdop/bundle/data/flutter_assets/assets/logo.svg /app/share/icons/hicolor/scalable/apps/me.stonegate.tsacdop.svg"
  - "install -Dm644 /app/tsacdop/me.stonegate.tsacdop.desktop /app/share/applications/me.stonegate.tsacdop.desktop"
  - "install -Dm644 /app/tsacdop/me.stonegate.tsacdop.metainfo.xml /app/share/appdata/me.stonegate.tsacdop.metainfo.xml"
  - "ln -s /usr/lib/x86_64-linux-gnu/libsqlite3.so.0 /app/lib/libsqlite3.so"
  - "ln -s /app/tsacdop/bundle/tsacdop_desktop /app/bin/tsacdop"
  sources:
  - type: archive
    only-arches:
    - "x86_64"
    url: https://github.com/tsacdop/tsacdop_desktop/releases/download/v0.1.1/tsacdop-linux-x86_64.tar.gz
    dest: tsacdop
    sha256: 5ea03251eca27fade220877e08f18d964bfcd844b8c7a931f6022d96533f43d0
