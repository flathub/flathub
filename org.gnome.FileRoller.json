{
    "app-id" : "org.gnome.FileRoller",
    "runtime" : "org.gnome.Platform",
    "runtime-version" : "3.36",
    "sdk" : "org.gnome.Sdk",
    "command" : "file-roller",
    "rename-icon": "org.gnome.ArchiveManager",
    "finish-args" : [
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--filesystem=home",
        "--talk-name=org.gtk.vfs",
        "--talk-name=org.gtk.vfs.*",
        "--filesystem=xdg-run/gvfs"
    ],
    "cleanup" : [
        "/share/man"
    ],
    "modules" : [
        {
            "name": "gcpio",
            "buildsystem": "autotools",
            "cleanup": [
                "/libexec",
                "/share/info",
                "/share/man"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://ftp.gnu.org/gnu/cpio/cpio-2.13.tar.gz",
                    "sha256": "e87470d9c984317f658567c03bfefb6b0c829ff17dbf6b0de48d71a4c8f3db88"
                }
            ]
        },
        {
            "name": "p7zip",
            "no-autogen": true,
            "make-args": [
                "7z"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://sourceforge.net/projects/p7zip/files/p7zip/16.02/p7zip_16.02_src_all.tar.bz2",
                    "sha256": "5eb20ac0e2944f6cb9c2d51dd6c4518941c185347d4089ea89087ffdd6e2341f"
                },
                {
                    "type": "shell",
                    "commands": [
                        "sed -i 's|/usr/local|/app|g' makefile.common"
                    ]
                }
            ]
        },
        {
            "name": "unrar",
            "no-autogen": true,
            "make-install-args": [
                "DESTDIR=/app"
            ],
            "only-arches": ["x86_64"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.rarlab.com/rar/rarlinux-x64-5.9.1.tar.gz",
                    "sha256": "4eecb5f5f2cdd6b896bbbf5f98e718a672171f44fa9205f441aa6e6771ef2c06"
                }
            ]
        },
        {
            "name" : "file-roller",
            "buildsystem" : "meson",
            "cleanup": [
                "org.gnome.FileRoller.ArchiveManager1.service"
            ],
            "sources" : [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/file-roller/3.36/file-roller-3.36.3.tar.xz",
                    "sha256": "0959e10a5d7a7442809624be9879d95db462ca76e8c66ad6299310e6acdb81b7"
                },
                {
                    "type" : "patch",
                    "path" : "appdata.patch"
                }
            ]
        }
    ]
}
