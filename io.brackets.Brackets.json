{
    "app-id": "io.brackets.Brackets",
    "branch": "stable",
    "base": "io.atom.electron.BaseApp",
    "base-version": "stable",
    "runtime": "org.freedesktop.Sdk",
    "runtime-version": "1.6",
    "sdk": "org.freedesktop.Sdk",
    "command": "brackets",
    "separate-locales": false,
    "finish-args": [
      "--share=ipc",
      "--socket=x11",
      "--socket=pulseaudio",
      "--share=network",
      "--device=dri",
      "--talk-name=org.freedesktop.Notifications",
      "--talk-name=org.gtk.vfs.*",
      "--talk-name=org.gnome.GConf",
      "--filesystem=host"
  ],

    "modules": [
        {
            "name": "brackets",
            "buildsystem": "simple",
            "build-commands": [
        "if [[ $(uname -m) = 'x86_64' ]]; then ar x Brackets.Release.release-1.13-prerelease-3.64-bit.deb; else ar x Brackets.Release.release-1.13-prerelease-3.32-bit.deb; fi",
        "tar -xf data.tar.xz",
        "cp -r opt/brackets/* /app",

        "mkdir -p /app/share/icons/hicolor/512x512/apps",
        "mv usr/share/icons/hicolor/scalable/apps/brackets.svg /app/share/icons/hicolor/512x512/apps/io.brackets.Brackets.svg",
	    "rm -rf /app/share/icons/HighContrast",

	   "ln -sf /app/brackets /app/bin/brackets",
	   "sed -i 's|\"$HERE/Brackets\"|\"$HERE/Brackets\" --no-sandbox|g' /app/brackets",

        "desktop-file-edit --set-key=Exec --set-value='brackets %F' --set-key=Icon --set-value=io.brackets.Brackets.svg /app/brackets.desktop",
	    "mkdir -p /app/share/applications/",
	    "mv /app/brackets.desktop /app/share/applications/io.brackets.Brackets.desktop",

        "install -Dm644 io.brackets.Brackets.appdata.xml /app/share/appdata/io.brackets.Brackets.appdata.xml"
      ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://github.com/adobe/brackets/releases/download/release-1.13-prerelease-3/Brackets.Release.release-1.13-prerelease-3.64-bit.deb",
                    "sha256": "816db6574d358204bb1e2c6d248154a49d128420cd87bea58d54d3270b7d1f08"
        },
                {
                    "type": "file",
                    "url": "https://github.com/adobe/brackets/releases/download/release-1.13-prerelease-3/Brackets.Release.release-1.13-prerelease-3.32-bit.deb",
                    "sha256": "5792326c49787a8d32209a049db0069d5501fbb452429ce11304efc4eb4a2bf0"
	},
                {
                    "type": "file",
                    "path": "io.brackets.Brackets.appdata.xml"
        },
                {
                    "type": "file",
                    "url": "https://github.com/adobe/brackets/archive/release-1.13-prerelease-3.tar.gz",
                    "sha256": "8dbc31a234f724b87ab37244999cc352c8ede34819380449fd9850bc950d74c3"
	}
      ]
        }
      ]
}
