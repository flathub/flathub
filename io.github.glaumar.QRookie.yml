app-id: io.github.glaumar.QRookie
runtime: org.kde.Platform
runtime-version: "6.6"
sdk: org.kde.Sdk
command: qrookie
finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --share=ipc
  - --device=all
  - --share=network
  - --persist=.android
cleanup:
  - "*.a"
  - /include
modules:
  - name: p7zip
    buildsystem: simple
    build-commands:
      - cd CPP/7zip/Bundles/Alone
      - make
      - cd ../../../../
      - install -pDm 0755 bin/7za -t "$FLATPAK_DEST/bin/"
    sources:
      - type: archive
        url: https://github.com/p7zip-project/p7zip/archive/refs/tags/v17.05.tar.gz
        sha256: d2788f892571058c08d27095c22154579dfefb807ebe357d145ab2ddddefb1a6

  - name: android-tools
    buildsystem: simple
    build-commands:
      - install -pDm 0755 adb -t "$FLATPAK_DEST/bin/"
    sources:
      - type: archive
        url: https://dl.google.com/android/repository/platform-tools_r34.0.0-linux.zip
        sha256: 8137c2834dea05cb64c1a8bc041ea00fcd43e3a8a29429ad4f25b8ee51efebf6

  - name: qcoro
    buildsystem: cmake-ninja
    sources:
      - type: archive
        url: https://github.com/danvratil/qcoro/archive/refs/tags/v0.10.0.tar.gz
        sha256: b7c8f00273ad27d85814bf4ec93eb6922c75656800a61d11854d36355a4a1aec

  - name: qrookie
    buildsystem: cmake-ninja
    sources:
      - type: archive
        url: https://github.com/glaumar/QRookie/archive/refs/tags/v0.2.0.tar.gz
        sha256: 0c55665ef36879897a245a739cfea633a0b10d5c2a28a08d8f1e4f59a77f2805