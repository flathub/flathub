id: it.mq1.TinyWiiBackupManager
runtime: org.freedesktop.Platform
runtime-version: "25.08"
sdk: org.freedesktop.Sdk
command: TinyWiiBackupManager
finish-args:
  - --share=network
  - --share=ipc
  - --filesystem=host
  - --device=dri
  - --socket=fallback-x11
  - --socket=wayland
  - --env=TWBM_DISABLE_UPDATES=1
modules:
  - name: TinyWiiBackupManager
    buildsystem: simple
    build-commands:
      - chmod +x TinyWiiBackupManager.AppImage
      - ./TinyWiiBackupManager.AppImage --appimage-extract
      - install -Dm755 ./squashfs-root/usr/bin/TinyWiiBackupManager /app/bin/TinyWiiBackupManager
      - install -Dm644 ./squashfs-root/usr/share/applications/TinyWiiBackupManager.desktop /app/share/applications/it.mq1.TinyWiiBackupManager.desktop
      - sed -i 's/Icon=TinyWiiBackupManager/Icon=it.mq1.TinyWiiBackupManager/' /app/share/applications/it.mq1.TinyWiiBackupManager.desktop
      - install -Dm644 ./squashfs-root/usr/share/icons/hicolor/256x256/apps/TinyWiiBackupManager.png /app/share/icons/hicolor/256x256/apps/it.mq1.TinyWiiBackupManager.png
    sources:
      - type: file
        dest-filename: TinyWiiBackupManager.AppImage
        only-arches:
          - x86_64
        url: https://github.com/mq1/TinyWiiBackupManager/releases/download/2.4.7/TinyWiiBackupManager_2.4.7_x86_64.AppImage
        sha256: 07a76d522d363ff6300d9f33aab7373d78e0aa8f1eafe3ba0e1a5659e569904f
      - type: file
        dest-filename: TinyWiiBackupManager.AppImage
        only-arches:
          - aarch64
        url: https://github.com/mq1/TinyWiiBackupManager/releases/download/2.4.7/TinyWiiBackupManager_2.4.7_aarch64.AppImage
        sha256: 19f02a74ea9ff499dca0762b451e72bba7f3c052cd8225b15c10f32d35da51ca
