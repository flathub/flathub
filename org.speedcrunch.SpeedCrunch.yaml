---
app-id: org.speedcrunch.SpeedCrunch
runtime: org.kde.Platform
runtime-version: '5.11'
sdk: org.kde.Sdk
command: speedcrunch
rename-desktop-file: speedcrunch.desktop
rename-appdata-file: speedcrunch.appdata.xml
rename-icon: speedcrunch
finish-args:
- "--socket=x11"
- "--share=ipc"
- "--socket=wayland"

modules:
- name: speedcrunch
  buildsystem: cmake-ninja
  subdir: src
  post-install:
  - mkdir -p $FLATPAK_DEST/share/icons/hicolor/scalable/apps
  - cp ../gfx/speedcrunch.svg $FLATPAK_DEST/share/icons/hicolor/scalable/apps/speedcrunch.svg
  sources:
  - type: git
    url: https://bitbucket.org/heldercorreia/speedcrunch.git
    tag: release-0.12.0
  - type: patch
    path: additional-appdata.patch

- name: app-icons
  buildsystem: simple
  build-commands:
  - bash create-icons.sh
  sources:
  - type: file
    path: create-icons.sh

cleanup:
- /share/pixmaps
