{
  "id": "com.github.SuperTuxAdvance",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "23.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "launch-sta",
  "modules": [
    {
      "name": "lerc",
      "buildsystem": "cmake",
      "config-opts": [
        "-DBUILD_SHARED_LIBS=ON"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/Esri/lerc/archive/refs/tags/v4.0.0.tar.gz",
          "sha256": "91431c2b16d0e3de6cbaea188603359f87caed08259a645fd5a3805784ee30a0"
        }
      ]
    },
    {
      "name": "libwebp",
      "buildsystem": "autotools",
      "config-opts": [
        "--enable-libwebpmux",
        "--enable-libwebpdemux",
        "--enable-libsharpyuv"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://storage.googleapis.com/downloads.webmproject.org/releases/webp/libwebp-1.3.1.tar.gz",
          "sha256": "b3779627c2dfd31e3d8c4485962c2efe17785ef975e2be5c8c0c9e6cd3c4ef66"
        }
      ]
    },
    {
      "name": "supertux-advance",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p /app/sta",
        "cp -a sta-0.2.48/sta/* /app/sta/",
        "install -Dm755 /app/sta/sta /app/bin/sta",
        "echo '#!/usr/bin/env bash' > launch-sta",
        "echo 'cd /app/sta' >> launch-sta",
        "echo 'exec ./sta' >> launch-sta",
        "install -Dm755 launch-sta /app/bin/launch-sta"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/JaredTweed/supertux-advance/releases/download/v0.2.48/sta-0.2.48.zip",
          "sha256": "8b90405719d4d27302cf4f2f2e89eac7e7382ffe056fb64e3cdba89ecc6143f9"
        }
      ]
    }
  ],
  "finish-args": [
    "--socket=x11",
    "--socket=wayland",
    "--socket=pulseaudio",
    "--env=BRUX_AUDIO_BACKEND=pulseaudio",
    "--env=SDL_AUDIODRIVER=pulseaudio",
    "--device=all"
  ]
}