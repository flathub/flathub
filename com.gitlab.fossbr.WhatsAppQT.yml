app-id: com.gitlab.fossbr.WhatsAppQT
runtime: org.kde.Platform
runtime-version: '5.15-21.08'
sdk: org.kde.Sdk
base: io.qt.qtwebengine.BaseApp
base-version: '5.15-21.08'
command: WhatsAppQT
finish-args:
- "--share=ipc"
- "--socket=fallback-x11"
- "--socket=wayland"
- "--socket=pulseaudio"
- "--share=network"
- "--filesystem=xdg-download"
- "--device=dri"
- "--env=QTWEBENGINEPROCESS_PATH=/app/bin/QtWebEngineProcess"
- "--talk-name=org.kde.StatusNotifierWatcher"
cleanup-commands:
- /app/cleanup-BaseApp.sh
modules:
- name: WhatsAppQT
  buildsystem: qmake
  build-commands:
    - install -Dm00644 $FLATPAK_ID.appdata.xml $FLATPAK_DEST/share/metainfo/$FLATPAK_ID.appdata.xml
    - install -Dm00644 $FLATPAK_ID.desktop $FLATPAK_DEST/share/applications/$FLATPAK_ID.desktop
  build-options:
    env:
    - QMAKEPATH=/app/lib
  config-opts:
  - QMAKE_INCDIR+=/app/include/QtWebEngine
  - QMAKE_INCDIR+=/app/include/QtWebEngineCore
  - QMAKE_INCDIR+=/app/include/QtWebEngineWidgets
  sources:
  - type: archive
    url: "https://gitlab.com/fossbr/whatsappqt/-/archive/v1.1.0/whatsappqt-v1.1.0.tar.gz"
    sha256: 300fc3b81ae2986ef9b46f3b48ea4fff608bcd7ad768a54b7ff510b0920a2103
