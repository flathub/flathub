{
	"id": "org._9front.drawterm",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "24.08",
	"sdk": "org.freedesktop.Sdk",
	"command": "drawterm",
	"finish-args": [
		"--share=ipc",
		"--share=network",
		"--socket=wayland",
		"--socket=fallback-x11"
	],
	"modules": [
		{
			"name": "wlr-protocols",
			"buildsystem": "simple",
			"builddir": false,
			"build-commands": [
				"make PREFIX=/app",
				"make PREFIX=/app install"
			],
			"sources": [
				{
					"type": "git",
					"url": "https://gitlab.freedesktop.org/wlroots/wlr-protocols.git",
					"commit": "2ec67ebd26b73bada12f3fa6afdd51563b656722"
				}
			]
		},
		{
			"name": "libdecor",
			"buildsystem": "meson",
			"builddir": false,
			"sources": [
				{
					"type": "git",
					"url": "https://gitlab.freedesktop.org/libdecor/libdecor.git",
					"tag": "0.2.3"
				}
			],
			"cleanup": [
				"/include",
				"/lib/pkgconfig"
			]
		},
		{
			"name": "drawterm-wayland",
			"buildsystem": "simple",
			"builddir": false,
			"build-commands": [
				"make CONF=flatpak-wayland -j$(nproc)",
				"install -Dm755 drawterm-wayland -t /app/bin"
			],
			"sources": [
				{
					"type": "git",
					"url": "https://github.com/9front/drawterm.git",
					"commit": "a6c1ce4e0244ca70403dc4e795a9cee548159560"
				},
				{
					"type": "file",
					"path": "files/Make.flatpak-wayland"
				},
				{
					"type": "patch",
					"path": "files/drawterm-wayland-decor.patch"
				}
			]
		},
		{
			"name": "drawterm-x11",
			"buildsystem": "simple",
			"builddir": false,
			"build-commands": [
				"make CONF=flatpak-x11 -j$(nproc)",
				"install -Dm755 drawterm-x11 -t /app/bin"
			],
			"sources": [
				{
					"type": "git",
					"url": "https://github.com/9front/drawterm.git",
					"commit": "a6c1ce4e0244ca70403dc4e795a9cee548159560"
				},
				{
					"type": "file",
					"path": "files/Make.flatpak-x11"
				}
			]
		},
		{
			"name": "drawterm-x11",
			"buildsystem": "simple",
			"builddir": false,
			"build-commands": [
				"install -Dm755 drawterm -t /app/bin",
				"install -Dm644 org._9front.drawterm.desktop -t /app/share/applications",
				"install -Dm644 org._9front.drawterm.metainfo.xml -t /app/share/metainfo",
				"install -Dm644 org._9front.drawterm.png -t /app/share/icons/hicolor/256x256/apps"
			],
			"sources": [
				{
					"type": "dir",
					"path": "files"
				}
			]
		}
	]
}