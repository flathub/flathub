id: io.github.baldeuniversel.am-okay
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk 

command: am-okay

finish-args:
    - --filesystem=host
    - --filesystem=home 
    - --filesystem=/tmp
    - --device=all
    - --filesystem=/media

modules:
    - name: am-okay-package
      buildsystem: simple      
      sources:
          - type: git 
            url: https://github.com/baldeuniversel/am-okay.git 
            branch: main
            commit: 85338d021d86a3b66e2d92a3d6603fa3a48192f2 

      build-commands: 
            - install -Dm0755 am-okay/bin/am-okay -t /app/bin  

            - |
              install -Dm0644 am-okay/share/applications/io.github.baldeuniversel.am-okay.desktop -t \
              /app/share/applications 
            
            - |
              install -Dm0644 am-okay/share/icons/hicolor/128x128/apps/io.github.baldeuniversel.am-okay.png -t \
              /app/share/icons/hicolor/128x128/apps

            - install -Dm0755 am-okay/lib/am-okay/library/am-okay-reset-actions.sh -t /app/lib/am-okay/library
            - install -Dm0755 am-okay/lib/am-okay/library/progress-bar-array-copy.sh -t /app/lib/am-okay/library
            - install -Dm0755 am-okay/lib/am-okay/library/progress-bar-array-cut.sh -t /app/lib/am-okay/library
            - install -Dm0755 am-okay/lib/am-okay/library/progress-bar-copy.sh -t /app/lib/am-okay/library
            - install -Dm0755 am-okay/lib/am-okay/library/progress-bar-cut.sh -t /app/lib/am-okay/library

            - install -Dm0644 am-okay/lib/am-okay/documentation/am-okay-doc -t /app/lib/am-okay/documentation 
            - install -Dm0644 am-okay/lib/am-okay/documentation/am-okay-help -t /app/lib/am-okay/documentation
            - install -Dm0644 am-okay/lib/am-okay/documentation/am-okay-version -t /app/lib/am-okay/documentation
            - install -Dm0644 am-okay/lib/am-okay/documentation/am-okay-version-pure -t /app/lib/am-okay/documentation

            - install -Dm0644 am-okay/share/man/man1/am-okay.1.gz -t /app/share/man/man1

    - name: am-okay-xml
      buildsystem: simple      
      sources:
          - type: git
            url: https://github.com/baldeuniversel/flathub.git 
            branch: am-okay

      build-commands: 
            - install -D io.github.baldeuniversel.am-okay.metainfo.xml -t /app/share/metainfo  
