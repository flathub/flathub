app-id: net.sonobus.SonoBus
runtime: org.freedesktop.Platform
sdk: org.freedesktop.Sdk
runtime-version: '20.08'
command: sonobus
finish-args:
  - --share=ipc
  - --socket=x11
  - --device=dri
  - --share=network
  - --socket=pulseaudio
  - --filesystem=~/Downloads
  - --filesystem=~/Music
# Jack
  - --filesystem=xdg-run/pipewire-0
  - --system-talk-name=org.freedesktop.RealtimeKit1
cleanup:
  - /lib/libjack*
  - /lib/jack

modules:
  - shared-modules/linux-audio/jack2.json

  - name: SonoBus
    buildsystem: cmake
    sources:
      - type: archive
        url: https://github.com/sonosaurus/sonobus/archive/refs/tags/1.4.5.tar.gz
        sha256: a632b3da282197fb0da43bc64ed6c1708b8971e00f2fa2cb360765e25d4474a8
      - type: file
        path: net.sonobus.SonoBus.metainfo.xml

        
    #build-commands:
      #- CONFIG=Release make -j$(nproc) -C Builds/LinuxMakefile Standalone
      #- install -D "${FLATPAK_BUILDER_BUILDDIR}/images/SonoBus-Icon.svg" "${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/$FLATPAK_ID.svg"
      #- install -Dm644 "${FLATPAK_BUILDER_BUILDDIR}/$FLATPAK_ID.metainfo.xml" "${FLATPAK_DEST}/share/metainfo/$FLATPAK_ID.metainfo.xml"
    #post-install:
      #- install -Dm755 -t ${FLATPAK_DEST}/bin/ Builds/LinuxMakefile/build/sonobus
      #- install -Dm644 "Builds/LinuxMakefile/sonobus.desktop" "${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop"
      #- desktop-file-edit --set-icon=${FLATPAK_ID} /app/share/applications/${FLATPAK_ID}.desktop
