name: Automatic application merge

on: 
  issue_comment:
    types:
      - created
  workflow_dispatch:

jobs:
  merge:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    if: ${{ github.event.issue.pull_request && contains(github.event.comment.body, '/merge') }}
    steps:
      - uses: flathub-infra/merge-action@main
        with:
          token: ${{ secrets.FLATHUBBOT_TOKEN }}
