{
	"id": "com.davidmorais.kuro",
	"base": "org.electronjs.Electron2.BaseApp",
	"base-version": "25.08",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "25.08",
	"sdk": "org.freedesktop.Sdk",
	"separate-locales": false,
	"command": "run.sh",
	"finish-args": [
		"--socket=x11",
		"--device=dri",
		"--share=ipc",
		"--share=network",
		"--socket=pulseaudio"
	],
	"build-options": {
		"append-path": "/usr/lib/sdk/node24/bin",
		"env": {
			"NPM_CONFIG_LOGLEVEL": "info"
		}
	},
	"modules": [
		{
			"name": "kuro",
			"buildsystem": "simple",
			"build-options": {
				"env": {
					"XDG_CACHE_HOME": "/run/build/kuro/flatpak-node/cache",
					"npm_config_cache": "/run/build/kuro/flatpak-node/npm-cache",
					"npm_config_offline": "true"
				}
			},
			"build-commands": [
				"npm install --offline",
				"flatpak-node/electron-builder-arch-args.sh",
				"npm run dist -- $ELECTRON_BUILDER_ARCH_ARGS  --linux --dir",
				"cp -a dist/linux*unpacked /app/main",

				"install -Dm755 -t /app/bin run.sh",
				"install -Dm644 $FLATPAK_ID.metainfo.xml -t /app/share/metainfo"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/davidsmorais/kuro/archive/refs/tags/v9.1.1.tar.gz",
					"sha256": "4dfbb890a4276bf4e449f1fb549a39e325076cc268c9c2a8cc25d5f311225071"
				},
				{
					"type": "file",
					"path": "com.davidmorais.kuro.metainfo.xml"
				},
				{
					"type": "script",
					"dest-filename": "run.sh",
					"commands": [
						"zypak-wrapper /app/bin/kuro"
					]
				},
				"generated-sources.json"
			]
		}
	]
}