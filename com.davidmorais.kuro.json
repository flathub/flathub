{
	"id": "com.davidmorais.kuro",
	"base": "org.electronjs.Electron2.BaseApp",
	"base-version": "25.08",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "25.08",
	"sdk": "org.freedesktop.Sdk",
	"command": "run",
	"rename-desktop-file": "kuro.desktop",
	"finish-args": [
		"--socket=fallback-x11",
		"--socket=wayland",
		"--device=dri",
		"--share=ipc",
		"--share=network",
		"--socket=pulseaudio"
	],
	"modules": [
		{
			"name": "kuro",
			"buildsystem": "simple",
			"build-commands": [
				"set -e",
				"LANG=C bsdtar --to-stdout -xf kuro_9.1.1_amd64.deb data.* | LANG=C bsdtar -xf - --strip-components=2",
				"rm kuro_9.1.1_amd64.deb",

				"cp -r Kuro/* /app/bin",
				"install -Dm755 run /app/bin/run",

				"install -Dm644 share/icons/hicolor/16x16/apps/kuro.png /app/share/icons/hicolor/16x16/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/24x24/apps/kuro.png /app/share/icons/hicolor/24x24/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/32x32/apps/kuro.png /app/share/icons/hicolor/32x32/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/48x48/apps/kuro.png /app/share/icons/hicolor/48x48/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/64x64/apps/kuro.png /app/share/icons/hicolor/64x64/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/128x128/apps/kuro.png /app/share/icons/hicolor/128x128/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/256x256/apps/kuro.png /app/share/icons/hicolor/256x256/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/512x512/apps/kuro.png /app/share/icons/hicolor/512x512/apps/$FLATPAK_ID.png",
				"install -Dm644 share/icons/hicolor/1024x1024/apps/kuro.png /app/share/icons/hicolor/1024x1024/apps/$FLATPAK_ID.png",

				"install -Dm644 $FLATPAK_ID.metainfo.xml -t /app/share/metainfo",

				"install -Dm644 share/applications/kuro.desktop /app/share/applications/kuro.desktop",
				"desktop-file-edit --set-icon=$FLATPAK_ID --set-key=Exec --set-value=run /app/share/applications/kuro.desktop"
			],
			"sources": [
				{
					"type": "file",
					"url": "https://github.com/davidsmorais/kuro/releases/download/v9.1.1/kuro_9.1.1_amd64.deb",
					"sha256": "a670e04066dc219ae9446f463c0ebb7fc0381b67fcde391c1198ba9e20ac91f0"
				},
				{
					"type": "file",
					"path": "com.davidmorais.kuro.metainfo.xml"
				},
				{
					"type": "script",
					"dest-filename": "run",
					"commands": [
						"zypak-wrapper /app/bin/kuro"
					]
				}
			]
		}
	]
}