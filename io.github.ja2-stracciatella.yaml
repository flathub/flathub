app-id: io.github.ja2-stracciatella
runtime: org.freedesktop.Platform
runtime-version: '22.08'
sdk: org.freedesktop.Sdk
command: ja2-launcher
finish-args:
  - '--share=network'
  - '--socket=x11'
  - '--share=ipc'
  - '--device=dri'
  - '--socket=pulseaudio'
  # Persist ja2 setting files
  - '--persist=.ja2'
modules:
  - modules/rapidjson.json
  - name: ja2-stracciatella
    buildsystem: cmake-ninja
    config-opts:
      - '-DEXTRA_DATA_DIR=/app/share/ja2'
      - '-DLOCAL_LUA_LIB=OFF'
      - '-DLOCAL_SOL_LIB=OFF'
      - '-DLOCAL_RAPIDJSON_LIB=OFF'
      - '-DWITH_UNITTESTS=OFF'
    sources:
      - type: git
        url: 'https://github.com/ja2-stracciatella/ja2-stracciatella.git'
        commit: '3ac1322583be2307376563da7bf73a109ea7dfe0'
