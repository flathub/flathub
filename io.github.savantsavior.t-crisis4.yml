app-id: io.github.savantsavior.t-crisis4
runtime: org.gnome.Platform
runtime-version: '48'
sdk: org.gnome.Sdk
command: tc4-tribute3-wrapper.sh

finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --socket=pulseaudio
  - --device=all
  - --allow=bluetooth
  - --persist=.tc4-tribute3   # keep saves/back-compat with your current dir

modules:
  # Your game (SDL2 provided by GNOME 48)
  - name: t-crisis4
    buildsystem: simple
    build-commands:
      - make
      - install -Dm755 tc4-tribute3 /app/bin/tc4-tribute3
      - install -Dm755 tc4-tribute3-wrapper.sh /app/bin/tc4-tribute3-wrapper.sh
      - install -Dm644 io.github.savantsavior.t-crisis4.desktop /app/share/applications/io.github.savantsavior.t-crisis4.desktop
      - install -Dm644 io.github.savantsavior.t-crisis4.metainfo.xml /app/share/metainfo/io.github.savantsavior.t-crisis4.metainfo.xml
      - install -Dm644 io.github.savantsavior.t-crisis4.png /app/share/icons/hicolor/256x256/apps/io.github.savantsavior.t-crisis4.png
      - install -Dm644 license.txt /app/share/licenses/io.github.savantsavior.t-crisis4/LICENSE
      - cp -r data /app/bin/data
    sources:
      - type: archive
        url: https://github.com/savantsavior/t-crisis4/archive/d3a7ac3e04dfe5899b89d0de73a6a7933564f6a4.tar.gz
        sha256: 13d34e3018684487a0d2f27a2d4df11da5059ff57cd32092b80630ec253ecb47
      - type: file
        path: tc4-tribute3-wrapper.sh
