{
  "id": "net.scribus.Scribus",
  "runtime": "org.kde.Platform",
  "sdk": "org.kde.Sdk",
  "command": "scribus",
  "rename-desktop-file": "scribus.desktop",
  "rename-appdata-file": "scribus.appdata.xml",
  "rename-icon": "scribus",
  "tags": ["nightly"],
  "desktop-file-name-prefix": "(Nightly) ",
  "finish-args": [
    "--device=dri",
    "--share=ipc",
    "--socket=x11",
    "--socket=pulseaudio",
    "--filesystem=host"
  ],
  "build-options": {
    "cflags": "-O2 -g",
    "cxxflags": "-O2 -g",
    "env": {
      "V": "1"
    }
  },
  "cleanup": ["/include", "/lib/pkgconfig", "/share/pkgconfig", "/lib/cmake", "*.la", "*.a"],
  "modules": [
    {
      "name": "boost",
      "config-opts": [ "--with-libraries=python" ],
      "sources":
      [
        {
          "type": "archive",
          "url": "https://downloads.sourceforge.net/project/boost/boost/1.60.0/boost_1_60_0.tar.bz2",
          "sha256": "686affff989ac2488f79a97b9479efb9f2abae035b5ed4d8226de6857933fd3b"
        },
        {
          "type": "file",
          "path": "boost-configure",
          "dest-filename": "configure"
        }
      ],
      "cleanup": [
        "/include"
      ]
    },
    {
      "name": "cppunit",
      "buildsystem": "autotools",
      "cleanup": [ "/share/aclocal" ],
      "sources":
      [
        {
          "type":"archive",
          "url": "https://sourceforge.net/projects/cppunit/files/cppunit/1.12.1/cppunit-1.12.1.tar.gz",
          "sha256": "ac28a04c8e6c9217d910b0ae7122832d28d9917fa668bcc9e0b8b09acb4ea44a"
        }
      ]
    },
    {
      "name": "podofo",
      "buildsystem": "cmake",
      "config-opts": [ "-DPODOFO_BUILD_LIB_ONLY=1" ],
      "cleanup": [ "/bin" ],
      "sources": [
        {
          "type": "archive",
          "url": "https://sourceforge.net/projects/podofo/files/podofo/0.9.5/podofo-0.9.5.tar.gz",
          "sha256": "854981cb897ebc14bac854ea0f25305372261a48a205363fe1c61659ba7b5304"
        }
      ]
    },
    {
      "name": "librevenge",
      "buildsystem": "autotools",
      "sources":
      [
        {
          "type":"git",
          "branch": "librevenge-0.0.4",
          "url": "https://git.code.sf.net/p/libwpd/librevenge"
        }
      ]
    },
    {
      "name": "libmspub",
      "buildsystem": "autotools",
      "cleanup": [ "/bin" ],
      "sources":[
        {
          "type":"git",
          "branch": "libmspub-0.1.2",
          "url": "git://anongit.freedesktop.org/libreoffice/libmspub"
        }
      ]
    },
    {
      "name": "libcdr",
      "buildsystem": "autotools",
      "cleanup": [ "/bin" ],
      "sources":
      [
        {
          "type":"git",
          "branch": "libcdr-0.1.3",
          "url": "git://anongit.freedesktop.org/libreoffice/libcdr"
        }
      ]
    },
    {
      "name": "libwpd",
      "buildsystem": "autotools",
      "sources":
      [
        {
          "type":"git",
          "branch": "RELEASE-0-10-0",
          "url": "https://git.code.sf.net/p/libwpd/code"
        }
      ]
    },
    {
      "name": "libwpg",
      "buildsystem": "autotools",
      "cleanup": [ "/bin" ],
      "sources":
      [
        {
          "type":"git",
          "branch": "RELEASE-0-3-1",
          "url": "https://git.code.sf.net/p/libwpg/code"
        }
      ]
    },
    {
      "name": "libvisio",
      "buildsystem": "autotools",
      "cleanup": [ "/bin" ],
      "sources":
      [
        {
          "type":"git",
          "branch": "libvisio-0.1.5",
          "url": "https://github.com/LibreOffice/libvisio"
        }
      ]
    },
    {
      "name": "libpagemaker",
      "buildsystem": "autotools",
      "cleanup": [ "/bin" ],
      "sources":
      [
        {
          "type":"git",
          "branch": "libpagemaker-0.0.3",
          "url": "git://gerrit.libreoffice.org/libpagemaker"
        }
      ]
    },
    {
      "name": "libfreehand",
      "buildsystem": "autotools",
      "cleanup": [ "/bin" ],
      "sources":[
        {
          "type":"git",
          "branch": "libfeehand-0.1.1",
          "url": "https://github.com/LibreOffice/libfreehand.git"
        }
      ]
    },
    {
      "name": "openscenegraph",
      "buildsystem": "cmake",
      "sources":
      [
        {
          "type":"archive",
          "url": "http://trac.openscenegraph.org/downloads/developer_releases/OpenSceneGraph-3.4.0.zip",
          "sha256": "5c727d84755da276adf8c4a4a3a8ba9c9570fc4b4969f06f1d2e9f89b1e3040e"
        }
      ]
    },
    {
      "name": "graphicsmagick",
      "buildsystem": "autotools",
      "config-opts": ["--enable-shared", "--disable-static", "--without-perl", "--with-modules", "--with-quantum-depth=16", "--with-threads"],
      "sources":[
        {
          "type":"archive",
          "url": "https://sourceforge.net/projects/graphicsmagick/files/graphicsmagick/1.3.25/GraphicsMagick-1.3.25.tar.xz",
          "sha256": "d64bfa52d2e0730eff9ce3ed51d4fc78dbb68e2adaa317b2bb3c56e6ee61ac9f"
        }
      ]
    },
    {
      "name": "qpdf",
      "buildsystem": "autotools",
      "sources":
      [
        {
          "type":"git",
          "url": "https://github.com/qpdf/qpdf.git"
        }
      ]
    },
    {
      "name": "popplerdata",
      "no-autogen": true,
      "make-install-args": ["prefix=/app"],
      "sources": [
        {
          "type": "archive",
          "url": "http://poppler.freedesktop.org/poppler-data-0.4.7.tar.gz",
          "sha256": "e752b0d88a7aba54574152143e7bf76436a7ef51977c55d6bd9a48dccde3a7de"
        }
      ]
    },
    {
      "name": "poppler",
      "buildsystem": "autotools",
      "config-opts": ["--enable-xpdf-headers"],
      "sources": [
        {
          "type": "git",
          "url": "git://anongit.freedesktop.org/poppler/poppler",
          "branch": "poppler-0.19.4"
        }
      ]
    },
    {
      "name": "ghostscript",
      "buildsystem": "autotools",
      "config-opts": ["--disable-cups"],
      "sources":
      [
        {
          "type":"git",
          "branch": "ghostscript-9.21",
          "url": "git://git.ghostscript.com/ghostpdl.git"
        }
      ]
    },
    {
      "name": "scribus",
      "buildsystem": "cmake",
      "config-opts": [ "-DWANT_GRAPHICSMAGICK=1" ],
      "post-install":
      [
        "for i in 16x16 32x32 128x128 256x256 512x512 1024x1024; do install -Dm644 resources/iconsets/artwork/icon_${i}.png /app/share/icons/hicolor/${i}/apps/scribus.png; done",
        "mv /app/share/mime/packages/scribus.xml /app/share/mime/packages/net.scribus.Scribus.xml"
      ],
      "sources":
      [
        {
          "type": "git",
          "url": "https://github.com/scribusproject/scribus.git"
        }
      ]
    }
  ]
}
