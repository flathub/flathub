id: org.codecoop.kjo.bookletimposer
version: 1.4.1
branch: stable
runtime: org.gnome.Platform
runtime-version: '3.32'
sdk: org.gnome.Sdk
command: bookletimposerwrapper.sh
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=wayland
  - --filesystem=home
modules:
  - shared-modules/python2.7/python-2.7.json

  - name: pyPdf2
    buildsystem: simple
    build-commands:
      - python2 setup.py install --prefix="${FLATPAK_DEST}"
    sources:
      - type: archive
        url: https://files.pythonhosted.org/packages/b4/01/68fcc0d43daf4c6bdbc6b33cc3f77bda531c86b174cac56ef0ffdb96faab/PyPDF2-1.26.0.tar.gz
        sha256: e28f902f2f0a1603ea95ebe21dff311ef09be3d0f0ef29a3e44a932729564385

  - name: python-distutils-extra
    buildsystem: simple
    build-commands:
      - python2 setup.py install --prefix="${FLATPAK_DEST}"
    sources:
      - url: https://launchpad.net/python-distutils-extra/trunk/2.39/+download/python-distutils-extra-2.39.tar.gz
        sha256: 723f24f4d65fc8d99b33a002fbbb3771d4cc9d664c97085bf37f3997ae8063af
        type: archive

  - name: python2-pycairo
    buildsystem: simple
    ensure-writable:
      - easy-install.pth
      - setuptools.pth
    build-commands:
      - python2 setup.py install --prefix="${FLATPAK_DEST}"
    sources:
    - url: https://files.pythonhosted.org/packages/a6/54/23d6cf3e8d8f1eb30e0e58f171b6f62b2ea75c024935492373639a1a08e4/pycairo-1.18.0.tar.gz
      sha256: abd42a4c9c2069febb4c38fe74bfc4b4a9d3a89fea3bc2e4ba7baff7a20f783f
      type: archive

  - name: PyGObject
    buildsystem: simple
    ensure-writable:
      - easy-install.pth
      - setuptools.pth
    build-commands:
      - python2 setup.py install --prefix="${FLATPAK_DEST}"
    sources:
    - url: https://files.pythonhosted.org/packages/0b/fd/56ac6898afc5c7f5718026103bd8f0b44714b6f79ac20d7eb8990c9a7eab/PyGObject-3.32.0.tar.gz
      sha256: a4d6f6d8e688d28e07119fc83aabc6e7aad02057f48b2194089959d03654f695
      type: archive

  - name: bookletimposer_wrapper
    buildsystem: simple
    build-commands:
      - install -m755 bookletimposerwrapper.sh /app/bin
    sources:
      - type: file
        path: bookletimposerwrapper.sh

  - name: bookletimposer
    buildsystem: simple
    build-commands:
      - python2 setup.py install --prefix="${FLATPAK_DEST}"
    sources:
      - type: archive
        url: https://git.codecoop.org/kjo/bookletimposer/-/archive/master/bookletimposer-master.tar.gz
        sha256: 6d0d15eed15b87f3ce9feabe2623bbffb869426ebfa0e3bd1fa777da59c1e0ad
      - type: patch
        path: disable-doc.patch
