---
app-id: com.github.louis77.tuner
runtime: io.elementary.Platform
runtime-version: '6.1'
sdk: io.elementary.Sdk
command: com.github.louis77.tuner
finish-args:
- "--share=ipc"
- "--socket=fallback-x11"
- "--socket=wayland"
- "--talk-name=org.gtk.vfs"
- "--talk-name=org.gtk.vfs.*"
- "--share=network"
- "--metadata=X-DConf=migrate-path=/com/github/louis77/tuner/"
- "--socket=pulseaudio"
- "--talk-name=org.freedesktop.Notifications"
- "--talk-name=org.gnome.SettingsDaemon.MediaKeys"
- "--own-name=org.mpris.MediaPlayer2.Tuner"
# Needed to read prefer-color-scheme with Granite.Settings
- '--system-talk-name=org.freedesktop.Accounts'
cleanup:
- "/include"
- "/lib/pkgconfig"
- "/share/pkgconfig"
- "/share/aclocal"
- "/man"
- "/share/man"
- "/share/gtk-doc"
- "/share/vala"
- "*.la"
- "*.a"
modules:
- name: taglib
  buildsystem: cmake-ninja
  config-opts:
  - "-DBUILD_SHARED_LIBS=ON"
  - "-DCMAKE_BUILD_TYPE=Release"
  sources:
  - type: archive
    url: https://github.com/taglib/taglib/releases/download/v1.12/taglib-1.12.tar.gz
    sha256: 7fccd07669a523b07a15bd24c8da1bbb92206cb19e9366c3692af3d79253b703
- name: libgeocode-glib0
  buildsystem: meson
  sources:
  - type: archive
    url: https://gitlab.gnome.org/GNOME/geocode-glib/-/archive/3.26.2/geocode-glib-3.26.2.tar.gz
    sha256: 589ed8cf890fb47619ad1062b7117d16104554078b837344496d603d0896ec20
- name: tuner
  buildsystem: meson
  config-opts:
  - "--buildtype=release"
  post-install:
  - install -Dm644 /app/share/icons/hicolor/64x64/apps/${FLATPAK_ID}.svg  -t /app/share/icons/hicolor/128x128/apps/
  sources:
  - type: dir
    path: .
