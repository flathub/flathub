<!DOCTYPE html>
<html>
<head>
<title>Action Required</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns%23' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' version='1.1' width='156.262' id='svg1609' height='144.407'%3E%3Ctitle id='title4599'%3EWarning sign%3C/title%3E%3Cmetadata id='metadata2'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3EWarning sign%3C/dc:title%3E%3Cdc:description /%3E%3Cdc:subject%3E%3Crdf:Bag%3E%3Crdf:li /%3E%3Crdf:li%3Ecaution%3C/rdf:li%3E%3Crdf:li%3Esecurity%3C/rdf:li%3E%3Crdf:li%3Ewarning%3C/rdf:li%3E%3Crdf:li%3Esigns_and_symbols%3C/rdf:li%3E%3Crdf:li%3Esign%3C/rdf:li%3E%3C/rdf:Bag%3E%3C/dc:subject%3E%3Cdc:publisher%3E%3Ccc:Agent rdf:about='http://www.openclipart.org'%3E%3Cdc:title%3EThomas Weller%3C/dc:title%3E%3C/cc:Agent%3E%3C/dc:publisher%3E%3Cdc:creator%3E%3Ccc:Agent%3E%3Cdc:title%3EThomas Weller%3C/dc:title%3E%3C/cc:Agent%3E%3C/dc:creator%3E%3Cdc:rights%3E%3Ccc:Agent%3E%3Cdc:title%3EThomas Weller%3C/dc:title%3E%3C/cc:Agent%3E%3C/dc:rights%3E%3Cdc:date /%3E%3Cdc:format%3Eimage/svg+xml%3C/dc:format%3E%3Cdc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage' /%3E%3Ccc:license rdf:resource='http://web.resource.org/cc/PublicDomain' /%3E%3Cdc:language%3Een%3C/dc:language%3E%3C/cc:Work%3E%3Ccc:License rdf:about='http://web.resource.org/cc/PublicDomain'%3E%3Ccc:permits rdf:resource='http://web.resource.org/cc/Reproduction' /%3E%3Ccc:permits rdf:resource='http://web.resource.org/cc/Distribution' /%3E%3Ccc:permits rdf:resource='http://web.resource.org/cc/DerivativeWorks' /%3E%3C/cc:License%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cdefs id='defs1610'%3E%3Cmarker viewBox='0 0 10 10' refY='5' refX='0' orient='auto' markerWidth='4' markerUnits='strokeWidth' markerHeight='3' id='ArrowEnd'%3E%3Cpath id='path1612' d='M 0 0 L 10 5 L 0 10 z' /%3E%3C/marker%3E%3Cmarker viewBox='0 0 10 10' refY='5' refX='10' orient='auto' markerWidth='4' markerUnits='strokeWidth' markerHeight='3' id='ArrowStart'%3E%3Cpath id='path1614' d='M 10 0 L 0 5 L 10 10 z' /%3E%3C/marker%3E%3C/defs%3E%3Cg transform='matrix(0.99073487,0,0,0.99073487,186.61494,2.4370252)' id='g4593'%3E%3Cpath id='path4595' d='m -109.16602,7.2265625 c -0.13666,0.0017 -0.27279,0.017412 -0.40625,0.046875 -3.19494,0.029452 -6.17603,1.6944891 -7.78515,4.4824215 l -31.25,54.126953 -31.25,54.126958 h 0.002 c -3.41988,5.92217 1.01692,13.60908 7.85547,13.60937 h 62.5 62.501953 c 6.838552,-3.2e-4 11.277321,-7.68721 7.857422,-13.60937 l -31.25,-54.126958 -31.251955,-54.126953 c -1.46518,-2.5386342 -4.07917,-4.1634136 -6.97851,-4.4492184 -0.14501,-0.042788 -0.2944,-0.068998 -0.44532,-0.078125 h -0.004 c -0.0312,-0.00138 -0.0625,-0.00203 -0.0937,-0.00195 z' style='color:%23000000;opacity:1;solid-color:%23000000;fill:%23000000;fill-opacity:1;stroke:none;' /%3E%3Cpath style='color:%23000000;opacity:1;solid-color:%23000000;fill:%23ffffff;fill-opacity:1;stroke:none;' d='m -109.16545,9.2265625 c -2.63992,-0.1247523 -5.13786,1.2403375 -6.45899,3.5292965 l -31.25,54.126953 -31.25,54.126958 c -2.67464,4.63164 0.77657,10.60914 6.125,10.60937 h 62.5 62.50196 c 5.34844,-2.5e-4 8.79965,-5.97774 6.125,-10.60937 l -31.25,-54.126958 -31.25196,-54.126953 c -1.20213,-2.082863 -3.38689,-3.4150037 -5.78906,-3.5292965 h -0.002 z' id='path4583' /%3E%3Cpath style='color:%23000000;opacity:1;solid-color:%23000000;fill:%23000000;fill-opacity:1;stroke:none;' d='m -109.25919,11.224609 c -1.89626,-0.08961 -3.68385,0.887082 -4.63282,2.53125 l -31.25,54.126953 -31.25,54.126958 c -1.95283,3.38168 0.48755,7.6092 4.39258,7.60937 h 62.5 62.50196 c 3.905026,-1.8e-4 6.345394,-4.2277 4.39257,-7.60937 l -31.25,-54.126958 -31.25195,-54.126953 c -0.86311,-1.495461 -2.42763,-2.44919 -4.15234,-2.53125 z' id='path4577' /%3E%3Cpath style='opacity:1;fill:%23ffcc00;fill-opacity:1;stroke:none;' id='path4573' d='m -46.997381,124.54655 -62.501079,0 -62.50108,0 31.25054,-54.127524 31.25054,-54.127522 31.25054,54.127521 z' /%3E%3Cg id='g858' transform='translate(-188.06236)'%3E%3Ccircle r='8.8173475' cy='111.11701' cx='78.564362' id='path846' style='opacity:1;fill:%23000000;fill-opacity:1;stroke:none;' /%3E%3Cpath id='circle848' d='m 78.564453,42.955078 c -4.869714,-5.59e-4 -8.817839,3.946692 -8.818359,8.816406 3.15625,37.460938 0,0 3.15625,37.460938 8.93e-4,3.126411 2.535698,5.660342 5.662109,5.660156 3.126411,1.86e-4 5.661216,-2.533745 5.662109,-5.660156 3.154297,-37.460938 0,0 3.154297,-37.460938 -5.2e-4,-4.868951 -3.947455,-8.815886 -8.816406,-8.816406 z' style='opacity:1;fill:%23000000;fill-opacity:1;stroke:none;' /%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>

body { 
  font-family: sans-serif; 
  font-size: 24px;
  margin: 1em auto;
  max-width: 40em;
}

p {
  font-size: 0.9em;
}

pre, code {
  font-size: 0.85em;
  background: #eee;
  padding: 3px;
}

@media (prefers-color-scheme: dark) {

  body { 
    background: #2b2b2b;
    color: #ddd;
  }
  
  pre, code { 
	background: #555;
  }

  ::selection { background: #7bb; }

}

</style>

</head>
<body>

<center><h1>Action Required</h1></center>

<p>
Your Flatpak version does not support the expose-pids flag,
which means that this Brave Flatpak will have to run in a
less performant / efficient method. This generally happens if
your distro's bubblewrap installation is setuid instead of
using user namespaces.
</p>

<p>
Not only is it a less performant / efficient method but it would
also mean that you'll have a broken experience with printing,
PDF viewing, saving passwords and some extensions. In many cases,
things won't work at all.
</p>

<p>
Therefore, it is important for you to enable user namespaces in
bubblewrap so that Flatpak could support the expose-pids flag.
</p>

<h2>Solution</h2>

<p>
In order to resolve this, you could run the following commands as root:
</p>

<pre><code>echo 'kernel.unprivileged_userns_clone=1' >> /etc/sysctl.conf
sysctl -p
bash -c 'chmod -s $(which bwrap)'</pre></code>

<p>
Afterwards, restart your computer to make sure that flatpak is
running properly with these changes.
</p>

<h3>Important Tip for Debian users</h3>

<p>With Debian and Debian-based systems, you could make sure that
bubblewrap always doesn't have the SUID bit set, even after an
upgrade of the bubblewrap package.</p>

<p>You would do this by using the <code>dpkg-statoverride</code>
tool. In order to use it, you'd have to run the following command
as root:</p>

<pre><code>bash -c 'dpkg-statoverride --add --update root root 0755 $(which bwrap)'</pre></code>

<p>This will make sure that bubblewrap always doesn't have the SUID bit set.</p>

</body>
</html>
