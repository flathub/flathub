id: menu.kando.Kando
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk
command: AppRun
finish-args:
  - --share=ipc
  - --device=dri
  - --socket=x11
  - --talk-name=org.freedesktop.Flatpak
  - --talk-name=org.gnome.Shell
  - --talk-name=org.kde.KWin
modules:
  - name: kando
    buildsystem: simple
    sources:
      - type: file
        dest-filename: kando.AppImage
        url: https://github.com/kando-menu/kando/releases/download/v1.6.0/Kando-1.6.0-x86_64.AppImage
        sha256: 4448419ab790e2623e590439b8b4202d14030e5ee1a4cd2add4286dff329e670
      - type: file
        dest-filename: menu.kando.Kando.svg
        url: https://raw.githubusercontent.com/kando-menu/kando/08f8777e19206f00ab203b844c056a0f7a296f98/tools/appstream/menu.kando.Kando.svg
        sha256: a31e870e267c78e80802648616ea18c0cdfe6a1297c91b6a7998d762326a0bb1
      - type: file
        dest-filename: menu.kando.Kando.desktop
        url: https://raw.githubusercontent.com/kando-menu/kando/08f8777e19206f00ab203b844c056a0f7a296f98/tools/appstream/menu.kando.Kando.desktop
        sha256: 5af8e9792006b2ada2eacb4b3ab328b333a64c83e5434a0c70ea8f8b3b9b8829
      - type: file
        dest-filename: menu.kando.Kando.metainfo.xml
        url: https://raw.githubusercontent.com/kando-menu/kando/9cba1e85986e577e7a90a7765a638ecc0703276f/appstream/menu.kando.Kando.metainfo.xml
        sha256: 640571f8ff82cfa0b45a58a4bdb856362e43d96f9fd2c7153510222ab467c0bc
    build-commands:
      - chmod +x kando.AppImage
      - ./kando.AppImage --appimage-extract
      - mkdir /app/bin
      - cp -r squashfs-root/* /app/bin
      - install -Dm644 menu.kando.Kando.svg /app/share/icons/hicolor/scalable/apps/menu.kando.Kando.svg
      - install -Dm644 menu.kando.Kando.desktop /app/share/applications/menu.kando.Kando.desktop
      - install -Dm644 menu.kando.Kando.metainfo.xml /app/share/metainfo/menu.kando.Kando.metainfo.xml
