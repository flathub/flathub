id: org.flatpak.chessmd
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: start.sh

finish-args: 
  - --share=ipc
  - --share=network
  - --socket=x11
  - --filesystem=host
  - --device=dri
  
modules: 
  - name: chessmd
    buildsystem: simple
    
    sources:
      - type: file
        path: app/ChessMD
      - type: file
        path: app/start.sh
      - type: file
        path: app/org.flatpak.chessmd.png
      - type: file
        path: app/org.flatpak.chessmd.desktop
      - type: file
        path: app/engine/stockfish17.1-popcnt
      - type: file
        path: app/opening/openings.bin
      - type: file
        path: app/opening/openings.headers
      - type: file
        path: app/lib/libjpeg.so.8
      - type: file
        path: app/lib/libtiff.so.5
      - type: file
        path: app/lib/libicui18n.so.70
      - type: file
        path: app/lib/libicuuc.so.70
      - type: file
        path: app/lib/libjbig.so.0
      - type: file
        path: app/lib/libdeflate.so.0
      - type: file
        path: app/lib/libicudata.so.70
 
    build-commands:
      - mkdir -p /app/bin
      - install -Dm755 ChessMD /app/bin/ChessMD
      - install -Dm755 start.sh /app/bin/start.sh
      - install -D org.flatpak.chessmd.png /app/share/icons/hicolor/scalable/apps/org.flatpak.chessmd.png
      - install -D org.flatpak.chessmd.desktop /app/share/applications/org.flatpak.chessmd.desktop
      - mkdir -p /app/opening
      - install -D openings.bin /app/opening/openings.bin
      - install -D openings.headers /app/opening/openings.headers
      - mkdir -p /app/engine
      - install -D stockfish17.1-popcnt /app/engine/stockfish17.1-popcnt
      - mkdir -p /app/lib
      - install -D libjpeg.so.8 /app/lib/libjpeg.so.8
      - install -D libtiff.so.5 /app/lib/libtiff.so.5
      - install -D libicui18n.so.70 /app/lib/libicui18n.so.70
      - install -D libicuuc.so.70 /app/lib/libicuuc.so.70
      - install -D libjbig.so.0 /app/lib/libjbig.so.0
      - install -D libdeflate.so.0 /app/lib/libdeflate.so.0
      - install -D libicudata.so.70 /app/lib/libicudata.so.70

 




