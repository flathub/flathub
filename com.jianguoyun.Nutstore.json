{
	"app-id": "com.jianguoyun.Nutstore",
	"runtime": "org.freedesktop.Platform",
	"runtime-version": "19.08",
	"sdk": "org.freedesktop.Sdk",
	"command": "nutstore",
	"finish-args": [
		"--share=ipc",
		"--socket=x11",
		"--share=network",
		"--filesystem=home"
	],

	"modules": [
		{
			"name": "nutstore",
			"only-arches": ["x86_64"],
			"buildsystem": "simple",
			"build-commands": [
				"install -D -t /app/bin -m 755 nutstore",
				"install -D -t /app/bin -m 755 apply_extra",
				"install -D -t /app/share/applications -m 644 com.jianguoyun.Nutstore.desktop",
				"install -D -m 644 com.jianguoyun.Nutstore.64x64.png /app/share/icons/hicolor/64x64/apps/com.jianguoyun.Nutstore.png",
				"install -D -m 644 com.jianguoyun.Nutstore.128x128.png /app/share/icons/hicolor/128x128/apps/com.jianguoyun.Nutstore.png",
				"install -D -t /app/share/metainfo -m 644 com.jianguoyun.Nutstore.metainfo.xml"
			],
			"sources": [
				{
					"type": "extra-data",
					"url": "https://www.jianguoyun.com/static/exe/installer/nutstore_linux_dist_x64.tar.gz",
					"sha256": "a8f0f82d09331e953c03b602a30b9fd5ee8a489605d5ade17b335555c66154f1",
					"filename": "nutstore_linux_dist_x64.tar.gz",
					"size": 38249090,
					"x-checker-data": {
						"type": "rotating-url",
						"url": "https://www.jianguoyun.com/static/exe/installer/nutstore_linux_dist_x64.tar.gz"
					}
				},
				{
					"type": "script",
					"dest-filename": "nutstore",
					"commands": [
						"python3 /app/extra/bin/nutstore-pydaemon.py"
					]
				},
				{
					"type": "script",
					"dest-filename": "apply_extra",
					"commands": [
						"tar -xf nutstore_linux_dist_x64.tar.gz",
						"rm -f nutstore_linux_dist_x64.tar.gz"
					]
				},
				{
					"type": "file",
					"path": "com.jianguoyun.Nutstore.64x64.png"
				},
				{
					"type": "file",
					"path": "com.jianguoyun.Nutstore.128x128.png"
				},
				{
					"type": "file",
					"path": "com.jianguoyun.Nutstore.desktop"
				},
				{
					"type": "file",
					"path": "com.jianguoyun.Nutstore.metainfo.xml"
				}
			]
		}
	]
}
