app-id: eu.annaaurora.find_billy.Find_Billy
runtime: org.freedesktop.Platform
runtime-version: '24.08'
base: org.godotengine.godot.BaseApp
base-version: '4.3-24.08'
sdk: org.freedesktop.Sdk
command: godot-runner
rename-icon: find-billy
finish-args:
  - "--share=ipc"
  - "--socket=x11"
  - "--socket=pulseaudio"
  - "--device=dri"
modules:
  - name: Find-Billy
    buildsystem: simple
    build-commands:
      - install -Dm644 godot-runner.pck -t ${FLATPAK_DEST}/bin/
      - install -D LICENSE.md ${FLATPAK_DEST}/bin/LICENSE.md
      - cp -R icons/usr/share ${FLATPAK_DEST}/
      - rm ${FLATPAK_DEST}/share/icons/hicolor/*/apps/*.ico
      - rm ${FLATPAK_DEST}/share/icons/hicolor/*/apps/*.icns
      - install -D find-billy.desktop ${FLATPAK_DEST}/share/applications/eu.annaaurora.find_billy.Find_Billy.desktop
      - install -D eu.annaaurora.find_billy.Find_Billy.appdata.xml ${FLATPAK_DEST}/share/metainfo/eu.annaaurora.find_billy.Find_Billy.appdata.xml
    sources:
      - type: archive
        url: https://codeberg.org/annaaurora/Find-Billy/archive/v1.1.0.tar.gz
        sha256: ac3b99dc6563826ceb47fce5848c23d17298f3ed30db6145241aa4f35b18d95b
      - type: file
        url: https://codeberg.org/annaaurora/Find-Billy/releases/download/v1.1.0/godot-runner.pck
        sha256: 986366ca65a0ed591186cffc406f54c80f7a7e5b2500ff98e524c6a304ee69be
      - type: archive
        url: https://codeberg.org/annaaurora/Find-Billy/releases/download/v1.1.0/icons.tar.gz
        sha256: 3b6dfcd6d037c78c5170290ecb60ee8757631e359cc728d1ae1dd21c3434faf5
        dest: icons
    post-install:
      - desktop-file-edit --set-key="Exec" --set-value="godot-runner" ${FLATPAK_DEST}/share/applications/eu.annaaurora.find_billy.Find_Billy.desktop
