id: org.codeblocks.codeblocks.Plugin.devtools
runtime: org.codeblocks.codeblocks
runtime-version: stable
sdk: org.freedesktop.Sdk//24.08
build-extension: true
separate-locales: false
build-options:
  prefix: "/app/plugins/devtools"
  prepend-path: "/app/plugins/devtools/bin"
  append-ld-library-path: "/app/plugins/devtools/lib:/app/plugins/devtools/lib64"
  append-pkg-config-path: "/app/plugins/devtools/lib/pkgconfig:/app/plugins/devtools/lib64/pkgconfig"
  ldflags: "-L/app/plugins/devtools/lib -L/app/plugins/devtools/lib64"
  env:
    C_INCLUDE_PATH: "/app/plugins/devtools/include"
    CPLUS_INCLUDE_PATH: "/app/plugins/devtools/include"
    
modules:

  - name: sfml2
    buildsystem: cmake-ninja
    config-opts:
      - -DBUILD_SHARED_LIBS=ON
    builddir: true
    post-install:
      - mkdir /app/plugins/devtools/include/SFML2
      - mv /app/plugins/devtools/include/SFML /app/plugins/devtools/include/SFML2/
      - mkdir -p /app/plugins/devtools/lib/SFML2
      - mv /app/plugins/devtools/lib64/* /app/plugins/devtools/lib/SFML2/
    sources:
      - type: archive
        url: https://www.sfml-dev.org/files/SFML-2.6.2-sources.zip
        sha256: 19d6dbd9c901c74441d9888c13cb1399f614fe8993d59062a72cfbceb00fed04

  - name: glu #fltk
    buildsystem: meson
    builddir: true
    sources:
      - type: archive
        url: https://archive.mesa3d.org/glu/glu-9.0.3.tar.xz
        sha256: bd43fe12f374b1192eb15fe20e45ff456b9bc26ab57f0eee919f96ca0f8a330f

  - name: glfw
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DBUILD_SHARED_LIBS=ON
      - -DGLFW_BUILD_EXAMPLES=OFF
      - -DGLFW_BUILD_TESTS=OFF
      - -DGLFW_BUILD_DOCS=OFF
      - -DWITH_PIC=ON
    sources:
      - type: archive
        url: https://github.com/glfw/glfw/releases/download/3.3.8/glfw-3.3.8.zip
        sha256: 4d025083cc4a3dd1f91ab9b9ba4f5807193823e565a5bcf4be202669d9911ea6

  - name: fltk
    buildsystem: cmake-ninja
    config-opts:
      - -DFLTK_BUILD_SHARED_LIBS=ON
    sources:
      - type: archive
        url: https://github.com/fltk/fltk/releases/download/release-1.4.1/fltk-1.4.1-source.tar.gz
        sha256: 7d0a5a352fde0beae44a2009c1aca1d6be15d46dd251d1c12cf34d752b429038
      - type: shell
        commands:
          - cp /app/plugins/devtools/lib64/libGLU.so /app/plugins/devtools/lib/

  - name: raylib
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DBUILD_EXAMPLES=OFF
      - -DUSE_EXTERNAL_GLFW=OFF
      - -DCMAKE_BUILD_TYPE=Release
      - -DBUILD_EXAMPLES=OFF
      - -DBUILD_SHARED_LIBS=ON
      - -DPLATFORM=Desktop
    sources:
      - type: archive
        url: https://github.com/raysan5/raylib/archive/refs/tags/5.5.tar.gz
        sha256: aea98ecf5bc5c5e0b789a76de0083a21a70457050ea4cc2aec7566935f5e258e

  - name: wxwidgets
    buildsystem: autotools
    builddir: true
    config-opts:
      - --with-gtk=3
      - --disable-webview
    sources:
      - type: git
        url: https://github.com/wxWidgets/wxWidgets.git
        commit: 5ff25322553c1870cf20a2e1ba6f20ed50d9fe9a
        tag: v3.2.6

  - name: sfml3
    buildsystem: cmake-ninja
    config-opts:
      - -DBUILD_SHARED_LIBS=ON
    builddir: true
    sources:
      - type: archive
        url: https://github.com/SFML/SFML/releases/download/3.0.0/SFML-3.0.0-sources.zip
        sha256: 8cc41db46b59f07c44ecf21c74a0f956d37735dec9d90ff4522856cb162ba642
        
