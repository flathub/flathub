app-id: page.codeberg.outfly.outfly
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: outfly

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --socket=pulseaudio
  - --device=dri

modules:
  - name: outfly
    buildsystem: simple
    build-commands:
      - install -Dm755 outfly /app/bin/outfly
      - install -Dm644 logo.png /app/share/icons/hicolor/256x256/apps/page.codeberg.outfly.outfly.png
      - install -Dm644 outfly.desktop /app/share/applications/page.codeberg.outfly.outfly.desktop
      - install -Dm644 metainfo.xml /app/share/metainfo/page.codeberg.outfly.outfly.metainfo.xml
      - desktop-file-edit --set-icon="page.codeberg.outfly.outfly /app/share/applications/page.codeberg.outfly.outfly.desktop
    sources:
      - type: archive
        url: https://codeberg.org/outfly/outfly/releases/download/v0.14.0/outfly_v0.14.0_linux.zip
        sha256: fc5868681cea8ac5bb0e262549cabbc7525febce86a839ca6a03d3424360e247
      - type: file
        url: https://codeberg.org/outfly/outfly/raw/commit/bb51686274362ed16583ed79a64558dea15425e4/build/linux/outfly.desktop
        sha256: 428a4baedd8453d73d31130b04e8ab52102f1cee2fba3d7aeb925ac11ee2f61c
      - type: file
        url: https://codeberg.org/outfly/outfly/raw/commit/bb51686274362ed16583ed79a64558dea15425e4/doc/branding/logo.png
        sha256: d0c44f280606077b3156b7509aabf6004fe916e28484c94d13a6007dfdada04b
      - type: file
        url: https://codeberg.org/outfly/outfly/raw/commit/bb51686274362ed16583ed79a64558dea15425e4/build/flatpak/metainfo.xml
        sha256: edd7e2e10a1c6c7ea2f58be8374fb9cf7ed0c5f19709ad542cc14bcffd1153fb
