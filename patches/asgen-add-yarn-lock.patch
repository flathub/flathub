From dcf8a21d15c499681c33cd6a96a81ac2a97f80c4 Mon Sep 17 00:00:00 2001
From: Matthias Klumpp <matthias@tenstral.net>
Date: Sun, 7 May 2023 00:06:58 +0200
Subject: [PATCH] Include Yarn lockfile

This is needed to make the Flatpak build work.
---
 contrib/setup/.gitignore  |  1 -
 contrib/setup/build_js.sh |  2 +-
 contrib/setup/yarn.lock   | 18 ++++++++++++++++++
 3 files changed, 19 insertions(+), 2 deletions(-)
 create mode 100644 contrib/setup/yarn.lock

diff --git a/contrib/setup/.gitignore b/contrib/setup/.gitignore
index 23d67fc1..c2658d7d 100644
--- a/contrib/setup/.gitignore
+++ b/contrib/setup/.gitignore
@@ -1,2 +1 @@
 node_modules/
-yarn.lock
diff --git a/contrib/setup/build_js.sh b/contrib/setup/build_js.sh
index 2fb24ca4..7ccaf099 100755
--- a/contrib/setup/build_js.sh
+++ b/contrib/setup/build_js.sh
@@ -11,7 +11,7 @@ then
     YARNPKG=$1
 fi
 
-$YARNPKG install --no-bin-links --prod --no-lockfile --non-interactive
+$YARNPKG install $ASGEN_YARN_EXTRA_ARGS --no-bin-links --prod --non-interactive
 
 JS_TARGET=../../data/templates/default/static/js
 [ ! -d "$JS_TARGET" ] && mkdir $JS_TARGET
diff --git a/contrib/setup/yarn.lock b/contrib/setup/yarn.lock
new file mode 100644
index 00000000..cb50104b
--- /dev/null
+++ b/contrib/setup/yarn.lock
@@ -0,0 +1,18 @@
+# THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
+# yarn lockfile v1
+
+
+highlightjs@^9.10.0:
+  version "9.16.2"
+  resolved "https://registry.yarnpkg.com/highlightjs/-/highlightjs-9.16.2.tgz#07ea6cc7c93340fc440734fb7abf28558f1f0fe1"
+  integrity sha512-FK1vmMj8BbEipEy8DLIvp71t5UsC7n2D6En/UfM/91PCwmOpj6f2iu0Y0coRC62KSRHHC+dquM2xMULV/X7NFg==
+
+jquery-flot@^0.8.3:
+  version "0.8.3"
+  resolved "https://registry.yarnpkg.com/jquery-flot/-/jquery-flot-0.8.3.tgz#a273acf43f13190f6e78701869ee24bfef12c22a"
+  integrity sha512-IkQCsA5t55Aubu8iove/X/KL34rdZTsDyx/bylC7F320N2bwsJhJe3Np8orsx1L8FEOoMDfNe3/pSb3xXKLxeQ==
+
+jquery@^3.3.1:
+  version "3.6.4"
+  resolved "https://registry.yarnpkg.com/jquery/-/jquery-3.6.4.tgz#ba065c188142100be4833699852bf7c24dc0252f"
+  integrity sha512-v28EW9DWDFpzcD9O5iyJXg3R3+q+mET5JhnjJzQUZMHOv67bpSIHq81GEYpPNZHG+XXHsfSme3nxp/hndKEcsQ==
