From 139f3a4abd772b17142a7f61ef9b442200728f4a Mon Sep 17 00:00:00 2001
From: d2weber <d2weber@noreply.codeberg.org>
Date: Wed, 5 Nov 2025 20:41:46 +0100
Subject: [PATCH] Install icon also on non-debian (#107)

Reviewed-on: https://codeberg.org/lk108/deltatouch/pulls/107
Co-authored-by: d2weber <d2weber@noreply.codeberg.org>
Co-committed-by: d2weber <d2weber@noreply.codeberg.org>
---
 CMakeLists.txt | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 2b9b0b9..abf9f44 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -24,6 +24,7 @@ find_library(LIB_QUIRC quirc)
 set(FULL_PROJECT_NAME "deltatouch.lotharketterer")
 set(DESKTOP_FILE_NAME ${CMAKE_PROJECT_NAME}.desktop)
 set(DESKTOP_DIR ${CMAKE_INSTALL_DATADIR}/applications)
+set(ICON_DESTINATION ${CMAKE_INSTALL_DATADIR}/icons/hicolor/scalable/apps)
 
 if(EXISTS "/etc/debian_version")
     execute_process(
@@ -35,12 +36,10 @@ if(EXISTS "/etc/debian_version")
     if(CLICK_MODE)
         set(CMAKE_INSTALL_BINDIR lib/${ARCH_TRIPLET}/bin)
         set(DESKTOP_DIR ".")
+        set(ICON_DESTINATION ".")
         add_subdirectory(package/click)
-        install(FILES assets/deltatouch.svg DESTINATION ".")
-    else(CLICK_MODE)
-        install(FILES assets/deltatouch.svg DESTINATION ${CMAKE_INSTALL_DATADIR}/icons/hicolor/scalable/apps)
-    endif(CLICK_MODE)
-endif(EXISTS "/etc/debian_version")
+    endif()
+endif()
 
 set(QT_IMPORTS_DIR "${CMAKE_INSTALL_LIBDIR}/qt5/plugins")
 
@@ -74,6 +73,7 @@ add_custom_target(${DESKTOP_FILE_NAME} ALL
 )
 
 install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${DESKTOP_FILE_NAME} DESTINATION ${DESKTOP_DIR})
+install(FILES assets/deltatouch.svg DESTINATION "${ICON_DESTINATION}")
 
 add_subdirectory(po)
 add_subdirectory(src)
