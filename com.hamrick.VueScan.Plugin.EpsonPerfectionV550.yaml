id: com.hamrick.VueScan.Plugin.EpsonPerfectionV550
branch: 1-25.08
runtime: com.hamrick.VueScan
runtime-version: stable
sdk: org.freedesktop.Sdk//25.08
build-extension: true
separate-locales: false
build-options:
  prefix: ${FLATPAK_DEST}
modules:
  - name: iscan-plugin-perfection-v550
    buildsystem: simple
    build-commands: 
      - install -D apply_extra "${FLATPAK_DEST}/bin/apply_extra"
    post-install:
      - install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo com.hamrick.VueScan.Plugin.EpsonPerfectionV550.metainfo.xml
    sources: 
      - type: extra-data
        only-arches: [x86_64]
        url: https://download2.ebz.epson.net/iscan/plugin/perfection-v550/rpm/x64/iscan-perfection-v550-bundle-2.30.4.x64.rpm.tar.gz
        sha256: f8b3abf21354fc5b9bc87753cef950b6c0f07bf322a94aaff2c163bafcf50cd9
        size: 642849
        filename: iscan-perfection-v550-bundle-2.30.4.x64.rpm.tar.gz
      - type: script
        dest-filename: apply_extra
        commands:
          - tar -xzf iscan-perfection-v550-bundle-2.30.4.x64.rpm.tar.gz
          - bsdtar -xf iscan-perfection-v550-bundle-2.30.4.x64.rpm/plugins/iscan-plugin-perfection-v550-1.0.1-1.x86_64.rpm
          - install -d lib/iscan
          - install -d export/share
          - install -Dm644 -t lib/iscan usr/lib64/iscan/libiscan-plugin-perfection-v550.so.0.0.0
          - ln -s libiscan-plugin-perfection-v550.so.0.0.0 lib/iscan/libiscan-plugin-perfection-v550.so.0
          - ln -s libiscan-plugin-perfection-v550.so.0 lib/iscan/libiscan-plugin-perfection-v550.so
          - mv usr/share/{doc,iscan,iscan-data} export/share/
          - rm -r iscan-perfection-v550-bundle-2.30.4.x64.rpm.tar.gz iscan-perfection-v550-bundle-2.30.4.x64.rpm usr
      - type: file
        path: com.hamrick.VueScan.Plugin.EpsonPerfectionV550.metainfo.xml