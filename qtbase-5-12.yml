name: qtquickcontrols
buildsystem: qmake
cleanup:
  - /bin
sources:
  - type: archive
    url: http://qt.mirror.constant.com/archive/qt/5.12/5.12.12/submodules/qtquickcontrols-everywhere-src-5.12.12.tar.xz
    sha256: 63b9666522aea7262eca154968b1717c65ecaa8f2602fbefe901a33d90ed438d
name: qtdeclarative
buildsystem: qmake
cleanup:
  - /bin
  - /lib/plugins/qmltooling
sources:
  - type: archive
    url: http://download.qt.io/archive/qt/5.12/5.12.12/submodules/qtdeclarative-everywhere-src-5.12.12.tar.xz
    sha256: a63c0ae198abc65dcb7c84e8fb8891df7ef56f72347d7382a4d08c5a8a364790
  - type: patch
    paths:
      - patches/qt/declarative/Additional-GCC11-Fixes.patch
      - patches/qt/declarative/0121-Fix-compilation-of-QtDeclarative-with-GCC11.patch
name: qtx11extras
buildsystem: qmake
cleanup:
  - /bin
sources:
  - type: archive
    url: http://download.qt.io/archive/qt/5.12/5.12.12/submodules/qtx11extras-everywhere-src-5.12.12.tar.xz
    sha256: d3a46415ecd91d61c532cb7d7dd1800545add61966fc22e15487db77927be875
name: qttools
buildsystem: qmake
cleanup:
  - /bin
  - /phrasebooks
sources:
  - type: archive
    url: http://download.qt.io/archive/qt/5.12/5.12.12/submodules/qttools-everywhere-src-5.12.12.tar.xz
    sha256: 33897d94f4d8f5c5b88f78d61759f774e0d12c1aec3fc001b2a418eea77f4263
name: qt3d
buildsystem: qmake
cleanup:
  - /bin
sources:
  - type: archive
    url: https://download.qt.io/archive/qt/5.12/5.12.12/submodules/qt3d-everywhere-src-5.12.12.tar.xz
    sha256: 10e933c87a4a35f82d94175b9aca3b4de542185cbc10df5579302bfdef360b49
name: qtbase-5-12
buildsystem: autotools
build-options:
  arch:
    x86_64:
      config-opts:
        - -reduce-relocations
        - -force-debug-info
    aarch64:
      config-opts:
        - -no-reduce-relocations
        - -optimize-size
        - -opengl desktop
config-opts:
  - -opengl
  - -gui
  - -confirm-license
  - -opensource
  - -shared
  - -platform
  - linux-g++
  - -optimized-qmake
  - -nomake
  - examples
  - -nomake
  - tests
  - -system-harfbuzz
  - -qt-sqlite
  - -accessibility
  - -dbus-linked
  - -fontconfig
  - -glib
  - -icu
  - -openssl-linked
  - -no-pch
  - -no-rpath
  - -no-directfb
  - -no-linuxfb
  - -no-kms
  - -system-proxies
  - -gtk
  - -no-use-gold-linker
  - -archdatadir
  - /app/lib
cleanup:
  - /bin
sources:
  - type: archive
    url: http://download.qt.io/archive/qt/5.12/5.12.12/submodules/qtbase-everywhere-src-5.12.12.tar.xz
    sha256: 7c15c31590b6ec12408242b1a32075d1d545f35e1d41fdbad31ec670d00680f2
  - type: patch
    paths:
      - patches/qt/base/FileChooser-portal-skip-empty-filters.patch
      - patches/qt/base/qtbase-avoid-hardcoding-kernel-version.patch
      - patches/qt/base/qtbase-use-wayland-on-gnome.patch
      - patches/qt/base/qtbase-make-sure-to-correctly-construct-base-platform-theme.patch
      - patches/qt/base/open-file-portal-writable.patch
      - patches/qt/base/0012-Synthesize-Enter-LeaveEvent-for-accepted-QTabletEven.patch
      - patches/qt/base/0013-Poison-Qt-s-headers-with-a-mark-about-presence-of-En.patch
      - patches/qt/base/0081-Fix-no-warning-for-overwriting-files-in-non-native-d.patch
      - patches/qt/base/0082-Make-jp-e-g-default-extensions-context-aware.patch
      - patches/qt/base/0100-Fix-artifacts-when-rendering-multisubpath-dashed-QPa.patch
      - patches/qt/base/0101-Don-t-eat-ShortcutOverride-events-when-there-is-a-pa.patch
      - patches/qt/base/0110-Pass-proper-dirty-rect-in-paint-event-to-QOpenGLWidg.patch
      - patches/qt/base/0111-Fix-unbalanced-KeyPress-Release-events-in-children-o.patch
      - patches/qt/base/0112-Fix-shortcuts-assigned-to-special-keys-on-non-latin-.patch
      - patches/qt/base/0113-Fix-multiple-shortcuts-match-from-different-keyboard.patch
      - patches/qt/base/0114-Fix-shortcuts-with-special-keys-on-non-US-layouts-on.patch
      - patches/qt/base/0001-Check-if-we-reached-the-end-of-Iterator.patch
      - patches/qt/base/0116-Make-Qt-relocatable.patch
      - patches/qt/base/0119-Fix-relocated-Qt-to-be-found-when-its-path-has-non-A.patch
      - patches/qt/base/0120-Fix-building-QtBase-with-GCC11.patch
      - patches/qt/base/0001-Do-not-crash-if-the-foundry-name-is-an-empty-space.patch
      - patches/qt/base/frac_dpi_paint_artifacts/0001-Add-faster-path-for-scaling-QRegion-with-multiple-re.patch
      - patches/qt/base/frac_dpi_paint_artifacts/0002-Fix-QPainter-off-by-one-clipping-for-some-non-intege.patch
      - patches/qt/base/frac_dpi_paint_artifacts/0003-Fix-under-non-integer-scaling-incorrect-update-area.patch
  - type: shell
    commands:
      - mv configure configure.qt
  - type: script
    commands:
      - processed=`sed -e 's/--/-/g ; s/=/ /g' <<< $@`
      - ./configure.qt $processed
    dest-filename: configure
