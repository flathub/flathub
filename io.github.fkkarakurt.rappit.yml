app-id: io.github.fkkarakurt.rappit
runtime: org.gnome.Platform
runtime-version: "49"
sdk: org.gnome.Sdk
command: rappit
finish-args:
  - --share=network
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri

modules:
  - name: python3-requests
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}"
        --prefix=${FLATPAK_DEST} "requests" --no-build-isolation
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/e4/37/af0d2ef3967ac0d6113837b44a4f0bfe1328c2b9763bd5b1744520e5cfed/certifi-2025.10.5-py3-none-any.whl
        sha256: 0f212c2744a9bb6de0c56639a6f68afe01ecd92d91f14ae897c4fe7bbeeef0de
      - type: file
        url: https://files.pythonhosted.org/packages/13/69/33ddede1939fdd074bce5434295f38fae7136463422fe4fd3e0e89b98062/charset_normalizer-3.4.4.tar.gz
        sha256: 94537985111c35f28720e43603b8e7b43a6ecfb2ce1d3058bbe955b73404e21a
      - type: file
        url: https://files.pythonhosted.org/packages/0e/61/66938bbb5fc52dbdf84594873d5b51fb1f7c7794e9c0f5bd885f30bc507b/idna-3.11-py3-none-any.whl
        sha256: 771a87f49d9defaf64091e6e6fe9c18d4833f140bd19464795bc32d966ca37ea
      - type: file
        url: https://files.pythonhosted.org/packages/1e/db/4254e3eabe8020b458f1a747140d32277ec7a271daf1d235b70dc0b4e6e3/requests-2.32.5-py3-none-any.whl
        sha256: 2462f94637a34fd532264295e186976db0f5d453d1cdd31473c85a6a161affb6
      - type: file
        url: https://files.pythonhosted.org/packages/a7/c2/fe1e52489ae3122415c51f387e221dd0773709bad6c6cdaa599e8a2c5185/urllib3-2.5.0-py3-none-any.whl
        sha256: e6b01673c0fa6a13e374b50871808eb3bf7046c4b125b216f6bf1cc604cff0dc

  - name: rappit
    buildsystem: simple
    build-commands:
      - find . -name "*.py" -exec python3 -m py_compile {} \; || true
      - install -Dm755 run.py /app/bin/rappit
      - cp -r src /app/bin/
      - install -Dm644 src/data/io.github.fkkarakurt.rappit.desktop /app/share/applications/io.github.fkkarakurt.rappit.desktop
      - install -Dm644 src/data/io.github.fkkarakurt.rappit.metainfo.xml /app/share/metainfo/io.github.fkkarakurt.rappit.metainfo.xml
      - install -Dm644 src/data/icons/hicolor/scalable/apps/io.github.fkkarakurt.rappit.svg /app/share/icons/hicolor/scalable/apps/io.github.fkkarakurt.rappit.svg
      - install -Dm644 src/data/icons/hicolor/symbolic/apps/io.github.fkkarakurt.rappit-symbolic.svg /app/share/icons/hicolor/symbolic/apps/io.github.fkkarakurt.rappit-symbolic.svg
      - mkdir -p /app/share/rappit/gtk
      - install -Dm644 src/data/gtk/help-overlay.ui /app/share/rappit/gtk/help-overlay.ui
      - install -Dm644 src/data/io.github.fkkarakurt.rappit.gschema.xml /app/share/glib-2.0/schemas/io.github.fkkarakurt.rappit.gschema.xml
      - glib-compile-schemas /app/share/glib-2.0/schemas
    sources:
      - type: archive
        url: https://github.com/fkkarakurt/rappit/archive/refs/tags/v1.0.tar.gz
        sha256: b1a68afd107766ae78f9f664e604820995419d8cc92143efab16bb1d3f9752c4
