name: misc-libs
buildsystem: simple
build-commands: []
x-compat32-module: .compat32-module.yml
modules:

  - name: libbsd
    sources: &libbsd_sources
      - type: archive
        url: "https://libbsd.freedesktop.org/releases/libbsd-0.10.0.tar.xz"
        sha256: 34b8adc726883d0e85b3118fa13605e179a62b31ba51f676136ecb2d0bc1a887

  - name: sndio11
    config-opts: &sndio_config_opts
      - --with-libbsd
    cleanup: &sndio_cleanup
      - /bin
    sources: &sndio11_sources
      - type: archive
        url: "http://archive.ubuntu.com/ubuntu/pool/universe/s/sndio/sndio_1.1.0.orig.tar.gz"
        sha256: fcd7f845ff70f38c2898d737450b8aa3e1bb0afb9d147e8429ef22c0b2c2db57
      - type: shell
        commands:
          - |
            for i in libsndio aucat midicat; do
              sed 's/cp /cp -f /g' -i $i/Makefile.in
            done

  - name: google-perfools
    buildsystem: autotools
    build-options:
      cflags: -fpermissive -Wno-error=narrowing
      cxxflags: -fpermissive -Wno-error=narrowing
    sources:
      - type: git
        url: https://github.com/gperftools/gperftools.git
        commit: 9608fa3bcf8020d35f59fbf70cd3cbe4b015b972
        tag: gperftools-2.7

  - name: gamemode
    buildsystem: meson
    config-opts:
      - -Dwith-systemd=false
      - -Dwith-daemon=false
      - -Dwith-examples=false
    sources:
      - type: git
        url: "https://github.com/FeralInteractive/gamemode"
        tag: "1.5.1"

  - name: rapidjson
    x-multilib: false
    buildsystem: cmake-ninja
    config-opts:
      - -DRAPIDJSON_BUILD_DOC=OFF
      - -DRAPIDJSON_BUILD_EXAMPLES=OFF
      - -DRAPIDJSON_BUILD_TESTS=OFF
      - -DRAPIDJSON_BUILD_THIRDPARTY_GTEST=OFF
    sources:
      - type: archive
        url: https://github.com/miloyip/rapidjson/archive/v1.1.0.tar.gz
        sha256: bf7ced29704a1e696fbccf2a2b4ea068e7774fa37f6d7dd4039d0787f8bed98e

  - name: discord-rpc
    buildsystem: cmake-ninja
    config-opts:
      - -DBUILD_SHARED_LIBS=ON
    post-install:
      - install -Dm755 examples/send-presence/send-presence -t /app/bin/
    sources:
      - type: archive
        url: "https://github.com/discordapp/discord-rpc/archive/v3.4.0.tar.gz"
        sha256: e13427019027acd187352dacba6c65953af66fdf3c35fcf38fc40b454a9d7855
