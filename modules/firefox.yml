name: firefox
sources:
  - type: archive
    url: https://download-installer.cdn.mozilla.net/pub/firefox/releases/139.0.1/linux-x86_64/en-US/firefox-139.0.1.tar.xz
    sha256: f1a264f61d41700e8fcfa2310478d0c909655399a413072664fddaf612b53c07
    strip-components: 0
    only-arches:
      - x86_64
  - type: archive
    url: https://download-installer.cdn.mozilla.net/pub/firefox/releases/139.0.1/linux-aarch64/en-US/firefox-139.0.1.tar.xz
    sha256: 6a4c428377e8c85eb46ddbde007b39a6d37d221747a2229047120962c82f37de
    strip-components: 0
    only-arches:
      - aarch64
  - type: script
    dest-filename: launcher.sh
    commands:
      - #!/bin/bash
      - export TMPDIR=$XDG_CACHE_HOME/tmp
      - exec /app/lib/firefox/firefox --name $FLATPAK_ID "$@"
buildsystem: simple
build-commands:
  - mkdir -p /app/lib
  - mv firefox /app/lib/firefox
  - install -d /app/lib/ffmpeg
  - install -D -m755 launcher.sh /app/bin/launcher.sh

