{
    "app-id": "org.mozilla.Firefox",
    "runtime": "org.gnome.Platform",
    "runtime-version": "3.26",
    "sdk": "org.gnome.Sdk",
    "command": "/app/firefox.sh",
    "finish-args": [
        "--device=dri",
        "--filesystem=xdg-download", "--persist=.mozilla",
        "--filesystem=xdg-run/dconf", "--filesystem=~/.config/dconf:ro",
        "--share=ipc",
        "--share=network",
        "--socket=pulseaudio",
        "--socket=wayland",
        "--socket=x11",
        "--talk-name=ca.desrt.dconf", "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
    ],
    "modules": [
      {
          "name": "firefox",
          "buildsystem": "simple",
          "no-autogen": true,
          "build-commands": [
              "mkdir -p /app/share/applications",
              "mkdir -p /app/share/appdata",
              "mkdir -p /app/share/icons",
              "for i in 16 32 48;do mkdir -p /app/share/icons/hicolor/${i}x${i}/apps;cp browser/chrome/icons/default/default${i}.png /app/share/icons/hicolor/${i}x${i}/apps/org.mozilla.Firefox.png;done",
              "mkdir -p /app/share/icons/hicolor/128x128/apps",
              "mv default128.png /app/share/icons/hicolor/128x128/apps/org.mozilla.Firefox.png",
              "mv org.mozilla.Firefox.appdata.xml /app/share/appdata/",
              "mv org.mozilla.Firefox.desktop /app/share/applications/",
              "mv firefox.sh /app/",
              "mv ./* /app/",
              "mkdir -p ~/.mozilla"
          ],
          "sources": [
              {
                  "type": "file",
                  "path": "org.mozilla.Firefox.desktop"
              },
              {
                  "type": "file",
                  "path": "org.mozilla.Firefox.appdata.xml"
              },
              {
                  "type": "file",
                  "path": "default128.png"
              },

              {
                  "type": "file",
                  "path": "firefox.sh"
              },
              {
                  "type": "archive",
                  "url": "https://ftp.mozilla.org/pub/firefox/releases/58.0/linux-x86_64/en-US/firefox-58.0.tar.bz2",
                  "sha256": "134fec04819eb56fa7b644cdd6d89623b21f4020bbedc3bd122db2a2caa4e434"
              }
          ]
      }
    ]
}
