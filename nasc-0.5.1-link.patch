From bebce8e7ea33e4479498796346e32afaf0318739 Mon Sep 17 00:00:00 2001
From: scx <scx.mail@gmail.com>
Date: Fri, 15 Feb 2019 21:25:18 +0100
Subject: [PATCH] CMake: Fix linking

Fixes #97 and #103
https://github.com/parnold-x/nasc/issues/97
https://github.com/parnold-x/nasc/issues/103

Build app with static library.
---
 CMakeLists.txt                  | 3 ++-
 libqalculatenasc/CMakeLists.txt | 4 ++--
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 7c5e5ce..69d4aaa 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -101,7 +101,8 @@ add_dependencies(com.github.parnold-x.nasc
 target_link_libraries(com.github.parnold-x.nasc
   ${QALCULATE_LIB_PATH}
   ${DEPS_LIBRARIES}
-  qalculatenasc)
+  qalculatenasc
+  -lcln)
 
 install (TARGETS com.github.parnold-x.nasc RUNTIME DESTINATION bin)
 
diff --git a/libqalculatenasc/CMakeLists.txt b/libqalculatenasc/CMakeLists.txt
index 5913ab2..32db3a3 100644
--- a/libqalculatenasc/CMakeLists.txt
+++ b/libqalculatenasc/CMakeLists.txt
@@ -1,7 +1,7 @@
 pkg_check_modules(QALC REQUIRED libqalculate)
 link_directories(${QALC_LIBRARY_DIRS})
 include_directories(${QALC_INCLUDE_DIRS})
- add_library(qalculatenasc SHARED
+ add_library(qalculatenasc STATIC
   QalculateNasc.cc)
-target_link_libraries(qalculatenasc ${QALC_LIBRARIES})
+target_link_libraries(qalculatenasc ${QALC_LIBRARIES} -lcln)
 
