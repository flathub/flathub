name: Pinta
sources:
  - type: archive
    url: https://github.com/PintaProject/Pinta/archive/1.6.tar.gz
    sha256: 7fbabd701c45bd23654606308fce5dc2839cd8b4a2a4b6747fc46d1b5bede269
  - type: file
    path: com.github.PintaProject.Pinta.appdata.xml
  # Update the project and solution files for mono4
  # https://github.com/gentoo/gentoo/blob/4492fc08041affcc2dd8a43096db275958016100/media-gfx/pinta/files/pinta-1.6-mono-4.patch
  - type: patch
    path: pinta-1.6-mono-4.patch
post-install:
  - icon_in="xdg/scalable/pinta.svg";
    icon_out="pinta.png";
    for s in {16,22,24,32,48,64,72,96,128,192,256,512}; do
    rsvg-convert "${icon_in}" -w "${s}" -h "${s}" -a -f png -o "${icon_out}";
    [[ ! -f "${FLATPAK_DEST}/share/icons/hicolor/${s}x${s}/apps/${icon_out}" ]] || continue;
    install -p -D -m 0644 "${icon_out}" -t "${FLATPAK_DEST}/share/icons/hicolor/${s}x${s}/apps/";
    done;
  - install -p -D -m 0644 "com.github.PintaProject.Pinta.appdata.xml" -t "${FLATPAK_DEST}/share/appdata/";
  - install -p -D -m 0644 "license-mit.txt" "license-pdn.txt" -t "${FLATPAK_DEST}/share/licenses/pinta/";
