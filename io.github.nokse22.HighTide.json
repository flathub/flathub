{
    "app-id" : "io.github.nokse22.HighTide",
    "runtime" : "org.gnome.Platform",
    "runtime-version" : "48",
    "sdk" : "org.gnome.Sdk",
    "command" : "high-tide",
    "finish-args" : [
        "--share=network",
        "--share=ipc",
        "--socket=fallback-x11",
        "--device=dri",
        "--socket=wayland",
        "--socket=pulseaudio",
        "--filesystem=xdg-run/pipewire-0:ro",
        "--talk-name=org.freedesktop.secrets",
        "--own-name=org.mpris.MediaPlayer2.HighTide"
    ],
    "cleanup" : [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/gtk-doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
    ],
    "modules" : [
        {
			"name": "python3-tidalapi",
			"buildsystem": "simple",
			"build-commands": [
				"pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"tidalapi\" --no-build-isolation"
			],
			"sources": [
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/a5/32/8f6669fc4798494966bf446c8c4a162e0b5d893dff088afddf76414f70e1/certifi-2024.12.14-py3-none-any.whl",
				    "sha256": "1275f7a45be9464efc1173084eaa30f866fe2e47d389406136d332ed4967ec56"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/16/b0/572805e227f01586461c80e0fd25d65a2115599cc9dad142fee4b747c357/charset_normalizer-3.4.1.tar.gz",
				    "sha256": "44251f18cd68a75b56585dd00dae26183e102cd5e0f9f1466e6df5da2ed64ea3"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl",
				    "sha256": "946d195a0d259cbba61165e88e65941f16e9b36ea6ddb97f00452bae8b1287d3"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/15/aa/0aca39a37d3c7eb941ba736ede56d689e7be91cab5d9ca846bde3999eba6/isodate-0.7.2-py3-none-any.whl",
				    "sha256": "28009937d8031054830160fce6d409ed342816b543597cece116d966c6d99e15"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/ab/1a/5be778993af7c2079e7a24dc208424af6fe1b6392dfaac268a8cf42ba842/mpegdash-0.4.0-py3-none-any.whl",
				    "sha256": "d07f6e1f2a67ddce1be501e3ad7abc29a2d6a7b1830b4da974b49c2ebe99cf2a"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/ec/57/56b9bcc3c9c6a792fcbaf139543cee77261f3651ca9da0c93f5c1221264b/python_dateutil-2.9.0.post0-py2.py3-none-any.whl",
				    "sha256": "a8b2bc7bffae282281c8140a97d3aa9c14da0b136dfe83f850eea9a5f7470427"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/ab/38/ff60c8fc9e002d50d48822cc5095deb8ebbc5f91a6b8fdd9731c87a147c9/ratelimit-2.2.1.tar.gz",
				    "sha256": "af8a9b64b821529aca09ebaf6d8d279100d766f19e90b5059ac6a718ca6dee42"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/f9/9b/335f9764261e915ed497fcdeb11df5dfd6f7bf257d4a6a2a686d80da4d54/requests-2.32.3-py3-none-any.whl",
				    "sha256": "70761cfe03c773ceb22aa2f671b4757976145175cdfca038c02654d061d6dcc6"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/db/a6/efe5044ab4e84e945a3b84e40af3e4ff68f17de20c1fe2d58ed821b1d267/tidalapi-0.8.3-py3-none-any.whl",
				    "sha256": "b6698e308cc9f4edac4b9c1bc22773f040d4de0bbac212defcbe33a93f66b3c7"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/26/9f/ad63fc0248c5379346306f8668cda6e2e2e9c95e01216d2b8ffd9ff037d0/typing_extensions-4.12.2-py3-none-any.whl",
				    "sha256": "04e5ca0351e0f3f85c6853954072df659d0d13fac324d0072316b67d7794700d"
				},
				{
				    "type": "file",
				    "url": "https://files.pythonhosted.org/packages/c8/19/4ec628951a74043532ca2cf5d97b7b14863931476d117c471e8e2b1eb39f/urllib3-2.3.0-py3-none-any.whl",
				    "sha256": "1cee9ad369867bfdbbb48b7dd50374c0967a0bb7710050facf0dd6911440e3df"
				}
			]
		},
        {
		  "name": "blueprint-compiler",
		  "buildsystem": "meson",
		  "sources": [
			{
			  "type": "git",
			  "url": "https://gitlab.gnome.org/jwestman/blueprint-compiler",
			  "tag": "v0.16.0",
			  "commit": "04ef0944db56ab01307a29aaa7303df6067cb3c0"
			}
		  ],
		  "cleanup": ["*"]
		},
        {
			"name": "gstreamer",
			"buildsystem": "meson",
			"config-opts": [
				"--buildtype=release",
				"--wrap-mode=nodownload",

				"-Dbase=enabled",
				"-Dgood=enabled",
				"-Dbad=enabled",
				"-Dugly=enabled",
				"-Dlibav=enabled",
				"-Dvaapi=disabled",
				"-Dsharp=disabled",
				"-Drs=disabled",
				"-Dpython=disabled",
				"-Ddevtools=disabled",
				"-Dges=disabled",
				"-Drtsp_server=disabled",
				"-Dgst-examples=disabled",
				"-Dqt5=disabled",
				"-Dtests=disabled",
				"-Dexamples=disabled",
				"-Dintrospection=enabled",
				"-Ddoc=disabled",
				"-Dgtk_doc=disabled",
				"-Dgpl=enabled",

				"-Dgstreamer:benchmarks=disabled",
				"-Dgstreamer:gobject-cast-checks=disabled",
				"-Dgstreamer:glib-asserts=disabled",
				"-Dgstreamer:glib-checks=disabled",
				"-Dgstreamer:extra-checks=disabled",

				"-Dgst-plugins-base:gobject-cast-checks=disabled",
				"-Dgst-plugins-base:glib-asserts=disabled",
				"-Dgst-plugins-base:glib-checks=disabled",
				"-Dgst-plugins-base:gl_api=opengl,gles2",
				"-Dgst-plugins-base:gl_platform=egl,glx",

				"-Dgst-plugins-good:gobject-cast-checks=disabled",
				"-Dgst-plugins-good:glib-asserts=disabled",
				"-Dgst-plugins-good:glib-checks=disabled",
				"-Dgst-plugins-good:gtk3=disabled",

				"-Dgst-plugins-bad:gobject-cast-checks=disabled",
				"-Dgst-plugins-bad:glib-asserts=disabled",
				"-Dgst-plugins-bad:glib-checks=disabled",
				"-Dgst-plugins-bad:extra-checks=disabled",
				"-Dgst-plugins-bad:vulkan=disabled",
				"-Dgst-plugins-bad:webrtc=disabled",
				"-Dgst-plugins-bad:wasapi=disabled",
				"-Dgst-plugins-bad:wasapi2=disabled",
				"-Dgst-plugins-bad:winks=disabled",
				"-Dgst-plugins-bad:winscreencap=disabled",
				"-Dgst-plugins-bad:assrender=disabled",
				"-Dgst-plugins-bad:nvcodec=disabled",
				"-Dgst-plugins-bad:v4l2codecs=disabled",
				"-Dgst-plugins-bad:va=disabled",

				"-Dgst-plugins-ugly:gobject-cast-checks=disabled",
				"-Dgst-plugins-ugly:glib-asserts=disabled",
				"-Dgst-plugins-ugly:glib-checks=disabled",
				"-Dgst-plugins-ugly:mpeg2dec=disabled"
			],
			"sources": [
				{
				    "type": "git",
				    "url": "https://gitlab.freedesktop.org/gstreamer/gstreamer.git",
				    "tag": "1.26.1",
				    "disable-submodules": true
				}
			]
		},
        {
			"name" : "libportal",
			"buildsystem" : "meson",
			"config-opts" : [
				"-Dtests=false",
				"-Dbackend-gtk3=disabled",
				"-Dbackend-gtk4=enabled",
				"-Dbackend-qt5=disabled",
				"-Ddocs=false"
			],
			"sources" : [
				{
				    "type" : "archive",
				    "url" : "https://github.com/flatpak/libportal/releases/download/0.8.1/libportal-0.8.1.tar.xz",
				    "sha256" : "281e54e4f8561125a65d20658f1462ab932b2b1258c376fed2137718441825ac"
				}
			]
		},
        {
            "name" : "high-tide",
            "builddir" : true,
            "buildsystem" : "meson",
            "sources" : [
                {
                    "type" : "git",
		    	        "url": "https://github.com/Nokse22/high-tide.git",
		    	        "tag": "v0.1.5"
                }
            ],
            "config-opts" : [
                "--libdir=lib"
            ]
        }
    ]
}
