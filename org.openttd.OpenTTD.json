{
  "app-id": "org.openttd.OpenTTD",
  "branch": "stable",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "1.6",
  "sdk": "org.freedesktop.Sdk",
  "command": "openttd",
  "rename-icon": "openttd",
  "rename-desktop-file": "openttd.desktop",
  "finish-args": [
    "--device=dri",
    "--filesystem=home",
    "--share=ipc",
    "--share=network",
    "--socket=pulseaudio",
    "--socket=wayland",
    "--socket=x11"
  ],
  "modules": [
    "shared-modules/SDL/SDL-1.2.15.json",
    {
      "name": "icu",
      "cleanup": [
        "/bin",
        "/include",
        "/lib/icu",
        "/lib/pkgconfig",
        "/sbin",
        "/share"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://download.icu-project.org/files/icu4c/52.1/icu4c-52_1-src.tgz",
          "sha256": "2f4d5e68d4698e87759dbdc1a586d053d96935787f79961d192c477b029d8092"
        }
      ],
      "subdir": "source"
    },
    {
      "name": "libpng",
      "config-opts": [
        "--enable-shared",
        "--disable-static"
      ],
      "cleanup": [
        "/bin",
        "/include",
        "/lib/*.la",
        "/lib/pkgconfig",
        "/share"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/glennrp/libpng/archive/v1.2.59.tar.gz",
          "sha256": "d5bc743ac338bd454e330279f70534f5a31ea4c2cd3ee3ce76fd6e7f17fd3950"
        }
      ]
    },
    {
      "name": "libtimidity",
      "config-opts": [
        "--enable-shared",
        "--disable-static"
      ],
      "cleanup": [
        "/include",
        "/lib/*.la",
        "/lib/pkgconfig",
        "/share"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://downloads.sourceforge.net/project/libtimidity/libtimidity/0.2.5/libtimidity-0.2.5.tar.gz",
          "sha256": "2cb4ad5cfd6b9a2ed84e596887dc7b26fba84785b4bf855505c310cc8ffcf307"
        }
      ]
    },
    {
      "name": "libxdg-basedir",
      "config-opts": [
        "--enable-shared",
        "--disable-static"
      ],
      "cleanup": [
        "/include",
        "/lib/*.la",
        "/lib/pkgconfig",
        "/share"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/devnev/libxdg-basedir/archive/libxdg-basedir-1.2.0.tar.gz",
          "sha256": "1c2b0032a539033313b5be2e48ddd0ae94c84faf21d93956d53562eef4614868"
        }
      ]
    },
    {
      "name": "lzo",
      "config-opts": [
        "--enable-shared",
        "--disable-static"
      ],
      "cleanup": [
        "/include",
        "/lib/*.la",
        "/lib/pkgconfig",
        "/share"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://www.oberhumer.com/opensource/lzo/download/lzo-2.10.tar.gz",
          "sha256": "c0f892943208266f9b6543b3ae308fab6284c5c90e627931446fb49b4221a072"
        }
      ]
    },
    {
      "name": "openttd",
      "config-opts": [
        "--prefix-dir=/app",
        "--binary-dir=/bin",
        "--with-liblzo2=/app/lib/liblzo2.so.2"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://binaries.openttd.org/releases/1.8.0/openttd-1.8.0-source.tar.xz",
          "sha256": "c2d32d9d736d27202a020027a3729ae763f5432ae6f424891e57a4095eeb087f"
        },
        {
          "type": "file",
          "path": "org.openttd.OpenTTD.appdata.xml"
        }
      ]
    },
    {
      "name": "opengfx",
      "buildsystem": "simple",
      "build-commands": [
        "tar -xf opengfx-0.5.2.tar",
        "mkdir -p /app/share/games/openttd/baseset/opengfx",
        "cp -r opengfx*/* /app/share/games/openttd/baseset/opengfx"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://binaries.openttd.org/extra/opengfx/0.5.2/opengfx-0.5.2-all.zip",
          "sha256": "19be61f1cb04cbb3cb9602f0b8eb6e6f56ecbefbfdd6e0e03f9579e5a5c1cbc8"
        }
      ]
    },
    {
      "name": "openmsx",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p /app/share/games/openttd/baseset/openmsx",
        "cp -r * /app/share/games/openttd/baseset/openmsx"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://binaries.openttd.org/extra/openmsx/0.3.1/openmsx-0.3.1-all.zip",
          "sha256": "92e293ae89f13ad679f43185e83fb81fb8cad47fe63f4af3d3d9f955130460f5"
        }
      ]
    },
    {
      "name": "opensfx",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p /app/share/games/openttd/baseset/opensfx",
        "cp -r * /app/share/games/openttd/baseset/opensfx"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://binaries.openttd.org/extra/opensfx/0.2.3/opensfx-0.2.3-all.zip",
          "sha256": "6831b651b3dc8b494026f7277989a1d757961b67c17b75d3c2e097451f75af02"
        }
      ]
    },
    {
      "name": "freepats",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p /app/share/midi/freepats",
        "cp -r * /app/share/midi/freepats"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://freepats.zenvoid.org/freepats-20060219.tar.xz",
          "sha256": "500c61782ff4b22de6887c0a32e68dd98b511c4396ddf89e8cab482c7dcea89e"
        }
      ]
    }
  ]
}