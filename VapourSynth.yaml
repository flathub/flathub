name: VapourSynth
sources:
  - type: archive
    url: https://github.com/vapoursynth/vapoursynth/archive/R44.tar.gz
    sha256: 3459aa903c42b2f87a634ee705fcc3dd251729bd179e8ab4684a50bd7415930a
modules:
  - name: nasm
    cleanup:
      - '*'
    sources:
      - type: archive
        url: https://www.nasm.us/pub/nasm/releasebuilds/2.13.03/nasm-2.13.03.tar.xz
        sha256: 812ecfb0dcbc5bd409aaa8f61c7de94c5b8752a7b00c632883d15b2ed6452573
        
  - name: cython
    buildsystem: simple
    build-commands:
      - python3 setup.py install --prefix=/app
    cleanup:
      - '*'
    sources:
      - type: archive
        url: https://github.com/cython/cython/archive/0.28.5.tar.gz
        sha256: bcd6a24ca0cba54ad8b1755852bb5cd567bb06abea6f776c82fbb10bb46bae37

  - name: L-SMASH
    config-opts:
      - --enable-shared
    sources:
      - type: archive
        url: https://github.com/l-smash/l-smash/archive/v2.14.5.tar.gz
        sha256: e6f7c31de684f4b89ee27e5cd6262bf96f2a5b117ba938d2d606cf6220f05935

  - name: x264
    config-opts:
      - --disable-cli
      - --enable-shared
    sources:
      - type: archive
        url: https://download.videolan.org/x264/snapshots/x264-snapshot-20180825-2245-stable.tar.bz2
        sha256: 4d78f3492ec93c6cbac18192e5f01719db153977875427c177920e6eca4ce3fb
  
  - name: ffmpeg
    config-opts:
      - --enable-gpl
      - --disable-static
      - --enable-avresample
      - --enable-shared
      - --disable-doc
      - --disable-ffplay
      - --disable-ffprobe
      - --enable-libopus
      - --enable-libvpx
      - --enable-libx264
    cleanup:
      - /share/ffmpeg/examples
    sources:
      - type: archive
        url: https://ffmpeg.org/releases/ffmpeg-4.0.2.tar.xz
        sha256: a95c0cc9eb990e94031d2183f2e6e444cc61c99f6f182d1575c433d62afb2f97
  
  - name: zimg
    cleanup:
      - /share/doc
    sources:
      - type: archive
        url: https://github.com/sekrit-twc/zimg/archive/release-2.7.5.tar.gz
        sha256: 0fbefe23cd677f4d902dcad40c4ef078a347454630168106e6eed4cf91a217ff
