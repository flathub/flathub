name: VapourSynth
sources:
  - type: archive
    url: https://github.com/vapoursynth/vapoursynth/archive/R44.tar.gz
    sha256: 3459aa903c42b2f87a634ee705fcc3dd251729bd179e8ab4684a50bd7415930a
modules:
  - name: nasm
    cleanup:
      - '*'
    sources:
      - type: archive
        url: https://www.nasm.us/pub/nasm/releasebuilds/2.13.03/nasm-2.13.03.tar.xz
        sha256: 812ecfb0dcbc5bd409aaa8f61c7de94c5b8752a7b00c632883d15b2ed6452573

  - name: cython
    buildsystem: simple
    build-commands:
      - python3 setup.py install --prefix=/app
    cleanup:
      - '*'
    sources:
      - type: archive
        url: https://github.com/cython/cython/archive/0.28.5.tar.gz
        sha256: bcd6a24ca0cba54ad8b1755852bb5cd567bb06abea6f776c82fbb10bb46bae37

  - name: L-SMASH
    config-opts:
      - --enable-shared
    sources:
      - type: archive
        url: https://github.com/l-smash/l-smash/archive/v2.14.5.tar.gz
        sha256: e6f7c31de684f4b89ee27e5cd6262bf96f2a5b117ba938d2d606cf6220f05935

  - name: x264
    config-opts:
      - --disable-cli
      - --enable-shared
    sources:
      - type: archive
        url: https://download.videolan.org/x264/snapshots/x264-snapshot-20180825-2245-stable.tar.bz2
        sha256: 4d78f3492ec93c6cbac18192e5f01719db153977875427c177920e6eca4ce3fb

  - name: libass
    config-opts:
      - --disable-static
    cleanup:
      - /include
      - /lib/*.la
      - /lib/pkgconfig
    sources:
      - type: archive
        url: https://github.com/libass/libass/releases/download/0.14.0/libass-0.14.0.tar.xz
        sha256: 881f2382af48aead75b7a0e02e65d88c5ebd369fe46bc77d9270a94aa8fd38a2
    modules: 
      - name: FriBidi
        buildsystem: meson
        config-opts:
          - -Ddocs=false
        cleanup:
          - /bin
          - /include
          - /lib/pkgconfig
          - /lib/*.la
        sources:
          - type: archive
            url: https://github.com/fribidi/fribidi/archive/v1.0.5.tar.gz
            sha256: aee3a93d081c293eaca9157700f17dc780a0b6674bc911decc5aaa43aec9abd7

  - name: ffmpeg
    config-opts:
      - --enable-gpl
      - --disable-static
      - --enable-avresample
      - --enable-shared
      - --disable-doc
      - --disable-ffplay
      - --disable-ffprobe
      - --enable-libopus
      - --enable-libvpx
      - --enable-libx264
    cleanup:
      - /share/ffmpeg/examples
    sources:
      - type: archive
        url: https://ffmpeg.org/releases/ffmpeg-4.0.2.tar.xz
        sha256: a95c0cc9eb990e94031d2183f2e6e444cc61c99f6f182d1575c433d62afb2f97

  - name: zimg
    cleanup:
      - /share/doc
    sources:
      - type: archive
        url: https://github.com/sekrit-twc/zimg/archive/release-2.7.5.tar.gz
        sha256: 0fbefe23cd677f4d902dcad40c4ef078a347454630168106e6eed4cf91a217ff
  
  - name: ImageMagick
    config-opts:
      - --enable-static=no
    sources:
      - type: archive
        url: https://imagemagick.org/download/ImageMagick-7.0.8-11.tar.xz
        sha256: c15f14c054b4fde417e7b82c23950047203f81e582de7f1270cf3bdfa8a38a03
        
  - name: Tesseract
    config-opts:
      - --disable-static
    sources:
      - type: archive
        url: https://github.com/tesseract-ocr/tesseract/archive/3.05.01.tar.gz
        sha256: 05898f93c5d057fada49b9a116fc86ad9310ff1726a0f499c3e5211b3af47ec1
    modules: 
      - name: Leptonica
        sources:
          - type: archive
            url: http://www.leptonica.com/source/leptonica-1.76.0.tar.gz
            sha256: 5e9a33b7ce33ab39fb03cee5a7ec353b044670176303265d7c64d51539616857
