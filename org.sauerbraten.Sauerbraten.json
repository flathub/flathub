{
    "app-id": "org.sauerbraten.Sauerbraten",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "1.6",
    "sdk": "org.freedesktop.Sdk",
    "finish-args": [
        "--device=dri",
        "--share=ipc",
        "--share=network",
        "--socket=x11",
        "--socket=pulseaudio",
        /* Sauerbraten does not respect XDG base directories */
        "--persist=.sauerbraten"
    ],
    "command": "sauerbraten",
    "rename-appdata-file": "sauerbraten.appdata.xml",
    "rename-desktop-file": "sauerbraten.desktop",
    "rename-icon": "sauerbraten",
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/share/aclocal",
        "/share/man",
        "*.la", "*.a"
    ],
    "modules": [
        "shared-modules/glu/glu-9.0.0.json",
        "shared-modules/SDL/SDL-1.2.15.json",
        "shared-modules/SDL/SDL_image-1.2.12.json",
        "shared-modules/smpeg/smpeg-0.4.5.json",
        "shared-modules/SDL/SDL_mixer-1.2.12.json",
        {
            "name": "sauerbraten",
            "buildsystem": "simple",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://sourceforge.net/projects/sauerbraten/files/sauerbraten/2013_01_04/sauerbraten_2013_04_04_collect_edition_linux.tar.bz2",
                    "sha256": "221c87af596ce11d4e0247ab55e5a448ee10737e2bf3472e46a46d77d164bfaa"
                },
                {
                    "type": "file",
                    "path": "sauerbraten.sh"
                },
                {
                    "type": "file",
                    "path": "sauerbraten.desktop"
                },
                {
                    "type": "file",
                    "path": "sauerbraten.appdata.xml"
                }
            ],
            "build-commands": [
                "cd src; make",
                "install -Dm755 sauerbraten.sh /app/bin/sauerbraten",
                "install -Dm755 src/sauer_client /app/share/sauerbraten/sauerbraten",
                "install -Dm755 src/sauer_server /app/share/sauerbraten/sauerbraten_server",
                "cp -r data /app/share/sauerbraten/",
                "cp -r packages /app/share/sauerbraten/",
                "install -Dm644 data/cube.png /app/share/icons/hicolor/256x256/apps/sauerbraten.png",
                "install -Dm644 sauerbraten.desktop /app/share/applications/sauerbraten.desktop",
                "install -Dm644 sauerbraten.appdata.xml /app/share/appdata/sauerbraten.appdata.xml"
        ]
        }
    ]
}
