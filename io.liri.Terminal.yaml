app-id: io.liri.Terminal
branch: stable
runtime: org.kde.Platform
runtime-version: "5.11"
sdk: org.kde.Sdk
base: io.liri.BaseApp
base-version: "5.11"
command: liri-terminal
finish-args:
  - --device=dri
  - --filesystem=host
  - --filesystem=xdg-run/dconf
  - --filesystem=xdg-config/dconf:ro
  - --socket=wayland
  - --socket=x11
  - --share=ipc
  - --talk-name=ca.desrt.dconf
  - --talk-name=org.freedesktop.Notifications
  - --env=DCONF_USER_CONFIG_DIR=.config/dconf
modules:
  - name: qtgsettings
    buildsystem: simple
    build-commands:
      - qbs setup-toolchains --settings-dir .qbs-settings --type gcc /usr/bin/g++ gcc
      - qbs setup-qt --settings-dir .qbs-settings /usr/bin/qmake qt5
      - qbs config --settings-dir .qbs-settings profiles.qt5.baseProfile gcc
      - qbs config --settings-dir .qbs-settings --list
      - qbs --settings-dir .qbs-settings -d build --command-echo-mode command-line profile:qt5 qbs.buildVariant:debug modules.qbs.installRoot:/ modules.lirideployment.prefix:/app
    sources:
      - type: archive
        url: https://github.com/lirios/qtgsettings/releases/download/v1.2.0/qtgsettings-1.2.0.tar.xz
        sha256: 0e66b2f2066e8e553abb3de069a3f76bf50382ed49b0790091341a8f3c5e15cb

  - name: terminal
    buildsystem: simple
    build-commands:
      - qbs setup-toolchains --settings-dir .qbs-settings --type gcc /usr/bin/g++ gcc
      - qbs setup-qt --settings-dir .qbs-settings /usr/bin/qmake qt5
      - qbs config --settings-dir .qbs-settings profiles.qt5.baseProfile gcc
      - qbs config --settings-dir .qbs-settings --list
      - qbs --settings-dir .qbs-settings -d build --command-echo-mode command-line profile:qt5 qbs.buildVariant:debug modules.qbs.installRoot:/ modules.lirideployment.prefix:/app
    sources:
      - type: archive
        url: https://github.com/lirios/terminal/releases/download/v0.2.0/liri-terminal-0.2.0.tar.xz
        sha256: fac15b9e88c25be42ed1e93b74d1c9df7760a12b260aa1fe0240fe81fac23fac
