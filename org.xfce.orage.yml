app-id: org.xfce.orage
runtime: org.freedesktop.Platform
runtime-version: 22.08
sdk: org.freedesktop.Sdk
command: orage

finish-args:
  - --share=ipc
  - --socket=x11

cleanup:
  - '*.a'
  - '*.la'
  - /lib/girepository-1.0
  - /lib/pkgconfig
  - /include
  - /share/gir-1.0
  - /share/gtk-doc
  - /share/man

modules:
  - shared-modules/intltool/intltool-0.51.json

  - name: libxfce4ui
    modules:
      - name: libxfce4util
        cleanup:
          - /sbin
        config-opts:
          - --disable-debug
        sources:
          - type: archive
            url: https://archive.xfce.org/src/xfce/libxfce4util/4.16/libxfce4util-4.16.0.tar.bz2
            sha256: 60598d745d1fc81ff5ad3cecc3a8d1b85990dd22023e7743f55abd87d8b55b83
      - name: xfconf
        modules:
          - name: xfce4-dev-tools
            cleanup:
              - '*'
            sources:
              - type: archive
                url: https://archive.xfce.org/src/xfce/xfce4-dev-tools/4.16/xfce4-dev-tools-4.16.0.tar.bz2
                sha256: f50b3070e66f3ebdf331744dd1ec5e1af5de333965d491e15ce05545e8eb4f04
                x-checker-data:
                  type: anitya
                  project-id: 15888
                  url-template: https://archive.xfce.org/src/xfce/xfce4-dev-tools/$major.$minor/xfce4-dev-tools-$version.tar.bz2
        cleanup:
          - /bin
          - /share/bash-completion
        config-opts:
          - --enable-maintainer-mode
          - --disable-debug
          - XFCONF_SERVICE_NAME_PREFIX=org.xfce.orage
        sources:
          - type: git
            url: https://gitlab.xfce.org/xfce/xfconf.git
            tag: xfconf-4.16.0
            commit: f05f028b840b465a41deef0fae6f50a885222e62
            x-checker-data:
              type: anitya
              project-id: 14854
              tag-template: xfconf-$version
    cleanup:
      - /bin
      - /etc
      - /share/icons
      - /share/applications
    config-opts:
      - --disable-debug
    sources:
      - type: archive
        url: https://archive.xfce.org/src/xfce/libxfce4ui/4.16/libxfce4ui-4.16.1.tar.bz2
        sha256: d96946ae5af6bf078dda415419e0021909f763ee0020b42f3e26f603e51585f6

  - name: xfce4-panel
    modules:
      - name: garcon
        cleanup:
          - /sbin
        config-opts:
          - --disable-debug
        sources:
          - type: archive
            url: https://archive.xfce.org/src/xfce/garcon/4.16/garcon-4.16.1.tar.bz2
            sha256: 84914927a2c1fda167f67af26a6640630a744a22940df508aa6c752cdbd3d21d
      - name: exo
        cleanup:
          - /sbin
        config-opts:
          - --disable-debug
          - --disable-static
          - --disable-gtk-doc
        sources:
          - type: archive
            url: https://archive.xfce.org/src/xfce/exo/4.16/exo-4.16.4.tar.bz2
            sha256: 82a50c67e78f1e5c420b7615515bcca759b86eeab99224ab8eca4306b89d2eca
      - name: libwnck
        buildsystem: meson
        config-opts:
          - -Dgtk_doc=false
        cleanup:
          - /bin
        sources:
          - type: git
            url: https://gitlab.gnome.org/GNOME/libwnck.git
            tag: 3.36.0
            commit: 3c469a0d7e58e36106eea7600ae2f6fd8aaed232
    config-opts:
      - --disable-debug
    sources:
      - type: archive
        url: https://archive.xfce.org/src/xfce/xfce4-panel/4.16/xfce4-panel-4.16.5.tar.bz2
        sha256: 096693e2bc76cf760cfe00dc76ec121c4d23f9166aa29945ae41616e8ec78230

  - name: libical
    cleanup:
      - /lib/cmake
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
      - -DCMAKE_INSTALL_LIBDIR=lib
      - -DBUILD_SHARED_LIBS:BOOL=ON
      - -DICAL_GLIB=true
      - -DGOBJECT_INTROSPECTION=true
      - -DICAL_GLIB_VAPI=false
      - -DICAL_BUILD_DOCS=false
    sources:
      - type: archive
        url: https://github.com/libical/libical/releases/download/v3.0.14/libical-3.0.14.tar.gz
        sha256: 4284b780356f1dc6a01f16083e7b836e63d3815e27ed0eaaad684712357ccc8f
        x-checker-data:
          type: anitya
          project-id: 1637
          url-template: https://github.com/libical/libical/releases/download/v$version/libical-$version.tar.gz

  - name: libnotify
    buildsystem: meson
    config-opts:
      - -Dman=false
      - -Dgtk_doc=false
    sources:
      - type: archive
        url: https://gitlab.gnome.org/GNOME/libnotify/-/archive/0.7.9/libnotify-0.7.9.tar.gz
        sha256: 9bd4f5fa911d27567e7cc2d2d09d69356c16703c4e8d22c0b49a5c45651f3af0

  - name: popt
    sources:
      - type: archive
        url: http://ftp.rpm.org/popt/releases/popt-1.x/popt-1.18.tar.gz
        sha256: 5159bc03a20b28ce363aa96765f37df99ea4d8850b1ece17d1e6ad5c24fdc5d1

  - name: orage
    config-opts:
      - --disable-debug
    sources:
      - type: archive
        url: https://archive.xfce.org/src/apps/orage/4.16/orage-4.16.0.tar.bz2
        sha256: 26111a3b6a2007c82f1e0a1e0591b774a0b132f3a7f1cde53d9be661b2f11700
        x-checker-data:
          type: anitya
          project-id: 15827
          url-template: https://archive.xfce.org/src/apps/orage/$major.$minor/orage-$version.tar.bz2
      - type: patch
        path: appdata.patch
