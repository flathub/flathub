app-id: org.putty.putty
runtime: org.gnome.Platform
runtime-version: "43"
sdk: org.gnome.Sdk
rename-desktop-file: putty.desktop
rename-icon: putty
command: putty
finish-args:
  - --socket=fallback-x11
  - --socket=wayland
  - --device=all
  - --share=network
  - --filesystem=/run/udev:ro
modules:
  - name: putty
    buildsystem: cmake-ninja
    build-options:
      cflags: -DNOT_X_WINDOWS -Wno-error=unused-function
    post-install:
      - mkdir -p ${FLATPAK_DEST}/share/applications/ ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/ ${FLATPAK_DEST}/share/metainfo/
      - install -Dm755 putty.desktop ${FLATPAK_DEST}/share/applications/
      - install -Dm644 putty.svg ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/
      - install -Dm644 org.putty.putty.metainfo.xml ${FLATPAK_DEST}/share/metainfo/
    sources:
      - type: git
        url: https://git.tartarus.org/simon/putty.git
        tag: "0.77"
        commit: 61ab33efe48cfd1cea77e249e5598a89f3387fa3
        x-checker-data:
          type: git
          tag-pattern: "^(\\d+.\\d+)$"
      - type: file
        url: https://src.fedoraproject.org/rpms/putty/raw/f36/f/putty.desktop
        sha256: 46a562552f577678885fdb70c7ac35d46111826884647c68e5ee3d2b687de90a
      - type: file
        url: https://upload.wikimedia.org/wikipedia/commons/e/e7/PuTTY_Icon.svg
        sha256: 99f17ba3963a8859e3f2825aa04ed4eea9fa6c650ee19ccff6baa92baaae6be3
        dest-filename: putty.svg
      - type: file
        path: org.putty.putty.metainfo.xml
