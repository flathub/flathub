id: io.qt.PySide.BaseApp
branch: '6.7'
runtime: org.kde.Platform
runtime-version: '6.7'
sdk: org.kde.Sdk
sdk-extensions:
  - org.freedesktop.Sdk.Extension.llvm16
separate-locales: false
base: io.qt.qtwebengine.BaseApp
base-version: '6.7'
build-options:
  append-path: /usr/lib/sdk/llvm16/bin
  append-ld-library-path: /usr/lib/sdk/llvm16/lib
  env:
    LLVM_INSTALL_DIR: /usr/lib/sdk/llvm16
modules:
  - python3-requirements.json
  - name: pyside-setup
    buildsystem: simple
    build-commands:
      - python3 setup.py build --qtpaths=/usr/bin/qtpaths --ignore-git --parallel=8
        --log-level=verbose --no-qt-tools --shiboken-force-process-system-headers
      - python3 create_wheels.py --build-dir ./build/qfp-*-release
      - pip install ./dist/*.whl --prefix=${FLATPAK_DEST}
    sources:
      - type: git
        url: "git://code.qt.io/pyside/pyside-setup.git"
        branch: "6.7.2"
      - type: patch
        path: shiboken_force_process_system_headers.patch
    cleanup:
      - /app/bin/pyside6-*
