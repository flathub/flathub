{
    "app-id" : "ru.sview.sView",
    "runtime" : "org.freedesktop.Platform",
    "runtime-version" : "18.08",
    "sdk" : "org.freedesktop.Sdk",
    "command" : "sView",
    "finish-args" : [
        /* X11 + XShm access */
        "--share=ipc", "--socket=x11",
        /* GPU acceleration */
        "--device=dri",
        /* Play sounds */
        "--socket=pulseaudio",
        /* Get access to the files */
        "--filesystem=host:ro",
        "--filesystem=xdg-run/gvfs:ro"
    ],
    "modules" : [
        "shared-modules/gtk2/gtk2.json",
        {
            "name" : "libconfig",
            "sources" : [
                {
                    "type": "archive",
                    "url" : "https://hyperrealm.github.io/libconfig/dist/libconfig-1.7.2.tar.gz",
                    "sha256": "7c3c7a9c73ff3302084386e96f903eb62ce06953bb1666235fac74363a16fad9"
                }
            ]
        },
	{
	    "name": "wxWidgets",
	    "rm-configure": true,
            "cleanup": [
                "/bin",
                "/lib/wx",
                "/share/bakefile"
            ],
	    "sources": [
		{
		    "type": "archive",
		    "url": "https://github.com/wxWidgets/wxWidgets/releases/download/v3.0.4/wxWidgets-3.0.4.tar.bz2",
		    "sha256": "96157f988d261b7368e5340afa1a0cad943768f35929c22841f62c25b17bf7f0"
		},
		{
		    "type": "script",
		    "dest-filename": "autogen.sh",
		    "commands": [
			"cp -p /usr/share/automake-*/config.{sub,guess} .",
			"autoconf -f -B build/autoconf_prepend-include"
		    ]
		}
	    ]
	},
        {
            "name": "codeblocks",
            "cleanup": [
                "/share/pixmaps"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://netcologne.dl.sourceforge.net/project/codeblocks/Sources/17.12/codeblocks_17.12.tar.xz",
                    "sha256": "13881a0a72769694e82e531b8e7814d51fbf1fa122c73c5004e186560fbc57e0"
                }
            ]
        },
        {
            "name" : "sview",
            "buildsystem": "simple",
            "build-commands": [
                "make",
                "make install"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/gkv311/sview.git",
                    "commit" : "f8b49878112bbe2b739977669bc0a58ddc2d4257"
                },
                {
                    "type": "patch",
                    "path" : "0001-build-Install-in-app.patch"
                },
                {
                    "type": "patch",
                    "path" : "0001-StProcess-Look-for-data-in-app-rather-than-usr.patch"
                }
            ]
        }
    ]
}
