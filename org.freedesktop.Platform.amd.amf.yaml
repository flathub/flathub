id: org.freedesktop.Platform.amd.amf
branch: '25.08'
runtime: org.freedesktop.Platform
runtime-version: '25.08'
sdk: org.freedesktop.Sdk
build-extension: true
separate-locales: false

modules:
  - name: amf
    buildsystem: simple
    build-commands:
      - install -Dm644 ${FLATPAK_ID}.metainfo.xml -t ${FLATPAK_DEST}/share/metainfo
      - ar p amf-amdgpu-pro.deb data.tar.xz | tar -xJ --strip-components=5 -C ${FLATPAK_DEST}
      - ar p libamdenc-amdgpu-pro.deb data.tar.xz | tar -xJ --strip-components=5 -C ${FLATPAK_DEST}
      - mkdir -p ${FLATPAK_DEST}/share/licenses/${FLATPAK_ID}/amf
      - ar p amf-amdgpu-pro.deb data.tar.xz | tar -xJ --strip-components=5 -C ${FLATPAK_DEST}/share/licenses/${FLATPAK_ID}/amf ./usr/share/doc/amf-amdgpu-pro/copyright

    sources:
      - type: file
        url: https://repo.radeon.com/amf/25.20/ubuntu/pool/main/jammy/amf-amdgpu-pro_25.20-310_amd64.deb
        sha256: 4b10331c87de768c4de737715830874b1bc043d4c853c232d8ccfdf6b48c3683
        dest-filename: amf-amdgpu-pro.deb

      - type: file
        url: https://repo.radeon.com/amf/25.20/ubuntu/pool/main/jammy/libamdenc-amdgpu-pro_25.20-310_amd64.deb
        sha256: 48b5b401d7b5f74006695229d9fe49b6738ea5cd1e657f691e2b7583d50f0083
        dest-filename: libamdenc-amdgpu-pro.deb

      - type: file
        path: org.freedesktop.Platform.amd.amf.metainfo.xml