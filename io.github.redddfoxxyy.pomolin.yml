app-id: io.github.redddfoxxyy.pomolin
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk

command: pomolin
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=pulseaudio
  - --device=dri
  - --talk-name=org.freedesktop.Notifications
  - --talk-name=org.kde.StatusNotifierWatcher

modules:
  - name: pomolin
    buildsystem: simple
    sources:
      - type: git
        url: https://github.com/RedddFoxxyy/Pomolin.git
        tag: v1.1.5

      - type: archive
        url: https://github.com/RedddFoxxyy/Pomolin/releases/download/v1.1.5/pomolin_x64_linux.tar.gz
        sha256: "9eda1cb1a9a9fe40b70fdd502d89ad30f9596c60c2672ad123801f4b7a4a8ef7"
        dest: "pomolin"
        only-arches:
          - x86_64

      - type: archive
        url: https://github.com/RedddFoxxyy/Pomolin/releases/download/v1.1.5/pomolin_arm64_linux.tar.gz
        sha256: "273ad945d5a5f81dc45b0963626436365cab026d0835cb00aa4a4fa57ed6521e"
        dest: "pomolin"
        only-arches:
          - aarch64

    build-commands:
      - cp -r pomolin /app/

      - install -Dm644 packaging/io.github.redddfoxxyy.pomolin.desktop /app/share/applications/io.github.redddfoxxyy.pomolin.desktop
      - install -Dm644 packaging/io.github.redddfoxxyy.pomolin.svg /app/share/icons/hicolor/scalable/apps/io.github.redddfoxxyy.pomolin.svg
      - install -Dm644 packaging/io.github.redddfoxxyy.pomolin.metainfo.xml /app/share/metainfo/io.github.redddfoxxyy.pomolin.metainfo.xml

      - install -Dm755 packaging/pomolin-launcher.sh /app/bin/pomolin
