{
	"app-id": "io.github.markummitchell.Engauge_Digitizer",
	"runtime": "org.kde.Platform",
	"runtime-version": "5.10",
	"sdk": "org.kde.Sdk",
	"command": "engauge",
	"rename-icon": "engauge-digitizer",
	"copy-icon": true,
	"rename-desktop-file": "engauge-digitizer.desktop",
	"rename-appdata-file": "engauge-digitizer.appdata.xml",
	"finish-args": [
		"--socket=wayland",
		"--socket=x11",
		"--share=ipc",
		"--device=dri"
	],
	"cleanup": [
		"/include",
		"/lib/pkgconfig",
		"/lib/cmake",
		"/share/aclocal",
		"/share/pkgconfig",
		"*.a",
		"*.la",
		"*.cmake"
	],
	"modules": [
		{
			"name": "log4cpp_null",
			"buildsystem": "qmake",
			"sources": [
				{
					"type": "git",
					"url": "https://github.com/markummitchell/log4cpp_null",
					"commit": "fa1c38560d50261508ef886cc68be0fcf8abfea9"
				}
			]
		},
		{
			"name": "fftw3",
			"no-autogen": true,
			"config-opts": [
				"--enable-shared",
				"--enable-threads"
			],
			"sources": [
				{
					"type": "archive",
					"url": "http://www.fftw.org/fftw-3.3.7.tar.gz",
					"sha256": "3b609b7feba5230e8f6dd8d245ddbefac324c5a6ae4186947670d9ac2cd25573"
				}
			]
		},
		{
			"name": "openjpeg",
			"buildsystem": "cmake-ninja",
			"config-opts": [
				"-DCMAKE_BUILD_TYPE=Release"
			],
			"cleanup": [
				"/bin",
				"/lib/openjpeg-*",
				"*.a"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/uclouvain/openjpeg/archive/v2.3.0.tar.gz",
					"sha256": "3dc787c1bb6023ba846c2a0d9b1f6e179f1cd255172bde9eb75b01f1e6c7d71a"
				}
			]
		},
		{
			"name": "poppler-data",
			"buildsystem": "cmake-ninja",
			"builddir": true,
			"config-opts": [
				"-DCMAKE_BUILD_TYPE=Release"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://poppler.freedesktop.org/poppler-data-0.4.8.tar.gz",
					"sha256": "1096a18161f263cccdc6d8a2eb5548c41ff8fcf9a3609243f1b6296abdf72872"
				}
			]
		},
		{
			"name": "poppler",
			"buildsystem": "cmake-ninja",
			"builddir": true,
			"config-opts": [
				"-DCMAKE_BUILD_TYPE=Release",
				"-DBUILD_GTK_TESTS=OFF",
				"-DBUILD_QT5_TESTS=OFF",
				"-DBUILD_CPP_TESTS=OFF",
				"-DENABLE_GLIB=OFF"
			],
			"sources": [
				{
					"type": "archive",
					"url": "https://poppler.freedesktop.org/poppler-0.45.0.tar.xz",
					"sha256": "96dd1a6024bcdaa4530a3b49687db3d5c24ddfd072ccb37c6de0e42599728798"
				}
			]
		},
		{
			"name": "engauge",
			"build-options": {
				"env": {
					"FFTW_HOME": "/app",
					"LOG4CPP_HOME": "/app"
				}
			},
			"buildsystem": "simple",
			"sources": [
				{
					"type": "archive",
					"url": "https://github.com/markummitchell/engauge-digitizer/archive/v10.4.tar.gz",
					"sha256": "e210daec4a1ec917f1cf25f77d6dd22f7479f4c0c5287e57cbd766145df4f336"
				}
			],
			"build-commands": [
				"qmake CONFIG=release",
				"make",
				"install -D -m 755 bin/engauge /app/bin/engauge",
				"install -D -m 644 dev/engauge-digitizer.desktop /app/share/applications/engauge-digitizer.desktop",
				"install -D -m 644 dev/gnome/engauge-digitizer.appdata.xml /app/share/metainfo/engauge-digitizer.appdata.xml",
				"install -D -m 644 src/img/engauge-digitizer.svg /app/share/icons/hicolor/scalable/apps/engauge-digitizer.svg"
			]
		}
	]
}
