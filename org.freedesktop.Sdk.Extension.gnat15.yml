# SPDX-FileCopyrightText: 2025 Junde Yhi <junde@yhi.moe>
# SPDX-License-Identifier: CC0-1.0

id: org.freedesktop.Sdk.Extension.gnat15
branch: '24.08'
runtime: org.freedesktop.Sdk
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
build-extension: true
separate-locales: false
modules:
  - name: gnat
    buildsystem: simple
    build-commands:
      - cp -R * "${FLATPAK_DEST}"
    sources:
      - only-arches:
          - aarch64
        type: archive
        url: https://github.com/alire-project/GNAT-FSF-builds/releases/download/gnat-15.1.0-2/gnat-aarch64-linux-15.1.0-2.tar.gz
        sha256: 058fc2ee214952dc14c0ae7b0fb932e0afcd09854822ce806e3436bfb9547cbb
      - only-arches:
          - x86_64
        type: archive
        url: https://github.com/alire-project/GNAT-FSF-builds/releases/download/gnat-15.1.0-2/gnat-x86_64-linux-15.1.0-2.tar.gz
        sha256: f0e902c010158a79d04c06d3aee5b5999875d9b4c66c876009deffcaa3639df3

  - name: gnatprove
    buildsystem: simple
    build-commands:
      - cp -R * "${FLATPAK_DEST}"
    sources:
      - only-arches:
          - aarch64
        type: archive
        url: https://github.com/alire-project/GNAT-FSF-builds/releases/download/gnatprove-15.1.0-1/gnatprove-aarch64-darwin-15.1.0-1.tar.gz
        sha256: a4a9bb7cb0d6a80c422e9e490aa337d8b1ae7b68079be19724761ce3404a5c1a
      - only-arches:
          - x86_64
        type: archive
        url: https://github.com/alire-project/GNAT-FSF-builds/releases/download/gnatprove-15.1.0-1/gnatprove-x86_64-linux-15.1.0-1.tar.gz
        sha256: aad9a73f600d3008f33141a6cd4c5314d4c210e8928edc172c23c76104ddf7b2

  - name: gprbuild
    buildsystem: simple
    build-commands:
      - cp -R * "${FLATPAK_DEST}"
    sources:
      - only-arches:
          - aarch64
        type: archive
        url: https://github.com/alire-project/GNAT-FSF-builds/releases/download/gprbuild-25.0.0-1/gprbuild-aarch64-linux-25.0.0-1.tar.gz
        sha256: 5e58c08eb6d0bd15f98654777a53fbb1e4329e38fec7074de08429989850562b
      - only-arches:
          - x86_64
        type: archive
        url: https://github.com/alire-project/GNAT-FSF-builds/releases/download/gprbuild-25.0.0-1/gprbuild-x86_64-linux-25.0.0-1.tar.gz
        sha256: 9a2e6cfb9c4add85c7c411e95533c46728aae7de19a9a0b056abf53bd9795b0d

  - name: alire
    buildsystem: simple
    build-commands:
      - install -Dm755 -t "${FLATPAK_DEST}/bin" alr
    sources:
      - only-arches:
          - aarch64
        type: archive
        url: https://github.com/alire-project/alire/releases/download/v2.1.0/alr-2.1.0-bin-aarch64-linux.zip
        sha256: 5d4d711e2ae347532c931212b9aeca9eba1d9ab87d6d819c262bb2c5d423d363
      - only-arches:
          - x86_64
        type: archive
        url: https://github.com/alire-project/alire/releases/download/v2.1.0/alr-2.1.0-bin-x86_64-linux.zip
        sha256: e3b32cb0afe981b23d1a68da77452cf81ee1d82de8ebaf01c5e233be8b463fbe

  - name: enable-sh
    buildsystem: simple
    build-commands:
      - install -Dm755 -t "${FLATPAK_DEST}" enable.sh
    sources:
      - type: file
        path: enable.sh.in
      - type: shell
        commands:
          - sed -e "s,@FLATPAK_DEST@,${FLATPAK_DEST},g" < enable.sh.in > enable.sh

  - name: metadata
    buildsystem: simple
    build-commands:
      - install -Dm644 -t "${FLATPAK_DEST}/share/metainfo" org.freedesktop.Sdk.Extension.gnat15.metainfo.xml
    sources:
      - type: file
        path: org.freedesktop.Sdk.Extension.gnat15.metainfo.xml
