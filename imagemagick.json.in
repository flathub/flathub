{
    "name": "imagemagick",
    // remove configure script to run autoreconf
    //"rm-configure": true,
    //"no-autogen": true,
    // Do *NOT* use parallel make, this causes PerlMagick to be silently misbuild
    "no-parallel-make": true,
    "config-opts": [
        "--enable-shared",
        "--disable-static",
        "--with-modules",
        //"--with-perl",
        "--with-x",
        "--with-threads",
        "--with-magick_plus_plus",
        "--with-gslib",
        "--with-wmf",
        "--with-webp",
        "--with-openexr",
        "--with-rsvg",
        "--with-xml",
        //"--with-perl-options=\"INSTALLDIRS=vendor CC='gcc -L$PWD/magick/.libs' LDDLFLAGS='-shared -L$PWD/magick/.libs'\"",
        //"--without-dps",
        //"--without-gcc-arch",
        "--with-jbig",
        "--with-openjp2",
        // We don't need it after complete build
        "--prefix=/app/opt/imagemagick",
        "--exec-prefix=/app/opt/imagemagick"
    ],
    "sources": [
        {
            // Source0
            "type": "archive",
            //"url": "https://www.imagemagick.org/download/ImageMagick-6.9.9-41.tar.xz",
            //"sha256": "35b52173c240f81654368a5c453614f572fcb44132531a8fa4538e2d304adfd3"
            //"url": "https://www.imagemagick.org/download/ImageMagick-6.9.9-42.tar.xz",
            //"sha256": "873654cd55792cdaa9c3ee35f63e389fedfb3d34685a1f77d6b81e5c578ae527"
            //"url": "https://www.imagemagick.org/download/ImageMagick-6.9.9-43.tar.xz",
            //"sha256": "66c2937728ae3f385d84691a360d74993675f43ae16236773daa3a49c3ea6e27"
            //"url": "https://www.imagemagick.org/download/ImageMagick-6.9.9-44.tar.xz",
            //"sha256": "4de6340f22563d80b93ee22b799c023d3a816d59be0b2fea8dd6ebc7b8fd4c7f"
            "url": "https://www.imagemagick.org/download/ImageMagick-6.9.10-3.tar.xz",
            "sha256": "92d15a4b617583998ce10dfa7aa85da2c5c216b4052a2d454aa50d07ee1e585a"
        },
        {
            // Patch0
            "type": "patch",
            "path": "ImageMagick-6.9.9-3-multiarch-implicit-pkgconfig-dir.patch",
            "strip-components": 1,
            "sha256": "80eea73e19a47cdb322d9006d4fe4a868db0d0d43fd7a0c9ae1a5e2fbbdbfe4b"
        },
        {
            "type": "shell",
            "commands": [
                "echo 'copy examples';",
                "mkdir 'Magick++/examples'; cp -p Magick++/demo/*.cpp Magick++/demo/*.miff Magick++/examples;"
            ]
        }
    ],
    "post-install": [
        "echo 'post-install: docs';",
        "install -d '/app/opt/imagemagick/share/doc/imagemagick'; install -p -m 0644 'AUTHORS.txt' 'ChangeLog' 'Install-mac.txt' 'Install-unix.txt' 'Install-vms.txt' 'Install-windows.txt' 'NEWS.txt' 'NOTICE' 'Platforms.txt' 'README.txt' 'QuickStart.txt' '/app/opt/imagemagick/share/doc/imagemagick/';",
        //"install -d '/app/share/doc/imagemagick'; install -p -m 0644 'AUTHORS.txt' 'ChangeLog' 'Install-mac.txt' 'Install-unix.txt' 'Install-vms.txt' 'Install-windows.txt' 'NEWS.txt' 'NOTICE' 'Platforms.txt' 'README.txt' 'QuickStart.txt' '/app/share/doc/imagemagick/';",
        "install -d '/app/opt/imagemagick/share/doc/imagemagick/Magick++'; install -p -m 0644 'Magick++/AUTHORS' 'Magick++/ChangeLog' 'Magick++/NEWS' 'Magick++/README' '/app/opt/imagemagick/share/doc/imagemagick/Magick++/';",
        //"install -d '/app/share/doc/imagemagick/Magick++'; install -p -m 0644 'Magick++/AUTHORS' 'Magick++/ChangeLog' 'Magick++/NEWS' 'Magick++/README' '/app/share/doc/imagemagick/Magick++/';",
        "install -d '/app/opt/imagemagick/share/doc/imagemagick/Magick++/examples'; install -p -m 0644 Magick++/examples/* '/app/opt/imagemagick/share/doc/imagemagick/Magick++/examples/';",
        //"install -d '/app/share/doc/imagemagick/Magick++/examples'; install -p -m 0644 Magick++/examples/* '/app/share/doc/imagemagick/Magick++/examples/';",
        "echo 'post-install: licenses';",
        "install -d '/app/opt/imagemagick/share/licenses/imagemagick'; install -p -m 0644 'LICENSE' '/app/opt/imagemagick/share/licenses/imagemagick/';",
        //"install -d '/app/share/licenses/imagemagick'; install -p -m 0644 'LICENSE' '/app/share/licenses/imagemagick/';",
        "install -d '/app/opt/imagemagick/share/licenses/imagemagick/Magick++'; install -p -m 0644 'www/Magick++/COPYING' '/app/opt/imagemagick/share/licenses/imagemagick/Magick++/';"
        //"install -d '/app/share/licenses/imagemagick/Magick++'; install -p -m 0644 'www/Magick++/COPYING' '/app/share/licenses/imagemagick/Magick++/';"
    ],
    "cleanup": [
        "/opt/imagemagick/share/doc",
        //"/share/doc",
        "/opt/imagemagick/share/man"
        //"/share/man"
    ]
}
