id: io.github.abhyanshac.smartcamera_omsjsr
runtime: org.gnome.Platform
runtime-version: '48'
sdk: org.gnome.Sdk

command: smartcamera

finish-args:
  - --env=FLATPAK_APP_DIR=/app
  - --share=network
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri

modules:
  - name: bundle
    buildsystem: simple
    post-install:
      - install -Dm0644 LICENSE -t ${FLATPAK_DEST}/share/licenses/$FLATPAK_ID/my-module
    build-commands:
      - install -Dm755 smartcamera /app/bin/smartcamera
      - install -Dm644 io.github.abhyanshac.smartcamera_omsjsr.desktop /app/share/applications/io.github.abhyanshac.smartcamera_omsjsr.desktop
      - install -Dm644 io.github.abhyanshac.smartcamera_omsjsr.metainfo.xml /app/share/metainfo/io.github.abhyanshac.smartcamera_omsjsr.metainfo.xml
      - install -Dm644 icons/hicolor/scalable/io.github.abhyanshac.smartcamera_omsjsr.svg /app/share/icons/hicolor/scalable/apps/io.github.abhyanshac.smartcamera_omsjsr.svg
      - install -Dm644 screenshots/image1.png /app/share/screenshots/image1.png
      - install -Dm644 screenshots/image2.png /app/share/screenshots/image2.png
      - cp -r lib /app/bin/lib
      - cp -r data /app/bin/data
      - cp run.sh /app/bin/run.sh
    sources:
      - type: dir
        path: .
      - type: archive
        url: https://github.com/abhyanshac/smartcamera_omsjsr/releases/download/release/myapp.tar.gz
        sha256: f8cc7f143a13adb5a895c539313f8163ba66e2ac59aa3589c782bcf5be130d8f
  - name: shiboken6
    buildsystem: simple
    build-commands:
      - pip3 install --no-deps --prefix=/app shiboken6-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/ea/09/4ffa3284a17b6b765d45b41c9a7f1b2cde6c617c853ac6f170fb62bbbece/shiboken6-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
        sha256: e612734da515d683696980107cdc0396a3ae0f07b059f0f422ec8a2333810234
        only-arches:
          - x86_64
  - name: pyside6
    buildsystem: simple
    build-commands:
      - pip3 install --no-deps --prefix=/app pyside6-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/4e/76/0961c8c5653ecb60a6881b649dcb6b71a6be5bd1c8d441ecc48ac7f50b1a/pyside6-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
        sha256: ae8c3c8339cd7c3c9faa7cc5c52670dcc8662ccf4b63a6fed61c6345b90c4c01
        only-arches:
          - x86_64
  - name: pyside6_addons
    buildsystem: simple
    build-commands:
      - pip3 install --no-deps --prefix=/app pyside6_addons-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/b7/b8/d129210f2c7366b4e1bf5bb6230be42052b29e8ba1b1d7db6ef333cf5a39/pyside6_addons-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
        sha256: 08d4ed46c4c9a353a9eb84134678f8fdd4ce17fb8cce2b3686172a7575025464
        only-arches:
          - x86_64
  - name: pyside6_essentials
    buildsystem: simple
    build-commands:
      - pip3 install --no-deps --prefix=/app pyside6_essentials-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/5c/75/e17efc7eb900993e0e3925885635c6cf373c817196f09bcbcc102b00ac94/pyside6_essentials-6.10.0-cp39-abi3-manylinux_2_34_x86_64.whl
        sha256: 1d5e013a8698e37ab8ef360e6960794eb5ef20832a8d562e649b8c5a0574b2d8
        only-arches:
          - x86_64