{
    "app-id": "com.visualstudio.code-oss",
    "branch": "stable",
    "base": "io.atom.electron.BaseApp",
    "base-version": "stable",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "1.6",
    "sdk": "org.freedesktop.Sdk",
    "command": "code-oss",
    "separate-locales": false,
    "finish-args": [
        "--share=ipc",
        "--socket=x11",
        "--socket=pulseaudio",
        "--share=network",
        "--device=dri",
        "--filesystem=host",
        "--persist=.vscode-oss",
        "--talk-name=org.freedesktop.Notifications"
    ],
    "modules": [
        {
            "name": "imagemagick",
            "config-opts": [
                "--enable-static=no",
                "--with-modules",
                "--disable-docs",
                "--disable-deprecated",
                "--without-autotrace",
                "--without-bzlib",
                "--without-djvu",
                "--without-dps",
                "--without-fftw",
                "--without-fontconfig",
                "--without-fpx",
                "--without-freetype",
                "--without-gvc",
                "--without-jbig",
                "--without-jpeg",
                "--without-lcms",
                "--without-lzma",
                "--without-magick-plus-plus",
                "--without-openexr",
                "--without-openjp2",
                "--without-pango",
                "--without-raqm",
                "--without-tiff",
                "--without-webp",
                "--without-wmf",
                "--without-x",
                "--without-xml",
                "--without-zlib"
            ],
            "cleanup": [
                "/"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/ImageMagick/ImageMagick.git",
                    "tag": "7.0.7-23",
                    "commit": "3278fc22854db6236bcac95c963f0460b247a778"
                }
            ]
        },
        {
            "name": "libsecret",
            "config-opts": [
                "--disable-manpages",
                "--disable-gtk-doc",
                "--disable-static",
                "--disable-introspection"
            ],
            "cleanup": [
                "/bin",
                "/include",
                "/lib/pkgconfig",
                "/share/gtk-doc",
                "*.la"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/GNOME/libsecret.git",
                    "tag": "0.18.5",
                    "commit": "0c468b56b074d8b8cf29e58f3c488f12161a3969"
                }
            ]
        },
        {
            "name": "libxkbfile",
            "cleanup": [
                "/include",
                "/lib/*.la",
                "/lib/pkgconfig"
            ],
            "config-opts": [
                "--disable-static"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/freedesktop/libxkbfile.git",
                    "tag": "libxkbfile-1.0.9",
                    "commit": "de4f2307448583988a55a587cb6a3f43e4868378"
                }
            ]
        },
        {
            "name": "nodejs",
            "cleanup": [
                "/"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/nodejs/node.git",
                    "tag": "v8.9.1",
                    "commit": "48813dee2794e2f6993b72655a8dbd3011a908ab"
                }
            ]
        },
        {
            "name": "vscode",
            "buildsystem": "simple",
            "build-commands": [
                "bash build.sh",
                "install -Dm644 vscode/resources/linux/code.png /app/share/icons/hicolor/1024x1024/apps/com.visualstudio.code-oss.png",
                "for resolution in 512x512 256x256 128x128 64x64; do magick convert vscode/resources/linux/code.png -resize $resolution $resolution.png; install -Dm644 $resolution.png /app/share/icons/hicolor/$resolution/apps/com.visualstudio.code-oss.png; done",
                "install -Dm644 com.visualstudio.code-oss.appdata.xml /app/share/appdata/com.visualstudio.code-oss.appdata.xml",
                "install -Dm644 com.visualstudio.code-oss.desktop /app/share/applications/com.visualstudio.code-oss.desktop"
            ],
            "cleanup": [],
            "sources": [
                {
                    "type": "file",
                    "url": "https://github.com/yarnpkg/yarn/releases/download/v1.3.2/yarn-1.3.2.js",
                    "sha512": "f2d0a882f03b4f6ec7562558dca92a8120a921ca23b55f2aee576c3440fb7cdef9fd77672394888fcf1e9cd49c46a3d1d652b63c770976aad8cd388cc2a66459",
                    "dest": ".bin",
                    "dest-filename": "yarn.js"
                },
                {
                    "type": "file",
                    "url": "https://atom.io/download/electron/v1.7.9/iojs-v1.7.9.tar.gz",
                    "sha512": "527d00969e2b88cb0c8fbf74c293fb65065d5a7a1139672c53340765ca83692c0a61e604ec3de74667ebde556378ba854e3230565883b0efb503d066c3dff851",
                    "dest": "misc"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.0/mksnapshot-v1.7.0-linux-x64.zip",
                    "sha256": "b704ae94e3f7ac0aed48e7996897a020f710b2f36f7ade3a23ed3e5e8ea77a68",
                    "only-arches": [
                        "x86_64"
                    ],
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.0/mksnapshot-v1.7.0-linux-ia32.zip",
                    "sha256": "182cf7c6502f134ade59f1ad6a9875ce924e34d234c572b8b59f6fb7eef66da0",
                    "only-arches": [
                        "i386"
                    ],
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.0/chromedriver-v1.7.0-linux-x64.zip",
                    "sha256": "6333e74cad28d4442ad222e580c5855818ebeda373b7d3470eb09f2e726b109b",
                    "only-arches": [
                        "x86_64"
                    ],
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.0/chromedriver-v1.7.0-linux-ia32.zip",
                    "sha256": "a148ec7a92675569e38969011b288a07026edc50a1208fc7e5114b8bd2b1693f",
                    "only-arches": [
                        "i386"
                    ],
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "path": "SHASUMS256.txt-1.7.0",
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.7/electron-v1.7.7-linux-x64.zip",
                    "sha256": "f11656852b19de736f38fe7c29cb58d77086d599603fb7fafca93f24f8a7a84a",
                    "only-arches": [
                        "x86_64"
                    ],
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.7/electron-v1.7.7-linux-ia32.zip",
                    "sha256": "dad58481c25549e188bd3c9a0ad8e64bde399d8fd14be4138f5e25a9cc819e33",
                    "only-arches": [
                        "i386"
                    ],
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "path": "SHASUMS256.txt-1.7.7",
                    "dest": ".electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.9/electron-v1.7.9-linux-x64.zip",
                    "sha256": "4e643b83db0860d6da657842845496c01f93473242b6d24193bc1a314c07319e",
                    "only-arches": [
                        "x86_64"
                    ],
                    "dest": "gulp-electron-cache/atom/electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.9/electron-v1.7.9-linux-ia32.zip",
                    "sha256": "2c4f41021fb77608503f34679d652d70b864f47b415d54c71fe9d588e1b10755",
                    "only-arches": [
                        "i386"
                    ],
                    "dest": "gulp-electron-cache/atom/electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.9/ffmpeg-v1.7.9-linux-x64.zip",
                    "sha256": "a65d7e7655247d45cf5dc2de7f4e988c43e99946014a70783d2d44cf4a8e546a",
                    "only-arches": [
                        "x86_64"
                    ],
                    "dest": "gulp-electron-cache/atom/electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/electron/electron/releases/download/v1.7.9/ffmpeg-v1.7.9-linux-ia32.zip",
                    "sha256": "a8ea0d217230bf01a6cb4b256311a81947b3d4607bc1c226d42fdcbbdfbf9d88",
                    "only-arches": [
                        "i386"
                    ],
                    "dest": "gulp-electron-cache/atom/electron"
                },
                {
                    "type": "file",
                    "url": "https://github.com/roblourens/ripgrep/releases/download/0.7.1-patch.0/ripgrep-0.7.1-patch.0-linux-x64.zip",
                    "sha512": "d6a47e0f25fde5650e99989b2ee8a1e594347492e2e6193722b785f5435d202a0836eb6f7c906720c13a7e98731712f108959a25dcad35c709e8f36a0fe63ba6",
                    "only-arches": [
                        "x86_64"
                    ],
                    "dest": "misc"
                },
                {
                    "type": "file",
                    "url": "https://github.com/roblourens/ripgrep/releases/download/0.7.1-patch.0/ripgrep-0.7.1-patch.0-linux-ia32.zip",
                    "sha512": "559063b56d17d1b7dfaddedf4b1fefd12549360ff2fd8acfe0d576f55974190d0eee14998549eac1ed758c34ea2cb40cb810f623454f976065f92c3b32160db1",
                    "only-arches": [
                        "i386"
                    ],
                    "dest": "misc"
                },
                "generated-sources.json",
                {
                    "type": "git",
                    "url": "https://github.com/Microsoft/vscode.git",
                    "tag": "1.20.1",
                    "commit": "f88bbf9137d24d36d968ea6b2911786bfe103002",
                    "dest": "vscode",
                    "disable-shallow-clone": true
                },
                {
                    "type": "file",
                    "path": "com.visualstudio.code-oss.appdata.xml"
                },
                {
                    "type": "file",
                    "path": "com.visualstudio.code-oss.desktop"
                },
                {
                    "type": "file",
                    "path": "build.sh"
                }
            ]
        }
    ]
}
