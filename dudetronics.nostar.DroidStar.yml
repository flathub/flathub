app-id: dudetronics.nostar.DroidStar
runtime: org.kde.Platform
runtime-version: 5.15-22.08
sdk: org.kde.Sdk
command: DroidStar

finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --device=all
  - --socket=pulseaudio
  - --share=network

cleanup:
  - /man
  - /include
  - /share/man
  - /share/doc
  - /doc
  - '*.a'
  - '*.la'

modules:
  - shared-modules/libusb/libusb.json
  - shared-modules/linux-audio/fftw3f.json

  - name: imbe_vocoder
    sources:
      - type: git
        url: https://github.com/nostar/imbe_vocoder.git
        commit: 03423cb00b8e9ba1be164493e8b98b5bd7c1508c

  - name: DroidStar
    sources:
      - type: git
        url: https://github.com/nostar/DroidStar.git
        commit: 2f695e63eb5a1064897198abdd65de0eaf30ca1f
      - type: files
        path: dudetronics.nostar.DroidStar.metainfo.xml
      - type: files
        path: org.tech.JTDX.desktop
        - type: files
        path: org.tech.JTDX.png
    buildsystem: qmake
    post-install:
      - install -D dudetronics.nostar.DroidStar.metainfo.xml /app/share/metainfo/dudetronics.nostar.DroidStar.metainfo.xml
      - install -Dm644 org.tech.JTDX.png /app/share/icons/hicolor/128x128/apps/org.tech.JTDX.png
   
      
