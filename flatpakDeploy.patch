From 47d13a9d12d378bd4aea4813dbb6cb0c3d8eb49a Mon Sep 17 00:00:00 2001
From: Chris Rizzitello <sithlord48@gmail.com>
Date: Wed, 1 Mar 2023 09:02:17 -0500
Subject: [PATCH] install items in Flatpak Name for flatpak Packages

---
 deploy/CMakeLists.txt                                     | 8 ++++----
 ....desktop => io.github.sithlord48.blackchocobo.desktop} | 2 +-
 ...xml => io.github.sithlord48.blackchocobo.metadata.xml} | 6 +++---
 ...kchocobo.xml => io.github.sithlord48.blackchocobo.xml} | 4 ++--
 5 files changed, 11 insertions(+), 11 deletions(-)
 rename deploy/{org.sithlord48.blackchocobo.desktop => io.github.sithlord48.blackchocobo.desktop} (94%)
 rename deploy/{blackchocobo.appdata.xml => io.github.sithlord48.blackchocobo.metadata.xml} (84%)
 rename deploy/{blackchocobo.xml => io.github.sithlord48.blackchocobo.xml} (78%)
 
diff --git a/deploy/CMakeLists.txt b/deploy/CMakeLists.txt
index 515fe9e..24a1d37 100644
--- a/deploy/CMakeLists.txt
+++ b/deploy/CMakeLists.txt
@@ -1,8 +1,8 @@
 if(UNIX AND NOT APPLE)
-    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/blackchocobo.png DESTINATION share/pixmaps/)
-    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/org.sithlord48.blackchocobo.desktop DESTINATION share/applications/)
-    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/blackchocobo.xml DESTINATION share/mime/packages/)
-    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/blackchocobo.appdata.xml DESTINATION share/metainfo/)
+    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/blackchocobo.png DESTINATION share/icons/hicolor/512x512/apps/ RENAME io.github.sithlord48.blackchocobo.png)
+    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/io.github.sithlord48.blackchocobo.desktop DESTINATION share/applications/)
+    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/io.github.sithlord48.blackchocobo.xml DESTINATION share/mime/packages/)
+    install(FILES ${CMAKE_CURRENT_SOURCE_DIR}/io.github.sithlord48.blackchocobo.metadata.xml DESTINATION share/metainfo/ RENAME io.github.sithlord48/blackchocobo.metainfo.xml)
 elseif(WIN32)
     configure_file(${CMAKE_CURRENT_SOURCE_DIR}/blackchocobo.rc.in ${CMAKE_CURRENT_BINARY_DIR}/blackchocobo.rc @ONLY)
 endif()
diff --git a/deploy/org.sithlord48.blackchocobo.desktop b/deploy/io.github.sithlord48.blackchocobo.desktop
similarity index 94%
rename from deploy/org.sithlord48.blackchocobo.desktop
rename to deploy/io.github.sithlord48.blackchocobo.desktop
index 59b0dc8..8c34c89 100644
--- a/deploy/org.sithlord48.blackchocobo.desktop
+++ b/deploy/io.github.sithlord48.blackchocobo.desktop
@@ -9,7 +9,7 @@ GenericName[fr]=Éditeur de sauvegardes FF7
 GenericName[it]=FF7 Salva l'editor di gioco
 GenericName[ja]=FF7 ゲームエディタを保存
 GenericName[pl]=FF7 Edytor zapisu gry
-Icon=blackchocobo
+Icon=io.github.sithlord48.blackchocobo
 MimeType=application/x-ff7PCSave;application/x-ff7SwitchSave;
 Name=Black Chocobo
 Name[de]=Schwarzer Chocobo
diff --git a/deploy/blackchocobo.appdata.xml b/deploy/io.github.sithlord48.blackchocobo.metadata.xml
similarity index 84%
rename from deploy/blackchocobo.appdata.xml
rename to deploy/io.github.sithlord48.blackchocobo.metadata.xml
index cb487b4..60d7f20 100644
--- a/deploy/blackchocobo.appdata.xml
+++ b/deploy/io.github.sithlord48.blackchocobo.metadata.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <component type="desktop-application">
-	<id>org.sithlord48.blackchocobo</id>
+	<id>io.github.sithlord48.blackchocobo</id>
 	<metadata_license>CC0-1.0</metadata_license>
 	<project_license>GPL-3.0+</project_license>
 	<name>Black Chocobo</name>
@@ -14,7 +14,7 @@
 			Supports PC (98 + Steam), Emulators, PS3, PSP/ PsVita and Switch versions.
 		</p>
 	</description>
-	<launchable type="desktop-id">blackchocobo.desktop</launchable>
+	<launchable type="desktop-id">io.github.sithlord48.blackchocobo.desktop</launchable>
 	<url type="homepage">https://github.com/sithlord48/blackchocobo</url>
 	<url type="bugtracker">https://github.com/sithlord48/blackchocobo/issues</url>
 	<url type="donation">http://sourceforge.net/p/blackchocobo/donate/</url>
@@ -24,6 +24,6 @@
 		</screenshot>
 	</screenshots>
 	<provides>
-		<id>org.sithlord48.blackchocobo.desktop</id>
+		<id>io.github.sithlord48.blackchocobo.desktop</id>
 	</provides>
 </component>
diff --git a/deploy/blackchocobo.xml b/deploy/io.github.sithlord48.blackchocobo.xml
similarity index 78%
rename from deploy/blackchocobo.xml
rename to deploy/io.github.sithlord48.blackchocobo.xml
index f9d0481..6780415 100644
--- a/deploy/blackchocobo.xml
+++ b/deploy/io.github.sithlord48.blackchocobo.xml
@@ -2,12 +2,12 @@
   <mime-info xmlns="http://www.freedesktop.org/standards/shared-mime-info">
     <mime-type type="application/x-ff7PCSave">
       <comment>FF7 PC Save File</comment>
-      <icon name="/usr/share/pixmaps/blackchocobo.png"/>
+      <icon name="io.github.sithlord48.blackchocobo"/>
       <glob pattern="*.ff7"/>
     </mime-type>
     <mime-type type="application/x-ff7SwitchSave">
       <comment>FF7 Switch Save File</comment>
-      <icon name="/usr/share/pixmaps/blackchocobo.png"/>
+      <icon name="io.github.sithlord48.blackchocobo"/>
       <glob pattern="ff7slot*"/>
     </mime-type>
 </mime-info>
-- 
2.39.2

