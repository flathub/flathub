id: org.mythtv.MythTV
runtime: org.kde.Platform
runtime-version: '6.8'
sdk: org.kde.Sdk
command: mythfrontend
finish-args:
  - --device=all
  - --persist=.mythtv
  - --filesystem=home/.mythtv
  - --share=network
  - --share=ipc
  - --socket=fallback-x11
  - --socket=pulseaudio
  - --socket=wayland
  - --allow=bluetooth
modules:
  - name: soundtouch
    sources:
      - type: git
        url: https://codeberg.org/soundtouch/soundtouch.git
        tag: 2.3.3
        commit: e83424d5928ab8513d2d082779c275765dee31b9
    buildsystem: cmake
    config-opts:
      - -DBUILD_SHARED_LIBS=ON
      - -DSOUNDSTRETCH=OFF
      - -DSOUNDTOUCH_DLL=OFF
    cleanup:
      - /include/soundtouch
      - /lib/cmake
      - /lib/pkgconfig

  - name: libbluray
    sources:
      - type: git
        url: https://code.videolan.org/videolan/libbluray.git
        tag: 1.3.4
        commit: bb5bc108ec695889855f06df338958004ff289ef
    config-opts:
      - --disable-static
      - --disable-doxygen-doc
      - --disable-doxygen-dot
      - --disable-doxygen-html
      - --disable-doxygen-ps
      - --disable-doxygen-pdf
      - --disable-examples
      - --disable-bdjava-jar

  - name: libzip
    sources:
      - type: git
        url: https://github.com/nih-at/libzip.git
        tag: v1.11.3
        commit: f30f5290de485348442d168cd7b2eb714d1f20f9
    buildsystem: cmake
    config-opts:
      - -DBUILD_DOC=OFF
      - -DBUILD_EXAMPLES=OFF
      - -DBUILD_TOOLS=OFF
    cleanup:
      - /share/man

  - name: x264
    sources:
      - type: git
        url: https://code.videolan.org/videolan/x264.git
        commit: 373697b467f7cd0af88f1e9e32d4f10540df4687
    config-opts:
      - --disable-cli
      - --enable-shared

  - name: x265
    sources:
      - type: archive
        url: https://bitbucket.org/multicoreware/x265_git/downloads/x265_4.1.tar.gz
        sha256: a31699c6a89806b74b0151e5e6a7df65de4b49050482fe5ebf8a4379d7af8f29
    config-opts:
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DBUILD_SHARED_LIBS=ON
#      - -DENABLE_HDR10_PLUS=ON
    buildsystem: cmake-ninja
    subdir: source
    builddir: true
    cleanup:
      - /lib/libx265.a

  - name: libtirpc
    sources:
      - type: git
        url: git://git.linux-nfs.org/projects/steved/libtirpc.git
        tag: libtirpc-1-3-6
        commit: cf7441f5b90f043308cc34ae8d25127aed844c92
    # autogen.sh not marked as executable, buildsystem: autotools wont work
    buildsystem: simple
    build-commands:
      - chmod +x autogen.sh
      - ./autogen.sh
      - ./configure --prefix=/app --enable-static=no --disable-gssapi
      - make && make install

  - name: mysql
    sources:
      - type: archive
        url: https://archives.boost.io/release/1.77.0/source/boost_1_77_0.tar.bz2
        sha256: fc9f85fc030e233142908241af7a846e60630aa7388de9a5fafb1f3a26840854
        dest: boost
      - type: git
        url: https://github.com/mysql/mysql-server.git
        tag: mysql-8.0.41
        commit: 14ba93991ba6a58a39d2e675b276af56f1079174
    buildsystem: cmake
    # force in source build to find boost archive
    config-opts:
      - -DFORCE_INSOURCE_BUILD=1
      - -DWITHOUT_SERVER=ON
      - -DDOWNLOAD_BOOST=OFF
      - -DWITH_BOOST=boost
      - -DWITH_UNIT_TESTS=OFF

  - name: python3-mysqlclient
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/61/68/810093cb579daae426794bbd9d88aa830fae296e85172d18cb0f0e5dd4bc/mysqlclient-2.2.7.tar.gz
        sha256: 24ae22b59416d5fcce7e99c9d37548350b4565baac82f95e149cac6ce4163845
    buildsystem: simple
    build-options:
      env:
        PATH: /app/bin:/usr/bin
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} mysqlclient

  - name: python3-lxml
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/e7/6b/20c3a4b24751377aaa6307eb230b66701024012c29dd374999cc92983269/lxml-5.3.0.tar.gz
        sha256: 4e109ca30d1edec1ac60cdbe341905dc3b8f55b16855e03a54aaf59e51ec8c6f
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} lxml

  - name: python3-charset-normalizer
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/16/b0/572805e227f01586461c80e0fd25d65a2115599cc9dad142fee4b747c357/charset_normalizer-3.4.1.tar.gz
        sha256: 44251f18cd68a75b56585dd00dae26183e102cd5e0f9f1466e6df5da2ed64ea3
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} charset-normalizer

  - name: python3-flit-core
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/bc/18/b9b81cab2b8f63e6e7f72e1ba2766a0454fcd563e7a77b8299cb917ba805/flit_core-3.11.0.tar.gz
        sha256: 6ceeee3219e9d2ea282041f3e027c441597b450b33007cb81168e887b6113a8f
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} flit-core

  - name: python3-idna
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/f1/70/7703c29685631f5a7590aa73f1f1d3fa9a380e654b86af429e0934a32f7d/idna-3.10.tar.gz
        sha256: 12f65c9b470abda6dc35cf8e63cc574b1c52b11df2c86030af0ac09b01b13ea9
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} idna

  - name: python3-pathspec
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/ca/bc/f35b8446f4531a7cb215605d100cd88b7ac6f44ab3fc94870c120ab3adbf/pathspec-0.12.1.tar.gz
        sha256: a482d51503a1ab33b1c67a6c3813a26953dbdc71c31dacaef9a838c4e29f5712
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} pathspec

  - name: python3-pluggy
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/96/2d/02d4312c973c6050a18b314a5ad0b3210edb65a906f868e31c111dede4a6/pluggy-1.5.0.tar.gz
        sha256: 2cffa88e94fdc978c4c574f15f9e59b7f4201d439195c3715ca9e2486f1d0cf1
    buildsystem: simple
    build-commands:
      - pip3 install --use-deprecated=legacy-resolver --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} pluggy
      - mv /app/lib/python3.12/site-packages/pluggy-0.0.0.dist-info /app/lib/python3.12/site-packages/pluggy-1.5.0.dist-info

  - name: python3-trove-classifiers
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/20/f0/154e82f3ad7c3496828aa8c12226eef5998dd05404f955ad698af8d19bb1/trove_classifiers-2025.3.13.13.tar.gz
        sha256: 2a5e24ddafb20da2225a825fe167c4fd4ecbf312cef4310d67f19dc40da7dc8d
    buildsystem: simple
    build-commands:
      - pip3 install --use-deprecated=legacy-resolver --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} trove-classifiers

  - name: python3-hatchling
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/8f/8a/cc1debe3514da292094f1c3a700e4ca25442489731ef7c0814358816bb03/hatchling-1.27.0.tar.gz
        sha256: 971c296d9819abb3811112fc52c7a9751c8d381898f36533bb16f9791e941fd6
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} hatchling

  - name: python3-setuptools-scm
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/4b/bd/c5d16dd95900567e09744af92119da7abc5f447320d53ec1d9415ec30263/setuptools_scm-8.2.0.tar.gz
        sha256: a18396a1bc0219c974d1a74612b11f9dce0d5bd8b1dc55c65f6ac7fd609e8c28
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} setuptools-scm

  - name: python3-hatch-vcs
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/f5/c9/54bb4fa27b4e4a014ef3bb17710cdf692b3aa2cbc7953da885f1bf7e06ea/hatch_vcs-0.4.0.tar.gz
        sha256: 093810748fe01db0d451fabcf2c1ac2688caefd232d4ede967090b1c1b07d9f7
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} hatch-vcs

  - name: python3-urllib3
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/aa/63/e53da845320b757bf29ef6a9062f5c669fe997973f966045cb019c3f4b66/urllib3-2.3.0.tar.gz
        sha256: f8c5449b3cf0861679ce7e0503c7b44b5ec981bec0d1d3795a07f1ba96f0204d
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} urllib3

  - name: python3-certifi
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/1c/ab/c9f1e32b7b1bf505bf26f0ef697775960db7932abeb7b516de930ba2705f/certifi-2025.1.31.tar.gz
        sha256: 3d5da6925056f6f18f119200434a4780a94263f10d1c21d032a6f6b2baa20651
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} certifi

  - name: python3-requests
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/63/70/2bf7780ad2d390a8d301ad0b550f1581eadbd9a20f896afe06353c2a2913/requests-2.32.3.tar.gz
        sha256: 55365417734eb18255590a9ff9eb97e9e1da868d4ccd6402399eaf68af20a760
    buildsystem: simple
    build-commands:
      - pip3 install --no-index --no-build-isolation --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} requests

  - name: perl
    sources:
      - type: archive
        url: https://www.cpan.org/src/5.0/perl-5.40.1.tar.gz
        sha256: 02f8c45bb379ed0c3de7514fad48c714fd46be8f0b536bfd5320050165a1ee26
    buildsystem: simple
    build-commands:
      - ./Configure -des -Dprefix=/app
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-DBI
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/H/HM/HMBRAND/DBI-1.647.tgz
        sha256: 0df16af8e5b3225a68b7b592ab531004ddb35a9682b50300ce50174ad867d9aa
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Capture-Tiny
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/D/DA/DAGOLDEN/Capture-Tiny-0.50.tar.gz
        sha256: ca6e8d7ce7471c2be54e1009f64c367d7ee233a2894cacf52ebe6f53b04e81e5
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Mock-Config
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/R/RU/RURBAN/Mock-Config-0.04.tar.gz
        sha256: affa28b42a84a087c93ee70769104d80a34ca2e1dc496230cc4caca66f1ea502
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Devel-CheckLib
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/M/MA/MATTN/Devel-CheckLib-1.16.tar.gz
        sha256: 869d38c258e646dcef676609f0dd7ca90f085f56cf6fd7001b019a5d5b831fca
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Try-Tiny
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/E/ET/ETHER/Try-Tiny-0.32.tar.gz
        sha256: ef2d6cab0bad18e3ab1c4e6125cc5f695c7e459899f512451c8fa3ef83fa7fc0
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Test-Deep
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/R/RJ/RJBS/Test-Deep-1.204.tar.gz
        sha256: b6591f6ccdd853c7efc9ff3c5756370403211cffe46047f082b1cd1611a84e5f
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Test-Fatal
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/R/RJ/RJBS/Test-Fatal-0.017.tar.gz
        sha256: 37dfffdafb84b762efe96b02fb2aa41f37026c73e6b83590db76229697f3c4a6
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Test-Needs
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/H/HA/HAARG/Test-Needs-0.002010.tar.gz
        sha256: 923ffdc78fcba96609753e4bae26b0ba0186893de4a63cd5236e012c7c90e208
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Test-Requires
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/T/TO/TOKUHIROM/Test-Requires-0.11.tar.gz
        sha256: 4b88de549597eecddf7c3c38a4d0204a16f59ad804577b671896ac04e24e040f
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Test-RequiresInternet
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/M/MA/MALLEN/Test-RequiresInternet-0.05.tar.gz
        sha256: bba7b32a1cc0d58ce2ec20b200a7347c69631641e8cae8ff4567ad24ef1e833e
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Test-Warnings
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/E/ET/ETHER/Test-Warnings-0.038.tar.gz
        sha256: 3da27e003a3c3cafed3c09b42be05cf9bdbff0bee5c8590a731b02853880a273
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

#  - name: perl-Module-Build-Tiny
#    sources:
#      - type: archive
#        url: https://cpan.metacpan.org/authors/id/L/LE/LEONT/Module-Build-Tiny-0.051.tar.gz
#        sha256: 74fdce35e8cd4d787bc2d4fc1d43a291b7bbced4e94dc5fc592bd81ca93a98e9
#    buildsystem: simple
#    build-options:
#      env:
#        PERL5LIB: /app/lib/perl5
#        PERL_MM_OPT: INSTALL_BASE=/app
#        PERL_MB_OPT: --install_base /app
#    build-commands:
#      - perl Build.PL
#      - make && make install
#      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-DBD-mysql
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/D/DV/DVEEDEN/DBD-mysql-5.011.tar.gz
        sha256: a3a70873ed965b172bff298f285f5d9bbffdcceba73d229b772b4d8b1b3992a1
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-B-COW
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/A/AT/ATOOMIC/B-COW-0.007.tar.gz
        sha256: 1290daf227e8b09889a31cf182e29106f1cf9f1a4e9bf7752f9de92ed1158b44
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Clone
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/A/AT/ATOOMIC/Clone-0.47.tar.gz
        sha256: 4c2c0cb9a483efbf970cb1a75b2ca75b0e18cb84bcb5c09624f86e26b09c211d
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Encode-Locale
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GA/GAAS/Encode-Locale-1.05.tar.gz
        sha256: 176fa02771f542a4efb1dbc2a4c928e8f4391bf4078473bd6040d8f11adb0ec1
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTTP-Date
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/A/AT/ATOOMIC/TimeDate-2.33.tar.gz
        sha256: c0b69c4b039de6f501b0d9f13ec58c86b040c1f7e9b27ef249651c143d605eb2
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTTP-Date
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/HTTP-Date-6.06.tar.gz
        sha256: 7b685191c6acc3e773d1fc02c95ee1f9fae94f77783175f5e78c181cc92d2b52
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-File-Listing
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/P/PL/PLICEASE/File-Listing-6.16.tar.gz
        sha256: 189b3a13fc0a1ba412b9d9ec5901e9e5e444cc746b9f0156d4399370d33655c6
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-IO-HTML
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/C/CJ/CJM/IO-HTML-1.004.tar.gz
        sha256: c87b2df59463bbf2c39596773dfb5c03bde0f7e1051af339f963f58c1cbd8bf5
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-LWP-MediaTypes
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/LWP-MediaTypes-6.04.tar.gz
        sha256: 8f1bca12dab16a1c2a7c03a49c5e58cce41a6fec9519f0aadfba8dad997919d9
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-MIME-Base32
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/R/RE/REHSACK/MIME-Base32-1.303.tar.gz
        sha256: ab21fa99130e33a0aff6cdb596f647e5e565d207d634ba2ef06bdbef50424e99
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;      

  - name: perl-URI
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/URI-5.31.tar.gz
        sha256: b9c4d58b2614b8611ae03a95a6d60ed996f4b311ef3cd5a937b92f1825ecc564
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTTP-Message
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/HTTP-Message-7.00.tar.gz
        sha256: 5afa95eb6ed1c632e81656201a2738e2c1bc6cbfae2f6d82728e2bb0b519c1dc
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;      

  - name: perl-HTTP-Cookies
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/HTTP-Cookies-6.11.tar.gz
        sha256: 8c9a541a4a39f6c0c7e3d0b700b05dfdb830bd490a1b1942a7dedd1b50d9a8c8
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTML-Tagset
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/P/PE/PETDANCE/HTML-Tagset-3.24.tar.gz
        sha256: eb89e145a608ed1f8f141a57472ee5f69e67592a432dcd2e8b1dbb445f2b230b
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTML-Parser
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/HTML-Parser-3.83.tar.gz
        sha256: 7278ce9791256132b26a71a5719451844704bb9674b58302c3486df43584f8c0
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTTP-CookieJar
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/D/DA/DAGOLDEN/HTTP-CookieJar-0.014.tar.gz
        sha256: 7094ea5c91f536d263b85e83ab4e9a963e11c4408ce08ecae553fa9c0cc47e73
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTTP-Daemon
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/HTTP-Daemon-6.16.tar.gz
        sha256: b38d092725e6fa4e0c4dc2a47e157070491bafa0dbe16c78a358e806aa7e173d
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-HTTP-Negotiate
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GA/GAAS/HTTP-Negotiate-6.01.tar.gz
        sha256: 1c729c1ea63100e878405cda7d66f9adfd3ed4f1d6cacaca0ee9152df728e016
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Net-HTTP
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/Net-HTTP-6.23.tar.gz
        sha256: 0d65c09dd6c8589b2ae1118174d3c1a61703b6ecfc14a3442a8c74af65e0c94e
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-WWW-RobotRules
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GA/GAAS/WWW-RobotRules-6.02.tar.gz
        sha256: 46b502e7a288d559429891eeb5d979461dd3ecc6a5c491ead85d165b6e03a51e
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-LWP-UserAgent
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/O/OA/OALDERS/libwww-perl-6.78.tar.gz
        sha256: b738bdcf54e2c6bb81fd2b83ec47bc83347f97b371ea80f0dc10360f817a9a44
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-XML-NamespaceSupport
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/P/PE/PERIGRIN/XML-NamespaceSupport-1.12.tar.gz
        sha256: 47e995859f8dd0413aa3f22d350c4a62da652e854267aa0586ae544ae2bae5ef
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-XML-Parser
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/T/TO/TODDR/XML-Parser-2.47.tar.gz
        sha256: ad4aae643ec784f489b956abe952432871a622d4e2b5c619e8855accbfc4d1d8
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-XML-SAX-Base
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GR/GRANTM/XML-SAX-Base-1.09.tar.gz
        sha256: 66cb355ba4ef47c10ca738bd35999723644386ac853abbeb5132841f5e8a2ad0
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-XML-SAX
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GR/GRANTM/XML-SAX-1.02.tar.gz
        sha256: 4506c387043aa6a77b455f00f57409f3720aa7e553495ab2535263b4ed1ea12a
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-XML-SAX-Expat
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/B/BJ/BJOERN/XML-SAX-Expat-0.51.tar.gz
        sha256: 4c016213d0ce7db2c494e30086b59917b302db8c292dcd21f39deebd9780c83f
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Net-UPnP
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/S/SK/SKONNO/Net-UPnP-1.4.6.tar.gz
        sha256: 10ae135a8f72d399501166bc697a3b300fb739a6614aa54408e4e08bec1e91dc
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Socket6
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/U/UM/UMEMOTO/Socket6-0.29.tar.gz
        sha256: 468915fa3a04dcf6574fc957eff495915e24569434970c91ee8e4e1459fc9114
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-Socket-INET6
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/S/SH/SHLOMIF/IO-Socket-INET6-2.73.tar.gz
        sha256: b6da746853253d5b4ac43191b4f69a4719595ee13a7ca676a8054cf36e6d16bb
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: perl-XML-Simple
    sources:
      - type: archive
        url: https://cpan.metacpan.org/authors/id/G/GR/GRANTM/XML-Simple-2.25.tar.gz
        sha256: 531fddaebea2416743eb5c4fdfab028f502123d9a220405a4100e68fc480dbf8
    buildsystem: simple
    build-options:
      env:
        PERL5LIB: /app/lib/perl5
        PERL_MM_OPT: INSTALL_BASE=/app
        PERL_MB_OPT: --install_base /app
    build-commands:
      - perl Makefile.PL
      - make && make install
      - find /app/lib/perl5 -type f -exec chmod u+w {} \;

  - name: libva
    sources:
      - type: git
        url: https://github.com/intel/libva.git
        tag: 2.22.0
        commit: 217da1c28336d6a7e9c0c4cb8f1c303968a675f1
    buildsystem: meson

  - name: libqsqlmysql
    sources:
      - type: archive
        url: https://download.qt.io/archive/qt/6.8/6.8.2/submodules/qtbase-everywhere-src-6.8.2.tar.xz
        sha256: 012043ce6d411e6e8a91fdc4e05e6bedcfa10fcb1347d3c33908f7fdd10dfe05
    buildsystem: simple
    build-commands:
      - cmake -S src/plugins/sqldrivers -B _flatpak_build -DFEATURE_sql_mysql=ON -DFEATURE_sql_sqlite=OFF
      - cmake --build _flatpak_build
      - cp -r _flatpak_build/lib/plugins /app/lib

#  - name: java

#  - name: ant
#    sources:
#      - type: git
#        url: https://github.com/apache/ant.git
#        tag: rel/1.10.15
#        commit: 92fe5ca29625d30b98704806d6379fe9acb001e3
#    build-options:
#      env:
#        JAVA_HOME: 

  - name: p8-platform
    sources:
      - type: git
        url: https://github.com/Pulse-Eight/platform.git
        commit: 2748be52ae27e6007ef548b697d4a03ff7de4291
    buildsystem: cmake-ninja

  - name: libcec
    sources:
      - type: git
        url: https://github.com/Pulse-Eight/libcec.git
        tag: libcec-7.0.0
        commit: ceeec8bfd2242792b6de59ce8fb854437208dc11
    buildsystem: cmake-ninja

  - name: libhdhomerun
    sources:
      - type: git
        url: https://github.com/Silicondust/libhdhomerun.git
        commit: e8f29fd4e071580ffb583cbeb9cf720c96a4e75f
    buildsystem: simple
    # no make install in makefile
    build-commands:
      - make && make install
      - mkdir -p /app/include/libhdhomerun
      - cp *.h /app/include/libhdhomerun
      - cp libhdhomerun.so /app/lib

  - name: libass
    sources:
      - type: git
        url: https://github.com/libass/libass.git
        tag: 0.17.3
        commit: e46aedea0a0d17da4c4ef49d84b94a7994664ab5

#  - name: mmal
#    sources:
#      - type: git
#        url: https://github.com/raspberrypi/userland.git
#        commit: a54a0dbb2b8dcf9bafdddfc9a9374fb51d97e976
#    buildsystem: cmake
#    subdir: interface/mmal

#  - name: libiec61883
#    sources:
#      - type: git
#        url: https://git.kernel.org/pub/scm/libs/ieee1394/libiec61883.git/
#        tag: v1.2.0
#        commit: 6a7c0bd85c0f4ac2861f96547ab11d0d469f38ca

#  - name: dveo-asi
#    sources:
#      - type: git
#        url: https://github.com/kierank/dveo-linux-master.git
#        commit: 5d62458bb6e13822f59f85eb260e31bb2c7df3a2

#MythBrowser requires QtWebkit.
#MythNetvision requires the MythTV Python bindings (MythTV)
#MythNetvision requires the Python pycurl library (pycurl)
#Disabling MythNetvision due to missing dependencies.
#MythWeather requires Date::Manip
#MythWeather requires XML::XPath
#MythWeather requires Image::Size
#MythWeather requires DateTime::Format::ISO8601
#MythWeather requires SOAP::Lite
#MythWeather requires JSON
#Disabling MythWeather due to missing dependencies.
#MusicBrainz support requires libdiscid.
#Disabling MythZMServer. Requires mysql/mysql.h header
# libcdio        support will not be included in MythMusic

  - name: mythtv
    sources:
      - type: git
        url: https://github.com/MythTV/mythtv.git
        branch: fixes/35
        commit: 30ba688773852d3f8ad44dd7ceb1b6634ca7ea4e
      - type: file
        path: mythtv128x128.png
      - type: file
        path: org.mythtv.MythTV.desktop
      - type: file
        path: org.mythtv.MythTV.metainfo.xml
      - type: patch
        path: libva.patch
    buildsystem: simple
    build-options:
      prepend-pkg-config-path: /app/lib64/pkgconfig
      ldflags: -L/app/lib64
      env:
        PERL5LIB: /app/lib/perl5
    build-commands:
# --enable-bdjava --enable-libxvid
      - cd mythtv && ./configure --prefix=/app --compile-type=release --enable-vulkan --enable-libmp3lame --enable-libx264 --enable-libx265 --enable-libvpx
      - cd mythtv && make && make install
      - cd mythplugins && ./configure --prefix=/app
      - cd mythplugins && make && make install
      - install -Dm 0644 ${FLATPAK_ID}.desktop ${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop
      - install -Dm 0644 ${FLATPAK_ID}.metainfo.xml ${FLATPAK_DEST}/share/metainfo/${FLATPAK_ID}.metainfo.xml
      - install -Dm 0644 mythtv128x128.png ${FLATPAK_DEST}/share/icons/hicolor/128x128/apps/${FLATPAK_ID}.png
