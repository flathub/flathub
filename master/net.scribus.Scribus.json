{
    "id": "net.scribus.Scribus",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.10",
    "sdk": "org.kde.Sdk",
    "command": "scribus",
    "rename-desktop-file": "scribus.desktop",
    "rename-appdata-file": "scribus.appdata.xml",
    "rename-icon": "scribus",
    "tags": [
        "nightly"
    ],
    "desktop-file-name-prefix": "(Nightly) ",
    "finish-args": [
        "--device=dri",
        "--share=ipc",
        "--socket=x11",
        "--socket=pulseaudio",
        "--filesystem=host"
    ],
    "build-options":
    {
        "cflags": "-O2 -g",
        "cxxflags": "-O2 -g",
        "env":
        {
            "V": "1"
        }
    },
    "modules": [
        {
            "name": "podofo",
            "buildsystem": "cmake",
            "config-opts": [
                "-DPODOFO_BUILD_LIB_ONLY=1",
                "-DPODOFO_BUILD_SHARED:BOOL=TRUE",
                "-DPODOFO_BUILD_STATIC:BOOL=FALSE"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/podofo/podofo/0.9.5/podofo-0.9.5.tar.gz",
                    "sha256": "854981cb897ebc14bac854ea0f25305372261a48a205363fe1c61659ba7b5304"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/pkgconfig",
                "/bin"
            ]
        },
        {
            "name": "openscenegraph",
            "disabled": true,
            "buildsystem": "cmake",
            "config-opts": [ "-DLIB_POSTFIX=''", "-DBUILD_OSG_APPLICATIONS=OFF" ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://trac.openscenegraph.org/downloads/developer_releases/OpenSceneGraph-3.4.0.zip",
                    "sha256": "5c727d84755da276adf8c4a4a3a8ba9c9570fc4b4969f06f1d2e9f89b1e3040e"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "graphicsmagick",
            "config-opts": [
                "--enable-shared",
                "--disable-static",
                "--with-modules",
                "--with-quantum-depth=16",
                "--without-jpeg",
                "--without-png",
                "--without-tiff",
                "--without-wmf"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/graphicsmagick/graphicsmagick/1.3.26/GraphicsMagick-1.3.26.tar.xz",
                    "sha256": "fba015f3d5e5d5f17e57db663f1aa9d338e7b62f1d415b85d13ee366927e5f88"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig",
                "/bin",
                "/share/man",
                "/share/doc"
            ]
        },
        {
            "name": "poppler",
            "modules": [
                {
                    "name": "popplerdata",
                    "no-autogen": true,
                    "make-install-args": [
                        "prefix=/app"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://poppler.freedesktop.org/poppler-data-0.4.8.tar.gz",
                            "sha256": "1096a18161f263cccdc6d8a2eb5548c41ff8fcf9a3609243f1b6296abdf72872"
                        }
                    ],
                    "cleanup": [
                        "/share/pkgconfig"
                    ]
                },
                {
                    "name": "openjpeg2",
                    "buildsystem": "cmake",
                    "config-opts": [
                        "-DBUILD\_CODEC:bool=off"
                    ],
                    "sources": [
                        {
                            "type": "archive",
                            "url": "https://github.com/uclouvain/openjpeg/archive/v2.1.2.tar.gz",
                            "sha256": "4ce77b6ef538ef090d9bde1d5eeff8b3069ab56c4906f083475517c2c023dfa7"
                        }
                    ],
                    "cleanup": [
                        "/include",
                        "/lib/pkgconfig",
                        "/lib/openjpeg-2.1"
                    ]
                }
            ],
            "buildsystem": "cmake",
            "config-opts": [
                "-DENABLE_XPDF_HEADERS=ON",
                "-DBUILD_GTK_TESTS=OFF",
                "-DBUILD_QT4_TESTS=OFF",
                "-DBUILD_QT5_TESTS=OFF",
                "-DENABLE_UTILS=OFF",
                "-DENABLE_GLIB=OFF",
                "-DENABLE_QT4=OFF",
                "-DENABLE_QT5=OFF"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://poppler.freedesktop.org/poppler-0.60.1.tar.xz",
                    "sha256": "19f185e05c3b59b4a1de2cec8ef39f5446035493d17bbed41d02fb9a77c8a93c"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "ghostscript",
            "config-opts": [
                "--with-system-libtiff",
                "--disable-cups",
                "--disable-gtk",
                "--enable-dynamic",
                "--with-drivers=FILES"
            ],
            "cleanup": [
                "/share/man",
                "/share/ghostscript/9.21/doc",
                "/share/ghostscript/9.21/examples",
                "dvipdf", "font2c", "gsbj", "gsdj500", "gslp", "lprsetup.sh", "pdf2ps", "pf2afm", "printafm", "ps2epsi",
                "ps2pdfwr", "ps2pdf13", "ps2ps", "wftopfa", "eps2eps", "gsdj", "gslj", "gsnd", "pdf2dsc", "pfbtopfa",
                "pphs", "ps2ascii", "ps2pdf", "ps2pdf12", "ps2pdf14", "ps2ps2", "unix-lpr.sh"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs922/ghostscript-9.22.tar.xz",
                    "sha256": "c1f862e6f40f997dbe3feba89355e8cb05d55818994e10f4932b0dd9b627d1bb"
                }
            ]
        },
        {
            "name": "tkinter",
            "disabled": true,
            "subdir": "unix",
            "config-opts": [
                "--enable-64bit"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/tcl/Tcl/8.6.7/tcl8.6.7-src.tar.gz",
                    "sha256": "7c6b8f84e37332423cfe5bae503440d88450da8cc1243496249faa5268026ba5"
                }
            ],
            "post-install": [
                "chmod 0755 /app/lib/libtcl8.6.so",
                "ln -s /app/bin/tclsh8.6 /app/bin/tclsh"
            ]
        },
        {
            "name": "boost",
            "buildsystem": "simple",
            "build-commands": [
                "mkdir -p /app/include",
                "mv boost /app/include"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/boost/boost/1.64.0/boost_1_64_0.tar.bz2",
                    "sha256": "7bcc5caace97baa948931d712ea5f37038dbb1c5d89b43ad4def4ed7cb683332"
                }
            ],
            "cleanup": [
                "/include"
            ]
        },
        {
            "name": "cppunit",
            "config-opts": [
                "--disable-static"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/cppunit/cppunit/1.12.1/cppunit-1.12.1.tar.gz",
                    "sha256": "ac28a04c8e6c9217d910b0ae7122832d28d9917fa668bcc9e0b8b09acb4ea44a"
                }
            ],
            "cleanup": [
                "*"
            ]
        },
        {
            "name": "librevenge",
            "config-opts": [
                "--without-docs"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/libwpd/librevenge/librevenge-0.0.4/librevenge-0.0.4.tar.xz",
                    "sha256": "933f0729f04267cc354b9a02bc3e9afefa5512a3bdd0b45f159ee14a3e3347b2"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "libmspub",
            "config-opts": [
                "--without-docs",
                "--disable-tools"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://dev-www.libreoffice.org/src/libmspub/libmspub-0.1.2.tar.xz",
                    "sha256": "b0baabf82d20c08ad000e80fa02154ce2f2ffde1ee60240d6e3a917c3b35560f"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "libcdr",
            "config-opts": [
                "--without-docs",
                "--disable-tools"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://dev-www.libreoffice.org/src/libcdr/libcdr-0.1.3.tar.xz",
                    "sha256": "66e28e502abef7f6f494ce03de037d532f5e7888cfdee62c01203c8325b33f22"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "libvisio",
            "config-opts": [
                "--without-docs",
                "--disable-tools"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://dev-www.libreoffice.org/src/libvisio/libvisio-0.1.5.tar.xz",
                    "sha256": "430a067903660bb1b97daf4b045e408a1bb75ca45e615cf05fb1a4da65fc5a8c"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "libpagemaker",
            "config-opts": [
                "--without-docs",
                "--disable-tools"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://dev-www.libreoffice.org/src/libpagemaker/libpagemaker-0.0.3.tar.xz",
                    "sha256": "d896dc55dafd84ee3441e0ca497b810809f9eea44805a495c3843412309036d6"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "libfreehand",
            "config-opts": [
                "--without-docs",
                "--disable-tools"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://dev-www.libreoffice.org/src/libfreehand/libfreehand-0.1.1.tar.xz",
                    "sha256": "ec6676d0c63f7feac7801a1fe18dd7abe9044b39c3882fc99b9afef39bdf1d30"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "libqxp",
            "config-opts": [
                "--without-docs",
                "--disable-tools"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://dev-www.libreoffice.org/src/libqxp/libqxp-0.0.0.tar.xz",
                    "sha256": "0dd32afbf1c889debc28848b260c1bdc0eba5f57504476b787e164f7c59776d5"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "libzmf",
            "config-opts": [
                "--without-docs",
                "--disable-tools"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://dev-www.libreoffice.org/src/libzmf/libzmf-0.0.2.tar.xz",
                    "sha256": "27051a30cb057fdb5d5de65a1f165c7153dc76e27fe62251cbb86639eb2caf22"
                }
            ],
            "cleanup": [
                "/include",
                "*.la",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "scribus",
            "buildsystem": "cmake",
            "config-opts": [
                "-DWANT_GRAPHICSMAGICK=1"
            ],
            "post-install": [
                "mv /app/share/mime/packages/scribus.xml /app/share/mime/packages/net.scribus.Scribus.xml"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/scribusproject/scribus.git"
                }
            ]
        }
    ]
}
