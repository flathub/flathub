id: cloud.ivanbotty.Launcher
runtime: org.gnome.Platform
runtime-version: '49'
sdk: org.gnome.Sdk
command: cloud-ivanbotty-launcher

# Permissions and filesystem access for the Flatpak app
finish-args:
  - --share=network                                 # Allow network access
  - --filesystem=host                               # Access to host's directory (for indexing files)
  - --socket=wayland                                # Enable Wayland display support
  - --socket=fallback-x11                           # Enable fallback X11 support
  - --share=ipc                                     # Required for X11 support
  - --device=dri                                    # Allow direct rendering (GPU access)
  - --talk-name=org.freedesktop.portal.Desktop       # Permission for Flatpak portals

modules:
  - name: PyYAML
    buildsystem: simple
    build-commands:
      - pip3 install --no-build-isolation --no-deps --prefix=/app pyyaml-6.0.3.tar.gz
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/05/8e/961c0007c59b8dd7729d542c61a4d537767a59645b82a0b521206e1e25c2/pyyaml-6.0.3.tar.gz
        sha256: d76623373421df22fb4cf8817020cbb7ef15c725b9d5e45f17e189bfc384190f

  - name: google-generativeai
    buildsystem: simple
    build-commands:
      - pip3 install --no-build-isolation --no-deps --prefix=/app google_generativeai-0.8.6-py3-none-any.whl
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/97/0f/ef33b5bb71437966590c6297104c81051feae95d54b11ece08533ef937d3/google_generativeai-0.8.6-py3-none-any.whl
        sha256: 37a0eaaa95e5bbf888828e20a4a1b2c196cc9527d194706e58a68ff388aeb0fa

  - name: launcher-app
    buildsystem: meson
    config-opts:
      - --prefix=/app
    sources:
      - type: git
        url: https://github.com/BottyIvan/launcher-app
        tag: v1.0.2