app-id: io.github.mlm_games.imagot
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: imagot
finish-args:
  - --share=ipc
  - --socket=x11
  - --socket=pulseaudio
  - --device=dri


modules:
  - name: Imagot
    buildsystem: simple
    build-commands:
      - install -Dm755 imagot ${FLATPAK_DEST}/bin/imagot
      - install -Dm644 flathub/${FLATPAK_ID}.desktop ${FLATPAK_DEST}/share/applications/${FLATPAK_ID}.desktop
      - install -Dm644 flathub/${FLATPAK_ID}.metainfo.xml ${FLATPAK_DEST}/share/metainfo/${FLATPAK_ID}.metainfo.xml
      - install -Dm644 icon.svg ${FLATPAK_DEST}/share/icons/hicolor/scalable/apps/${FLATPAK_ID}.svg
    sources:
      - type: file
        url: https://github.com/mlm-games/imagot/releases/download/0.2.9/imagot.x86_64
        sha256: 55c5e1e52e34f5750c216d379b11f439b97d7e1636d6424fb140a0ec3b01e26f
        dest-filename: imagot
        only-arches:
          - x86_64
        x-checker-data:
          type: json
          url: https://api.github.com/repos/mlm-games/imagot/releases/latest
          version-query: .tag_name
          timestamp-query: .published_at
          url-query: '"https://github.com/mlm-games/imagot/releases/download/"
            + $version + "/imagot.x86_64"'
        
      - type: file
        url: https://github.com/mlm-games/imagot/releases/download/0.2.9/imagot.arm64
        sha256: a5aec783b5df18ed1ac41eb212d3f567d416fca86206998a96389d88a644285c
        dest-filename: imagot
        only-arches:
          - aarch64
        x-checker-data:
          type: json
          url: https://api.github.com/repos/mlm-games/imagot/releases/latest
          version-query: .tag_name
          timestamp-query: .published_at
          url-query: '"https://github.com/mlm-games/imagot/releases/download/"
            + $version + "/imagot.arm64"'
        
      - type: git
        url: https://github.com/mlm-games/imagot.git
        tag: 0.2.9
        commit: eaf53dd6bb6f3291683c032973b174f9576d9eb1
        x-checker-data:
          type: git
          tag-pattern: "^[0-9]+\\.[0-9]+\\.[0-9]+$"
