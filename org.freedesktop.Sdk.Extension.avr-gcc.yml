id: org.freedesktop.Sdk.Extension.avr-gcc
branch: "21.08"
runtime: org.freedesktop.Sdk
build-extension: true
sdk: org.freedesktop.Sdk
runtime-version: "21.08"
separate-locales: false
appstream-compose: false
build-options:
    prefix: /usr/lib/sdk/avr-gcc
    prepend-path: /usr/lib/sdk/avr-gcc/bin/
    cppflags: "-I/usr/lib/sdk/avr-gcc/include/ -L/usr/lib/sdk/avr-gcc/lib"
cleanup:
    - /share/info
    - /share/man
modules:
    - name: avr-gcc
      sources:
          - type: archive
            url: https://ftp.gnu.org/gnu/gcc/gcc-11.2.0/gcc-11.2.0.tar.xz
            sha256: d08edc536b54c372a1010ff6619dd274c0f1603aa49212ba20f7aa2cda36fa8b
      buildsystem: simple
      build-commands:
          - ./configure --prefix=/usr/lib/sdk/avr-gcc/ --target=avr --enable-languages=c,c++ --disable-nls --disable-libssp
          - make && make install
      modules:
          - name: mpc
            sources:
                - type: archive
                  url: https://ftp.gnu.org/gnu/mpc/mpc-1.2.1.tar.gz
                  sha256: 17503d2c395dfcf106b622dc142683c1199431d095367c6aacba6eec30340459
            buildsystem: simple
            build-commands:
                - ./configure --prefix=/usr/lib/sdk/avr-gcc/ --with-mpfr=/usr/lib/sdk/avr-gcc
                - make && make install
            modules:
                - name: mpfr
                  sources:
                      - type: archive
                        url: https://www.mpfr.org/mpfr-current/mpfr-4.1.0.tar.xz
                        sha256: 0c98a3f1732ff6ca4ea690552079da9c597872d30e96ec28414ee23c95558a7f
                  buildsystem: simple
                  build-commands:
                      - ./configure --prefix=/usr/lib/sdk/avr-gcc/
                      - make && make install
          - name: binutils
            sources:
                - type: archive
                  url: https://ftp.gnu.org/gnu/binutils/binutils-2.38.tar.xz
                  sha256: e316477a914f567eccc34d5d29785b8b0f5a10208d36bbacedcc39048ecfe024
            buildsystem: simple
            build-commands:
                - ./configure --prefix=/usr/lib/sdk/avr-gcc/ --target=avr
                - make && make install
