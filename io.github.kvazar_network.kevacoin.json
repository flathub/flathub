{
    "id": "io.github.kvazar_network.kevacoin",
    "runtime": "org.kde.Platform",
    "sdk": "org.kde.Sdk",
    "runtime-version": "5.15-24.08",
    "command": "kevacoin-qt",
    "finish-args": [
        "--persist=.kevacoin",
        "--device=dri",
        "--share=ipc",
        "--share=network",
        "--socket=x11"
    ],
    "cleanup": [
        "*.a",
        "*.la",
        "/include",
        "/lib/cmake",
        "/lib/pkgconfig",
        "/share/cmake",
        "/share/man"
    ],
    "modules": [
        {
            "name": "boost",
            "buildsystem": "simple",
            "build-commands": [
                "./bootstrap.sh --prefix=/app",
                "./b2 install -j $FLATPAK_BUILDER_N_JOBS"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://archives.boost.io/release/1.83.0/source/boost_1_83_0.tar.bz2",
                    "sha256": "6478edfe2f3305127cffe8caf73ea0176c53769f4bf1585be237eb30798c3b8e"
                }
            ]
        },
        {
            "name": "libdb",
            "buildsystem": "simple",
            "build-commands": [
                "cd build_unix && ../dist/configure --prefix=/app --enable-cxx CFLAGS=-Wno-error=implicit-function-declaration && make -j $FLATPAK_BUILDER_N_JOBS && make install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz",
                    "sha256": "12edc0df75bf9abd7f82f821795bcee50f42cb2e5f76a6a281b85732798364ef"
                },
                {
                    "type": "patch",
                    "path": "libdb.patch",
                    "options": [
                        "-p2"
                    ]
                }
            ]
        },
        {
            "name": "libsodium",
            "buildsystem": "simple",
            "build-commands": [
                "./configure --prefix=/app && make -j $FLATPAK_BUILDER_N_JOBS && make install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.libsodium.org/libsodium/releases/libsodium-1.0.20.tar.gz",
                    "sha256": "ebb65ef6ca439333c2bb41a0c1990587288da07f6c7fd07cb3a18cc18d30ce19"
                }
            ]
        },
        {
            "name": "libprotobuf",
            "buildsystem": "simple",
            "build-commands": [
                "./autogen.sh",
                "./configure --prefix=/app",
                "make -j $FLATPAK_BUILDER_N_JOBS && make install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/protocolbuffers/protobuf/releases/download/v2.6.0/protobuf-2.6.0.tar.gz",
                    "sha256": "cd087148a8651aaaf49e6e47df9491f3cd4cc58d3add0ac7d7b834ad808f4f13"
                }
            ]
        },
        {
            "name": "libevent",
            "buildsystem": "simple",
            "build-commands": [
                "./autogen.sh",
                "./configure --prefix=/app",
                "make -j $FLATPAK_BUILDER_N_JOBS && make install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/libevent/libevent/archive/refs/tags/release-2.1.12-stable.tar.gz",
                    "sha256": "7180a979aaa7000e1264da484f712d403fcf7679b1e9212c4e3d09f5c93efc24"
                }
            ]
        },
        {
            "name": "libzeromq",
            "buildsystem": "simple",
            "build-commands": [
                "./autogen.sh",
                "./configure --prefix=/app",
                "make -j $FLATPAK_BUILDER_N_JOBS && make install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/zeromq/libzmq/releases/download/v4.3.5/zeromq-4.3.5.tar.gz",
                    "sha256": "6653ef5910f17954861fe72332e68b03ca6e4d9c7160eb3a8de5a5a913bfab43"
                }
            ]
        },
        {
            "name": "miniupnpc",
            "buildsystem": "simple",
            "build-commands": [
                "make -j $FLATPAK_BUILDER_N_JOBS && make install INSTALLPREFIX=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/miniupnp/miniupnp/releases/download/miniupnpc_2_2_1/miniupnpc-2.2.1.tar.gz",
                    "sha256": "3a3167e57727bf1d2a7b4861f7c7b57a663f58b9cf68227762ed2fc64e8ea11f"
                }
            ]
        },
        {
            "name": "core",
            "buildsystem": "simple",
            "build-commands": [
                "./autogen.sh",
                "./configure --prefix=/app --with-boost=/app --with-libdb=/app --with-gui",
                "make -j $FLATPAK_BUILDER_N_JOBS && make install"
            ],
            "post-install": [
                "install -D share/icons/hicolor/scalable/apps/${FLATPAK_ID}.svg -t /app/share/icons/hicolor/symbolic/apps",
                "install -D share/applications/${FLATPAK_ID}.desktop -t /app/share/applications"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/kvazar-network/kevacoin.git",
                    "commit": "e094c6591e1a7a84f818062280575f7aca455109"
                }
            ]
        }
    ]
}