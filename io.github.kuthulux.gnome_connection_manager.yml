app-id: io.github.kuthulux.gnome_connection_manager
runtime: org.gnome.Platform
runtime-version: '44'
finish-args:
  - --share=ipc
  - --share=network
  - --socket=x11
  - --filesystem=home
sdk: org.gnome.Sdk
command: gnome_connection_manager.py
modules:
  - name: vte
    buildsystem: meson
    sources:
      - type: archive
        url: https://download.gnome.org/sources/vte/0.72/vte-0.72.1.tar.xz
        sha256: 0554f9f88d56ce2d78398fcc7f69bc00e53bbbc5f694e0ae1dcaf5286f89d7e4
  - shared-modules/libcanberra/libcanberra.json
  - name: tcl
    buildsystem: autotools
    subdir: unix
    post-install:
      - chmod 755 /app/lib/libtcl8.6.so
      - make install-private-headers
    build-options:
      config-opts:
        - --enable-framework=yes
    sources:
      - type: archive
        url: http://downloads.sourceforge.net/sourceforge/tcl/tcl-core8.6.12-src.tar.gz
        md5: 0802e5c9e8936fc9b0c69a8da4cedfe2
  - name: expect
    buildsystem: autotools
    sources:
      - type: archive
        url: http://downloads.sourceforge.net/expect/expect5.45.tar.gz
        md5: 44e1a4f4c877e9ddc5a542dfa7ecc92b
  - name: gcm
    buildsystem: simple
    sources:
      - type: git
        url: https://github.com/yma-het/gnome-connection-manager.git
        commit: 60a47a0eda47f9e9134cc5330e7889e01a2e291d
    build-commands:
      - mkdir -p /app/bin
      - cp -r * /app/bin
      - chmod +x /app/bin/gnome_connection_manager.py
      - install -Dm644 gnome-connection-manager.desktop /app/share/applications/gnome-connection-manager.desktop
      - install -Dm644 io.github.kuthulux.gnome_connection_manager.xml /app/share/appdata/io.github.kuthulux.gnome_connection_manager.xml
