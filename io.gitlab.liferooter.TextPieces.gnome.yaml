# SPDX-FileCopyrightText: 2023 Gleb Smirnov <glebsmirnov0708@gmail.com>
#
# SPDX-License-Identifier: CC0-1.0

id: io.gitlab.liferooter.TextPieces.gnome

runtime: org.gnome.Platform
runtime-version: '46'

sdk: org.gnome.Sdk
sdk-extensions:
- org.freedesktop.Sdk.Extension.rust-stable

command: textpieces-gnome

finish-args:
- --socket=fallback-x11
- --socket=wayland
- --device=dri
- --talk-name=org.freedesktop.Flatpak
- --filesystem=~/.local/share/textpieces
- --filesystem=~/.var/app/com.github.liferooter.textpieces

modules:

- name: blueprint-compiler
  buildsystem: meson
  cleanup:
  - '*'
  sources:
  - type: git
    url: https://gitlab.gnome.org/jwestman/blueprint-compiler
    tag: v0.12.0

- name: textpieces-gnome
  buildsystem: meson
  build-options:
    append-path: /usr/lib/sdk/rust-stable/bin
    build-args:
    - --share=network
  sources:
  - type: archive
    url: https://gitlab.com/liferooter/textpieces-gnome/-/archive/v4.0.0/textpieces-gnome-v4.0.0.tar.gz
    sha256: 64dca7cecb6004dede9401e3a69749ea22f5049304ff15cf010b764c80ac8935
