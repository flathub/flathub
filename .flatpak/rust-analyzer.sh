#!/bin/sh

host-spawn -no-pty flatpak build --with-appdir --allow=devel --bind-mount=/run/user/1000/doc=/run/user/1000/doc/by-app/io.github.noobping.listenmoe --device=dri --share=ipc --share=network --socket=fallback-x11 --socket=pulseaudio --socket=wayland --talk-name=org.freedesktop.portal.* --talk-name=org.a11y.Bus --bind-mount=/run/flatpak/at-spi-bus=/run/user/1000/at-spi/bus --env=AT_SPI_BUS_ADDRESS=unix:path=/run/flatpak/at-spi-bus --env=AT_SPI_BUS_ADDRESS=unix:path=/run/flatpak/at-spi-bus --env=DESKTOP_SESSION=gnome --env=LANG=nl_NL.UTF-8 --env=WAYLAND_DISPLAY=wayland-0 --env=XDG_CURRENT_DESKTOP=GNOME --env=XDG_SESSION_DESKTOP=gnome --env=XDG_SESSION_TYPE=wayland --env=PATH=/app/bin:/app/bin:/app/bin:/usr/bin:/home/$USER/.cargo/bin:/var/home/nick/.var/app/com.vscodium.codium/data/node/bin:/var/home/nick/.var/app/com.vscodium.codium/data/cargo/bin:/var/home/nick/.var/app/com.vscodium.codium/data/python/bin:/var/home/nick/.var/app/com.vscodium.codium/data/gem/ruby/3.4.0/bin:/app/bin:/usr/bin:/usr/lib/sdk/rust-stable/bin --env=LD_LIBRARY_PATH=/app/lib --env=PKG_CONFIG_PATH=/app/lib/pkgconfig:/app/share/pkgconfig:/usr/lib/pkgconfig:/usr/share/pkgconfig --share=network --bind-mount=/run/host/fonts=/usr/share/fonts --bind-mount=/run/host/fonts-cache=/usr/lib/fontconfig/cache --filesystem=/var/home/nick/.cache/fontconfig:ro --bind-mount=/run/host/user-fonts-cache=/var/home/nick/.cache/fontconfig --bind-mount=/run/host/font-dirs.xml=/var/home/nick/.cache/font-dirs.xml /var/home/nick/flathub/.flatpak/repo /usr/lib/sdk/rust-stable/bin/rust-analyzer "$@"