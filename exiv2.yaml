name: exiv2
buildsystem: cmake-ninja
builddir: true
config-opts:
  - -DCMAKE_BUILD_TYPE=RelWithDebInfo
  - -DEXIV2_BUILD_DOC:BOOL=OFF
  - -DEXIV2_BUILD_SAMPLES:BOOL=OFF
  - -DEXIV2_BUILD_EXIV2_COMMAND:BOOL=OFF
sources:
  - type: archive
    url: https://github.com/Exiv2/exiv2/archive/0.27.tar.gz
    sha256: 74ae9db73b2e230fcd307017b1c6090dbea9936cd45b545bce2664de1754c389
  # https://bugzilla.redhat.com/show_bug.cgi?id=888769
  # https://src.fedoraproject.org/rpms/exiv2/blob/d9f0bddda398c8413c456c41549b3f14b10f3ae5/f/0068-xmpsdk-Build-with-DBanAllEntityUsage-1.patch
  - type: patch
    path: exiv2-0.27-xmpsdk-Build-with-DBanAllEntityUsage-1.patch
  # https://src.fedoraproject.org/rpms/exiv2/blob/d9f0bddda398c8413c456c41549b3f14b10f3ae5/f/0069-xmpsdk-Fix-compile-warnings-in-ExpatAdapter.cpp.patch
  - type: patch
    path: exiv2-0.27-xmpsdk-Fix-compile-warnings-in-ExpatAdapter.cpp.patch
cleanup:
  - /share/exiv2
