{
	"app-id": "io.elementary.code",
	"runtime": "org.gnome.Platform",
	"runtime-version": "3.24",
	"sdk": "org.gnome.Sdk",
	"command": "scratch-text-editor",
	"rename-desktop-file": "org.pantheon.scratch.desktop",
	"rename-appdata-file": "org.pantheon.scratch.appdata.xml",
	"finish-args": [
		"--filesystem=host",
		/* Wayland and X11 access */ 
		"--socket=wayland",
		"--socket=x11",
		/* own dbus name */ 
		"--own-name=org.pantheon.scratch",
		"--own-name=org.pantheon.terminal",
		"--own-name=org.gnome.zeitgeist",
		"--talk-name=org.gtk.vfs",
		"--talk-name=org.gtk.vfs.*",
		"--talk-name=org.gnome.SettingsDaemon",
		/* dconf */ 
		"--filesystem=xdg-run/dconf",
		"--filesystem=xdg-config/dconf:ro",
		"--talk-name=ca.desrt.dconf",
		"--env=DCONF_USER_CONFIG_DIR=.config/dconf"
	],
	"build-options": {
		"cflags": "-O2",
		"cxxflags": "-O2"
	},
	"cleanup": [
		"/bin/granite-demo",
		"/bin/peas-demo",
		"/share/applications/granite-demo.desktop",
		"/include",
		"/lib/pkgconfig",
		"/lib64/pkgconfig",
		"/lib/debug",
		"/lib/peas-demo",
		"/share/vala",
		"/man",
		"*.a",
		"*.la"
	],
	"modules": [
	{
		"name": "libgee",
		"build-options": {
		"env": {
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_GIRDIR": "/app/share/gir-1.0",
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_TYPELIBDIR": "/app/lib/girepository-1.0"
		}
		},
		"sources": [
		{
			"type": "archive",
			"url": "https://github.com/GNOME/libgee/archive/0.20.0.tar.gz",
			"sha256": "42fe6d651910cb8b720167f71c5255a1b7b1afc82fecd3f31e61f9602b3b1335"
		}
		]
	},
	{
		"name": "granite",
		"buildsystem": "cmake",
		"config-opts": [
		"-DCMAKE_BUILD_TYPE=Release"
		],
		"build-options": {
		"env": {
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_GIRDIR": "/app/share/gir-1.0",
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_TYPELIBDIR": "/app/lib/girepository-1.0"
		}
		},
		"sources": [
		{
			"type": "archive",
			"url": "https://github.com/elementary/granite/archive/0.4.1.tar.gz",
			"sha256": "035a9b36ef73352ff8a76be06b876d9e2ea6633abb693fb67297d998c8d3a240"
		}
		]
	},
	{
		"name": "libpeas",
		"config-opts": [
		"--disable-gtk-doc",
		"--disable-python2",
		"--disable-python3"
		],
		"cleanup": [
		"/bin/*",
		"/lib/peas-demo",
		"/include",
		"/lib/girepository-1.0",
		"/lib/*.la",
		"/lib/pkgconfig",
		"/share/gir-1.0",
		"/share/gtk-doc"
		],
		"sources": [
		{
			"type": "archive",
			"url": "https://download.gnome.org/sources/libpeas/1.20/libpeas-1.20.0.tar.xz",
			"sha256": "f392fffe2dc00072a51bb2a1b274224a06bdc5f9c3b3c0ac4816909e9933d354"
		}
		]
	},
	{
		"name": "gtksourceview",
		"config-opts": [
		"--disable-gtk-doc"
		],
		"sources": [
		{
			"type": "archive",
			"url": "https://git.gnome.org/browse/gtksourceview/snapshot/gtksourceview-3.24.3.tar.xz",
			"sha256": "2bee47c2e564574138d417c4731be8d2ae441710ad544701fdc7008a6c3f05f2"
		}
		]
	},
	{
		"name": "telepathy-glib",
		"config-opts": [
		"--enable-vala-bindings"
		],
		"build-options": {
		"env": {
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_GIRDIR": "/app/share/gir-1.0",
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_TYPELIBDIR": "/app/lib/girepository-1.0"
		}
		},
		"sources": [
		{
			"type": "archive",
			"url": "https://github.com/TelepathyIM/telepathy-glib/archive/telepathy-glib-0.24.1.tar.gz",
			"sha256": "f7c5fbe4fa32ce358f93316eabd1d519d946bdd2506b0f5bfcf89cf771dcfde7"
		}
		]
	},
	{
		"name": "libxml2",
		"config-opts": [
		"--without-python"
		],
		"sources": [
		{
			"type": "archive",
			"url": "https://git.gnome.org/browse/libxml2/snapshot/libxml2-2.9.4.tar.xz",
			"sha256": "85b83a6ed144b75e7f63eca0d3c10f1cbab17ffd9a1edecf0b9554f9728cbece"
		}
		]
	},
	{
		"name": "libraptor",
		"sources": [
		{
			"type": "archive",
			"url": "http://download.librdf.org/source/raptor2-2.0.15.tar.gz",
			"sha256": "ada7f0ba54787b33485d090d3d2680533520cd4426d2f7fb4782dd4a6a1480ed"
		}
		]
	},
	{
		"name": "pyparsing",
		"buildsystem": "simple",
		"build-commands": [
		"python ./setup.py build",
		"python ./setup.py install --prefix=/app"
		],
		"sources": [
		{
			"type": "archive",
			"url": "https://sourceforge.net/projects/pyparsing/files/pyparsing/pyparsing-2.2.0/pyparsing-2.2.0.tar.gz",
			"sha256": "0832bcf47acd283788593e7a0f542407bd9550a55a8a8435214a1960e04bcb04"
		}
		]
	},
	{
		"name": "isodate",
		"buildsystem": "simple",
		"ensure-writable": [
		"/lib/python*/site-packages/easy-install.pth"
		],
		"build-commands": [
		"python ./setup.py build",
		"python ./setup.py install --prefix=/app"
		],
		"sources": [
		{
			"type": "archive",
			"url": "https://pypi.python.org/packages/f4/5b/fe03d46ced80639b7be9285492dc8ce069b841c0cebe5baacdd9b090b164/isodate-0.5.4.tar.gz",
			"sha256": "42105c41d037246dc1987e36d96f3752ffd5c0c24834dd12e4fdbe1e79544e31"
		}
		]
	},
	{
		"name": "rdflib",
		"buildsystem": "simple",
		"ensure-writable": [
		"/lib/python*/site-packages/easy-install.pth"
		],
		"build-commands": [
		"python ./setup.py build",
		"python ./setup.py install --prefix=/app"
		],
		"sources": [
		{
			"type": "archive",
			"url": "https://github.com/RDFLib/rdflib/archive/4.2.2.tar.gz",
			"sha256": "a362926f77624a8abfb93042c28607f49445d003792d5271cd07f0610ab16033"
		}
		]
	},
	{
		"name": "zeitgeist",
		"build-options": {
		"env": {
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_GIRDIR": "/app/share/gir-1.0",
			"PKG_CONFIG_GOBJECT_INTROSPECTION_1_0_TYPELIBDIR": "/app/lib/girepository-1.0"
		}
		},
		"sources": [
		{
			"type": "git",
			"url": "https://anongit.freedesktop.org/git/zeitgeist/zeitgeist.git",
			"branch": "v1.0",
			"commit": "7440700d670cf6d610fbb4276ecba665a346b802"
		}
		]
	},
	{
		"name": "code",
		"buildsystem": "cmake",
		"sources": [
		{
			"type": "git",
			"url": "https://github.com/elementary/scratch.git",
			"commit": "33992888cb4353958e113029769acba73d5c4fb1"
		},
		{
			"type": "patch",
			"path": "store-remove.patch"
		}
		]
	}
	]
}
