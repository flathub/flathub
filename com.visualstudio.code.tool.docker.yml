id: com.visualstudio.code.tool.docker
branch: '21.08'
build-extension: true
sdk: org.freedesktop.Sdk//21.08
runtime: com.visualstudio.code
runtime-version: stable
separate-locales: false
appstream-compose: false
build-options:
  prefix: /app/tools/docker
  strip: true
cleanup:
  - '*.a'
  - '*.la'
  - /share/man
modules:
  - name: docker
    buildsystem: simple
    build-commands:
      - install -Dm755 docker -t ${FLATPAK_DEST}/bin/
    sources:
      - type: archive
        url: https://download.docker.com/linux/static/stable/x86_64/docker-20.10.12.tgz
        sha256: ee9b5be14e54bf92f48c82c2e6a83fbdd1c5329e8f247525a9ed2fe90d9f89a5

  - name: bundle-setup
    buildsystem: simple
    build-commands:
      - install -Dm644 -t $FLATPAK_DEST/share/metainfo $FLATPAK_ID.metainfo.xml
      - appstream-compose --basename=$FLATPAK_ID --prefix=$FLATPAK_DEST --origin=flatpak
        $FLATPAK_ID
    sources:
      - type: file
        path: com.visualstudio.code.tool.docker.metainfo.xml
