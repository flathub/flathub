# yaml-language-server: $schema=https://raw.githubusercontent.com/flatpak/flatpak-builder/master/data/flatpak-manifest.schema.json
app-id: io.github.ferraridamiano.ConverterNOW
runtime: org.freedesktop.Platform
runtime-version: "21.08"
sdk: org.freedesktop.Sdk
command: converternow
separate-locales: false
finish-args:
  - --socket=fallback-x11
  - --socket=wayland
  - --socket=pulseaudio
  - --share=network
  - --share=ipc
  - --device=dri
modules:
  - name: converternow
    buildsystem: simple
    build-commands:
      - cp -r ConverterNOW /app/
      - chmod +x /app/ConverterNOW/converternow
      - mkdir -p /app/bin
      - ln -s /app/ConverterNOW/converternow /app/bin/converternow
      - install -Dm644 -t "${FLATPAK_DEST}/share/applications/" io.github.ferraridamiano.ConverterNOW.desktop
      - install -Dm644 icon16.png "${FLATPAK_DEST}/share/icons/hicolor/16x16/apps/${FLATPAK_ID}.png"
      - install -Dm644 icon32.png "${FLATPAK_DEST}/share/icons/hicolor/32x32/apps/${FLATPAK_ID}.png"
      - install -Dm644 icon48.png "${FLATPAK_DEST}/share/icons/hicolor/48x48/apps/${FLATPAK_ID}.png"
      - install -Dm644 icon128.png "${FLATPAK_DEST}/share/icons/hicolor/128x128/apps/${FLATPAK_ID}.png"
    sources:
      - type: archive
        url: https://github.com/ferraridamiano/ConverterNOW/releases/download/v3.1.1/converternow-linux.tar.gz
        dest: ConverterNOW
        sha256: cf00cca5a35ae6decbfb5fb5490fbf98c2af48bd1a845a7f9f18c8fae9f977e4
      - type: file
        path: io.github.ferraridamiano.ConverterNOW.appdata.xml
      - type: file
        path: io.github.ferraridamiano.ConverterNOW.desktop
      - type: file
        path: icons/icon16.png
      - type: file
        path: icons/icon32.png
      - type: file
        path: icons/icon48.png
      - type: file
        path: icons/icon128.png
