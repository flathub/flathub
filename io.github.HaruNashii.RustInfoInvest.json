{
  "app-id": "io.github.HaruNashii.RustInfoInvest",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "25.08",
  "sdk": "org.freedesktop.Sdk",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.rust-stable"
  ],
  "command": "RustInfoInvest",

  "finish-args": [
    "--share=network",
    "--share=ipc",
    "--socket=pulseaudio",
    "--socket=wayland",
    "--socket=x11",
    "--device=dri",
    "--env=LD_LIBRARY_PATH=/app/lib",
    "--filesystem=~/.local/share/icons/"
  ],

  "modules": [


	{
		"name": "move icon and desktop file",
		"buildsystem": "simple",
	    	"sources": [
		    { "type": "file", "path": "rustinfoinvest_logo_512x512.png" },
		    { "type": "file", "path": "rustinfoinvest_logo_256x256.png" },
		    { "type": "file", "path": "io.github.HaruNashii.RustInfoInvest.desktop" },
		    { "type": "file", "path": "io.github.HaruNashii.RustInfoInvest.metainfo.xml" }
	    	],
		"build-commands": [
 			"install -Dm644 rustinfoinvest_logo_512x512.png /app/share/icons/hicolor/512x512/apps/io.github.HaruNashii.RustInfoInvest.png",
 			"install -Dm644 rustinfoinvest_logo_256x256.png /app/share/icons/hicolor/256x256/apps/io.github.HaruNashii.RustInfoInvest.png",
 			"install -Dm644 io.github.HaruNashii.RustInfoInvest.desktop /app/share/applications/io.github.HaruNashii.RustInfoInvest.desktop",
 			"install -Dm644 io.github.HaruNashii.RustInfoInvest.metainfo.xml /app/share/metainfo/io.github.HaruNashii.RustInfoInvest.metainfo.xml"
		]
	},



	{
		"name": "pkg-config",
	    	"buildsystem": "simple",
      	    	"build-options": {
      	    	  "env": {
	    	    "PKG_CONFIG_PATH": "/app/lib/pkgconfig"
      	    	  }
	    	},
	    	"sources": [
	    	    {
	    	        "type": "archive",
	    	        "url": "https://pkg-config.freedesktop.org/releases/pkg-config-0.29.2.tar.gz",
	    	        "sha256": "6fc69c01688c9458a57eb9a1664c9aba372ccda420a02bf4429fe610e7e7d591"
	    	    }
	    	],
	    	"build-commands": [
	    	    "./configure --prefix=/app",
	    	    "make",
	    	    "make install"
	    	]
	},



	{
		"name": "freetype",
	    	"buildsystem": "simple",
	    	"sources": [
	    	    {
	    	        "type": "git",
	    	        "url": "https://github.com/freetype/freetype.git",
	    	        "commit": "41eab7e66dfc5c2a5ca8c09790e42a77b049ecd6"
	    	    }
	    	],
	    	"build-commands": [
	    	    "./autogen.sh",
	    	    "./configure --prefix=/app",
	    	    "make",
	    	    "make install"
	    	]
	},
	
	

	{
		"name": "fontconfig",
  		"buildsystem": "meson",
  		"sources": [
  		  {
  		    "type": "git",
  		    "url": "https://gitlab.freedesktop.org/fontconfig/fontconfig.git",
  		    "commit": "a5e7617c7af7c2a97ebea19c2272ef480b0f072d"
  		  }
  		],
  		"config-opts": [ "--prefix=/app" ],
  		"builddir": true
	},
	

	

	{
		"name": "openssl_64x",
	    	"buildsystem": "simple",
      	    	"build-options": {
      	    	  "env": {
	    	    "PKG_CONFIG_PATH": "/app/lib/pkgconfig"
      	    	  }
	    	},
	    	"sources": [
	    	    {
	    	        "type": "archive",
	    	        "url": "https://www.openssl.org/source/openssl-3.5.3.tar.gz",
	    	        "sha256": "c9489d2abcf943cdc8329a57092331c598a402938054dc3a22218aea8a8ec3bf"
	    	    }
	    	],
	    	"build-commands": [
	    	    "./Configure --prefix=/app --openssldir=/app/ssl linux-x86_64",
	    	    "make",
	    	    "make install"
	    	]
	},



	{
		"name": "openssl_86x",
	    	"buildsystem": "simple",
      	    	"build-options": {
      	    	  "env": {
	    	    "PKG_CONFIG_PATH": "/app/lib/pkgconfig"
      	    	  }
	    	},
	    	"sources": [
	    	    {
	    	        "type": "archive",
	    	        "url": "https://www.openssl.org/source/openssl-3.5.3.tar.gz",
	    	        "sha256": "c9489d2abcf943cdc8329a57092331c598a402938054dc3a22218aea8a8ec3bf"
	    	    },
		    { "type": "file", "path": "openssl.pc" },
		    { "type": "file", "path": "libssl.pc" },
		    { "type": "file", "path": "libcrypto.pc" }
	    	],
	    	"build-commands": [
	    	    "./Configure --prefix=/app --openssldir=/app/ssl --libdir=/app/lib linux-x86_64",
	    	    "make",
	    	    "make install",
		    "install -Dm644 openssl.pc /app/lib/pkgconfig/openssl.pc",
		    "install -Dm644 libssl.pc /app/lib/pkgconfig/libssl.pc",
		    "install -Dm644 libcrypto.pc /app/lib/pkgconfig/libcrypto.pc"
	    	]
	},



	{
		"name": "sdl3",
	    	"buildsystem": "cmake",
	    	"sources": [
	    	    {
	    	        "type": "git",
	    	        "url": "https://github.com/libsdl-org/SDL.git",
	    	        "commit": "005f10bd97633a44b60f69236ff4d4a3c777b5b3"
	    	    }
	    	],
	    	"config-opts": [
	    	    "-DCMAKE_INSTALL_PREFIX=/app"
	    	],
	    	"build-commands": [
	    	    "cmake .",
	    	    "make",
	    	    "make install"
	    	]
	},
	

	
	{
		"name": "sdl3_ttf",
	    	"buildsystem": "simple",
	    	"sources": [
	    	    {
	    	        "type": "git",
	    	        "url": "https://github.com/libsdl-org/SDL_ttf",
	    	        "commit": "6b6bd588e8646360b08f624fb601cc2ec75c6ada"
	    	    }
	    	],
	    	"build-commands": [
	    	    "cmake -DCMAKE_PREFIX_PATH=/app -DCMAKE_INSTALL_PREFIX=/app .",
	    	    "make",
	    	    "make install"
	    	]
	},



	{
		"name": "RustInfoInvest",
      		"buildsystem": "simple",
      		"build-options": {
      		  "env": {
      		    "PATH": "/usr/lib/sdk/rust-stable/bin:/app/bin:/usr/bin",
		    "PKG_CONFIG_PATH": "/app/lib/pkgconfig"
      		  },
      		  "build-args": [
      		  	"--share=network"
      		  ]
      		},
      		"sources": [
      		  {
      		    "type": "git",
      		    "url": "https://github.com/HaruNashii/RustInfoInvest.git",
      		    "commit": "d861f90140d4a83cc278d6ff67f12df117236d95"
      		  }
      		],
      		"build-commands": [
      		  "cargo build --release",
      		  "install -Dm755 target/release/RustInfoInvest /app/bin/RustInfoInvest"
      		]
	}


  ]
}
