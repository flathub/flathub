app-id: io.github.TheAssassin.AppImageLauncher
runtime: org.freedesktop.Platform
runtime-version: '21.08'
sdk: org.freedesktop.Sdk
rename-icon: AppImageLauncher
rename-desktop-file: appimagelauncher.desktop
command: AppImageLauncher
separate-locales: false
finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --socket=pulseaudio
  - --share=network
  - --device=dri
  - --filesystem=~/Applications:create
  - --talk-name=org.freedesktop.Notifications
modules:
  - name: appimagelauncher
    buildsystem: simple
    build-commands:
      - ar p appimagelauncher.deb data.tar.xz | tar xJ
      - cp -r usr/* /app
      - rm -r appimagelauncher.deb usr
      - install -Dm644 io.github.TheAssassin.AppImageLauncher.appdata.xml /app/share/appdata/io.github.TheAssassin.AppImageLauncher.appdata.xml
    sources:
      - type: file
        path: io.github.TheAssassin.AppImageLauncher.appdata.xml
      - type: file
        only-arches:
          - x86_64
        url: https://github.com/TheAssassin/AppImageLauncher/releases/download/continuous/appimagelauncher_2.2.0-gha71.039de6f+bionic_amd64.deb
        dest-filename: appimagelauncher.deb
        sha256: dddfc43e7fa9c1bd7b0c73479f809a764710f6996440fc54212b467ef1ca6e17
        x-checker-data:
          type: json
          url: https://api.github.com/repos/TheAssassin/AppImageLauncher/releases/latest
          version-query: 2.2.0-gha71.039de6f
          url-query: .assets[]  | select(.name=="appimagelauncher_" + $version + "+bionic_amd64.deb") | .browser_download_url
      - type: file
        only-arches:
          - aarch64
        url: https://github.com/TheAssassin/AppImageLauncher/releases/download/continuous/appimagelauncher_2.2.0-gha71.039de6f+bionic_arm64.deb
        dest-filename: appimagelauncher.deb
        sha256: e7c07907c2abd2467b940b7a6cf70edfec2ed6537911269bce114c15bbf94b1b
        x-checker-data:
          type: json
          url: https://api.github.com/repos/TheAssassin/AppImageLauncher/releases/latest
          version-query: 2.2.0-gha71.039de6f
          url-query: .assets[]  | select(.name=="appimagelauncher_"+$version+"+bionic_arm64.deb") | .browser_download_url
