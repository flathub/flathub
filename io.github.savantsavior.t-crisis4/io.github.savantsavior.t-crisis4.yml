app-id: io.github.savantsavior.t-crisis4
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: tc4-tribute3-wrapper.sh

finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --socket=pulseaudio
  - --device=all
  - --allow=bluetooth
  - --persist=.tc4-tribute3         # keep saves/back-compat with your current dir

modules:
  - name: t-crisis4
    buildsystem: simple
    build-commands:
      - make
      - install -Dm755 tc4-tribute3 /app/bin/tc4-tribute3
      - install -Dm755 tc4-tribute3-wrapper.sh /app/bin/tc4-tribute3-wrapper.sh
      - install -Dm644 io.github.savantsavior.t-crisis4.desktop /app/share/applications/io.github.savantsavior.t-crisis4.desktop
      - install -Dm644 io.github.savantsavior.t-crisis4.metainfo.xml /app/share/metainfo/io.github.savantsavior.t-crisis4.metainfo.xml
      - install -Dm644 io.github.savantsavior.t-crisis4.png /app/share/icons/hicolor/256x256/apps/io.github.savantsavior.t-crisis4.png
      - install -Dm644 license.txt /app/share/licenses/io.github.savantsavior.t-crisis4/LICENSE
      - cp -r data /app/bin/data
    sources:
      - type: archive
        url: https://github.com/savantsavior/t-crisis4/archive/28384b0e33b5ed14bd16c4475679bb0a1bd426c3.tar.gz
        sha256: 16c18b9297a12ad634b5cb3f2de8f8fd8642c826da10a3e0a667bb248395a7f9
      - type: file
        path: tc4-tribute3-wrapper.sh
