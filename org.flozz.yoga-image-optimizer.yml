app-id: org.flozz.yoga-image-optimizer
runtime: org.freedesktop.Platform
runtime-version: "20.08"
sdk: org.freedesktop.Sdk
command: yoga-image-optimizer
finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --filesystem=host
modules:
  - name: yoga-image-optimizer
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix="${FLATPAK_DEST}" "cffi" --no-build-isolation
      - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix="${FLATPAK_DEST}" "." --no-build-isolation --no-use-pep517
      - ./linuxpkg/copy-data.sh ${FLATPAK_DEST}
    sources:
      - dependencies.json
      - type: git
        url: "https://github.com/flozz/yoga-image-optimizer.git"
        tag: v1.0.0
        commit: dbcbeac36a870f021845d47810fcb5b38a78adbb
