id: org.kde.discover
runtime: org.kde.Platform
runtime-version: '6.9'
sdk: org.kde.Sdk
command: plasma-discover
base: io.qt.qtwebengine.BaseApp
base-version: '6.9'
finish-args:
    - --share=ipc
    - --share=network
    - --socket=fallback-x11
    - --socket=wayland
    - --talk-name=org.freedesktop.Notifications

modules:
  - name: discover
    config-opts:
      - -DBUILD_TESTING=OFF
      - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      - -DWITH_KCM=OFF
      - -DWITH_NOTIFIER=OFF
      - -DPACKAGEKIT_AUTOREMOVE=OFF

    buildsystem: cmake-ninja
    sources:
      - type: git
        url: https://invent.kde.org/plasma/discover
        commit: db7bfb6c1e84970be11b33acae0eec7b17dab237
        tag: "v6.4.5"
        x-checker-data:
          type: anitya
          project-id: 236343
          stable-only: true
          url-template: https://download.kde.org/stable/release-service/$version/src/discover-$version.tar.xz

    modules:
    - name: kuserfeedback
      config-opts:
        - -DBUILD_TESTING=OFF
        - -DCMAKE_BUILD_TYPE=RelWithDebInfo
      buildsystem: cmake-ninja
      sources:
        - type: git
          url: https://invent.kde.org/frameworks/kuserfeedback.git
          commit: 2657c47a3e462c79d5686f256073cf7d749e28b5
          tag: "v6.17.0"

      modules:
      - name: appsream
        config-opts:
          - -Dqt=true
          - -Dstemming=false
          - -Dcompose=true
        buildsystem: meson
        builddir: true
        sources:
          - type: git
            url: https://github.com/ximion/appstream.git
            commit: 8af1b8b61c5682751cec21c5b644cb1b8d20d5c6
            x-checker-data:
              type: anitya
              project-id: 10385
              stable-only: true

        modules:
          - python-deps.yaml
          - name: gi-docgen
            config-opts:
              - -Ddevelopment_tests=false
            buildsystem: meson
            builddir: true
            sources:
              - type: git
                url: https://gitlab.gnome.org/GNOME/gi-docgen
                commit: 0517026e0bf51b3776efa4689da44ea0c99e343e
                tag: "2025.4"







#    - name: flatpak
#      buildsystem: meson
#      config-opts:
#        - -Dgtkdoc=disabled
#        - -Ddocbook_docs=disabled
#        - -Dtests=false
#        - -Dman=disabled
#        - -Dseccomp=disabled
#        - -Dselinux_module=disabled
#        - -Dmalcontent=disabled
#        - -Dsandboxed_triggers=false
#        - -Dsystem_helper=enabled
#        - -Dhttp_backend=curl
#        - -Dsystemd=disabled
#        - -Dsystem_install_dir=/var/lib/flatpak
#        - -Dsystem_bubblewrap=bwrap
#        - -Dsystem_dbus_proxy=xdg-dbus-proxy
#        - --sysconfdir=/var/run/host/etc
#      cleanup:
#        - /bin/flatpak-bisect
#        - /bin/flatpak-coredumpctl
#        - /etc/profile.d
#        - /lib/systemd
#        - /share/dbus-1/interfaces/org.freedesktop.*
#        - /share/dbus-1/services/org.freedesktop.*
#        - /share/flatpak/triggers
#        - /share/gdm
#        - /share/zsh
#      post-install:
#        - install -Dpm0755 -t /app/bin /usr/bin/update-{mime,desktop}-database
#      sources:
#        - type: archive
#          url: https://github.com/flatpak/flatpak/archive/refs/tags/1.16.1.tar.gz
#          sha256: 281aa7e35efa0899fefaf7eba923e8ff117f7c03726c7f73b2ac296dae2daf37
#          x-checker-data:
#            type: anitya
#            project-id: 6377
#            url-template: https://github.com/flatpak/flatpak/archive/refs/tags/$version.tar.gz
#    - shared-modules/intltool/intltool-0.51.json
#    - name: ostree
#      build-options:
#        env:
#          BASH_COMPLETIONSDIR: /app/share/bash-completion/completions
#        config-opts:
#          - --disable-man
#          - --with-curl
#          - --without-libsystemd
#      cleanup:
#        - /bin
#        - /etc/grub.d
#        - /etc/ostree
#        - /share/ostree
#        - /libexec
#      sources:
#        - type: git
#          url: https://github.com/ostreedev/ostree
#          tag: v2025.6
#          commit: 82185d9aaf0a79b100378f13a54c3d5d3763a971
#          x-checker-data:
#            type: anitya
#            project-id: 10899
#            tag-template: v$version


