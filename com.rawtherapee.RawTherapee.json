{
  "app-id": "com.rawtherapee.RawTherapee",
  "runtime": "org.gnome.Platform",
  "runtime-version": "3.30",
  "sdk": "org.gnome.Sdk",
  "command": "rawtherapee",
  "rename-desktop-file": "rawtherapee.desktop",
  "rename-icon": "rawtherapee",
  "finish-args": [
    /* X11 + XShm access */
    "--share=ipc",
    "--socket=x11",
    /* Wayland */
    "--socket=wayland",
    /* Note playback */
    "--socket=pulseaudio",
    /* MIDI */
    "--device=all",
    /* Allow loading, saving files from anywhere (portals donâ€™t work yet) */
    "--filesystem=home",
    /* Allow other instances to see lockfiles */
    "--env=TMPDIR=/var/tmp"
  ],
  "cleanup": [
    "/share/man",
    "/share/doc",
    "/share/gtk-doc",
    "/lib/pkgconfig",
    "*.la"
  ],
  "modules": [
    {
      "name" : "gtkmm",
      "config-opts" : [
        "--disable-documentation"
      ],
      "cleanup": [
        "/include",
        "/lib/gdkmm-3.0",
        "/lib/gtkmm-3.0"
      ],
      "build-options" : {
        "cxxflags" : "-O2 -g -std=c++11"
      },
      "modules": [
        {
          "name" : "mm-common",
          "cleanup" : [
            "/share",
            "/bin"
          ],
          "sources" : [
            {
              "type" : "archive",
              "url" : "http://ftp.gnome.org/pub/GNOME/sources/mm-common/0.9/mm-common-0.9.10.tar.xz",
              "sha256" : "16c0e2bc196b67fbc145edaecb5dbe5818386504fe5703de27002d77140fa217"
            }
          ]
        },
        {
          "name" : "sigc++",
          "config-opts" : [
            "--disable-documentation"
          ],
          "cleanup": [
            "/include",
            "/lib/sigc++-2.0"
          ],
          "sources" : [
            {
              "type" : "archive",
              "url" : "http://ftp.gnome.org/pub/GNOME/sources/libsigc++/2.9/libsigc++-2.9.3.tar.xz",
              "sha256" : "0bf9b301ad6198c550986c51150a646df198e8d1d235270c16486b0dda30097f"
            }
          ]
        },
        {
          "name" : "glibmm",
          "config-opts" : [
            "--disable-documentation"
          ],
          "cleanup": [
            "/include",
            "/lib/giomm-2.4",
            "/lib/glibmm-2.4"
          ],
          "sources" : [
            {
              "type" : "archive",
              "url" : "http://ftp.gnome.org/pub/GNOME/sources/glibmm/2.58/glibmm-2.58.0.tar.xz",
              "sha256" : "d34189237b99e88228e6f557f7d6e62f767fe356f395a244f5ad0e486254b645"
            }
          ]
        },
        {
          "name" : "cairomm",
          "config-opts" : [
            "--disable-documentation"
          ],
          "cleanup": [
            "/include",
            "/lib/cairomm-1.0"
          ],
          "sources" : [
            {
              "type" : "archive",
              "url" : "http://cairographics.org/releases/cairomm-1.12.0.tar.gz",
              "sha256" : "50435aec6fdd976934b791e808993160113ad19ca53a5634a9b64ccbe55874cc"
            }
          ]
        },
        {
          "name" : "pangomm",
          "config-opts" : [
            "--disable-documentation"
          ],
          "cleanup": [
            "/include",
            "/lib/pangomm-1.4"
          ],
          "sources" : [
            {
              "type" : "archive",
              "url" : "http://ftp.gnome.org/pub/GNOME/sources/pangomm/2.40/pangomm-2.40.1.tar.xz",
              "sha256" : "9762ee2a2d5781be6797448d4dd2383ce14907159b30bc12bf6b08e7227be3af"
            }
          ]
        },
        {
          "name" : "atkmm",
          "config-opts" : [
            "--disable-documentation"
          ],
          "cleanup": [
            "/include",
            "/lib/atkmm-1.6"
          ],
          "sources" : [
            {
              "type" : "archive",
              "url" : "http://ftp.gnome.org/pub/GNOME/sources/atkmm/2.24/atkmm-2.24.2.tar.xz",
              "sha256" : "ff95385759e2af23828d4056356f25376cfabc41e690ac1df055371537e458bd"
            }
          ]
        }
      ],
      "sources": [
        {
          "type" : "archive",
          "url" : "http://ftp.gnome.org/pub/GNOME/sources/gtkmm/3.24/gtkmm-3.24.0.tar.xz",
          "sha256" : "cf5fc92805e581c8303e08d54519457ba07f15b766e9b1edde4862993ac1aa43"
        }
      ]
    },
    {
      "name": "lensfun",
      "buildsystem": "cmake-ninja",
      "cleanup": [
        "/bin",
        "/include",
        "/lib/python3.7"
      ],
      "config-opts": [
        "-DCMAKE_INSTALL_LIBDIR=/app/lib",
        "-DBUILD_FOR_SSE=0",
        "-DBUILD_FOR_SSE2=0"
      ],
      "build-options": {
        "arch": {
          "i386": {
            "config-opts": [
              "-DBUILD_FOR_SSE=1",
              "-DBUILD_FOR_SSE2=1"
            ]
          },
          "x86_64": {
            "config-opts": [
              "-DBUILD_FOR_SSE=1",
              "-DBUILD_FOR_SSE2=1"
            ]
          }
        }
      },
      "sources": [
        {
          "type": "git",
          "url": "https://git.code.sf.net/p/lensfun/code",
          "commit": "a78b3d29762ee644bbbbb6eae9daf0b98cf84472"
        }
      ]
    },
    {
      "name": "exiv2",
      "buildsystem": "cmake-ninja",
      "config-opts": ["-DCMAKE_BUILD_TYPE=Release"],
      "cleanup": [
        "/include",
        "/lib/*.a",
        "/bin"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://exiv2.org/releases/exiv2-0.26-trunk.tar.gz",
          "sha256": "c75e3c4a0811bf700d92c82319373b7a825a2331c12b8b37d41eb58e4f18eafb"
        }
      ]
    },
    {
      "name": "fftw3f",
      "config-opts": [
        "--enable-threads",
        "--enable-shared",
        "--enable-float",
        "--disable-static"
      ],
      "build-options": {
        "arch": {
          "x86_64": {
            "config-opts": [
              "--enable-sse2",
              "--enable-avx",
              "--enable-avx-128-fma"
            ]
          }
        }
      },
      "sources": [
        {
          "type": "archive",
          "url": "http://www.fftw.org/fftw-3.3.7.tar.gz",
          "sha256": "3b609b7feba5230e8f6dd8d245ddbefac324c5a6ae4186947670d9ac2cd25573"
        }
      ],
      "cleanup": [
        "/bin",
        "/include",
        "/lib/cmake",
        "/lib/*.la"
      ]
    },
    {
      "name": "libptcdata",
      "cleanup": [
        "/include",
        "/bin"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://managedway.dl.sourceforge.net/project/libiptcdata/libiptcdata/1.0.4/libiptcdata-1.0.4.tar.gz",
          "sha256": "79f63b8ce71ee45cefd34efbb66e39a22101443f4060809b8fc29c5eebdcee0e"
        }
      ]
    },
    {
      "name": "rawtherapee",
      "buildsystem": "cmake-ninja",
      "sources": [
        {
          "type": "archive",
          "url": "http://rawtherapee.com/shared/source/rawtherapee-5.5.tar.xz",
          "sha256": "c169c9fb37dd5183de795200338af1e597f8189b1f75a48f8688db6eb35048f0"
        }
      ]
    }
  ]
}
