{
  "id": "com.fugro.roames.displaz",
  "runtime": "org.kde.Platform",
  "runtime-version": "5.12",
  "sdk": "org.kde.Sdk",
  "command": "displaz",
  "finish-args": [
    "--socket=x11",
    "--share=ipc",
    "--socket=wayland",
    "--device=dri",
    "--filesystem=host"
  ],
  "modules": [
    {
      "name": "displaz",
      "buildsystem": "simple",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/nigels-com/displaz.git",
          "branch": "master",
          "commit": "e7e042278e18851fbba5879f9f5b4f60933e2c44"
        },
        {
          "type": "shell",
          "commands": [
            "mkdir -p thirdparty/external/downloads"
          ]
        },
        {
          "type": "file",
          "url": "http://download.savannah.nongnu.org/releases/openexr/ilmbase-2.2.0.tar.gz",
          "dest-filename": "thirdparty/external/downloads/ilmbase-2.2.0.tar.gz",
          "sha256": "ecf815b60695555c1fbc73679e84c7c9902f4e8faa6e8000d2f905b8b86cedc7"
        }
      ],
      "build-commands": [
        "mkdir build_external",
        "pushd build_external && cmake ../thirdparty/external && make -j ${FLATPAK_BUILDER_N_JOBS} && popd",
        "mkdir build",
        "pushd build && cmake -DCMAKE_INSTALL_PREFIX=/app -DDISPLAZ_ID=com.fugro.roames.displaz .. && make -j ${FLATPAK_BUILDER_N_JOBS} install && popd"
      ]
    }
  ]
}
