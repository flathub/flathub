id: ai.opencode.opencode
runtime: org.gnome.Platform
runtime-version: '49'
sdk: org.gnome.Sdk
command: OpenCode
rename-desktop-file: OpenCode.desktop
rename-icon: OpenCode

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --share=network
  - --filesystem=host

modules:
  - name: opencode
    buildsystem: simple
    build-options:
      no-debuginfo: true
    build-commands:
      - ar x opencode-desktop-linux*.deb
      - tar xf data.tar.gz
      - mv usr/* /app
    sources:
      - type: file
        only-arches: [x86_64]
        url: https://github.com/sst/opencode/releases/download/v1.0.186/opencode-desktop-linux-amd64.deb
        sha256: a0d8cc3fe55a1ff4a51ce9ddfa196b53c2e14a49cf6029e4b2427fb389f423c2
      - type: file
        only-arches: [aarch64]
        url: https://github.com/sst/opencode/releases/download/v1.0.186/opencode-desktop-linux-arm64.deb
        sha256: 122aef429e4f5bc7e54596a56987bc91c261f456ada5290d47810f4aa82da3bf
