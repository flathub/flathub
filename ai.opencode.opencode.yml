id: ai.opencode.opencode
runtime: org.gnome.Platform
runtime-version: '49'
sdk: org.gnome.Sdk
command: OpenCode
rename-desktop-file: OpenCode.desktop
rename-icon: OpenCode

finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --share=network
  - --filesystem=host

modules:
  - name: opencode
    buildsystem: simple
    build-options:
      no-debuginfo: true
    build-commands:
      - ar x opencode-desktop-linux*.deb
      - tar xf data.tar.gz
      - mv usr/* /app
    sources:
      - type: file
        only-arches: [x86_64]
        url: https://github.com/sst/opencode/releases/download/v1.1.2/opencode-desktop-linux-amd64.deb
        sha256: 5e0b3aea6ad2da0a19401d870ea165bbca35ddddc65be384025f0622e10ea7db
      - type: file
        only-arches: [aarch64]
        url: https://github.com/sst/opencode/releases/download/v1.1.2/opencode-desktop-linux-arm64.deb
        sha256: e643ff9cefcb6ad6b3aad6bad76ec3480bd4b3034d3d2422a3d3ec3506a2b90b
