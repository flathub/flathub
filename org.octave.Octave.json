{
  "app-id": "org.octave.Octave",
  "runtime": "org.kde.Sdk",
  "runtime-version": "5.9",
  "sdk": "org.kde.Sdk",
  "command": "octave",
  "rename-icon": "octave",
  "rename-desktop-file": "www.octave.org-octave.desktop",
  "rename-appdata-file": "www.octave.org-octave.appdata.xml",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.gfortran-62",
    "org.freedesktop.Sdk.Extension.openjdk9"
  ],
  "finish-args": [
    "--socket=wayland",
    "--socket=x11",
    "--socket=pulseaudio",
    "--share=network",
    "--device=dri",
    "--filesystem=home",
    "--env=PATH=/usr/bin:/app/bin:/usr/lib/sdk/gfortran-62/bin:/usr/lib/sdk/openjdk9/bin"
  ],
  "build-options": {
    "cflags": "-O2",
    "cxxflags": "-O2",
    "env": {
      "PATH": "/usr/bin:/app/bin:/usr/lib/sdk/gfortran-62/bin:/usr/lib/sdk/openjdk9/bin"
    }
  },
  "modules": [
    {
      "name": "gfortran",
      "buildsystem": "simple",
      "build-commands": [
        "/usr/lib/sdk/gfortran-62/install.sh",
        "ln -s /app/lib/libgfortran.so.3 /app/lib/libgfortran.so"
      ]
    },
    {
      "name": "openblas",
      "no-autogen": true,
      "make-args": [
        "DYNAMIC_ARCH=1",
        "FC=gfortran"
      ],
      "make-install-args": [
        "PREFIX=/app"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/xianyi/OpenBLAS/archive/v0.2.20.tar.gz",
          "sha256": "5ef38b15d9c652985774869efd548b8e3e972e1e99475c673b25537ed7bcf394"
        }
      ]
    },
    "shared-modules/glu/glu-9.0.0.json",
    {
      "name": "fltk",
      "buildsystem": "cmake",
      "config-opts": [
        "-DOPTION_BUILD_SHARED_LIBS=ON",
        "-DFLTK_LIBDIR:PATH=lib"
      ],
      "build-options": {
        "cflags": "-fPIC",
        "cxxflags": "-fPIC"
      },
      "sources": [
        {
          "type": "archive",
          "url": "http://fltk.org/pub/fltk/1.3.4/fltk-1.3.4-1-source.tar.gz",
          "sha256": "7fb2c8882433ce694e6900c94fda505e8f4ed3fa9c7e597007098a33b85c53f4"
        }
      ]
    },
    {
      "name": "gnuplot",
      "sources": [
        {
          "type": "archive",
          "url": "https://sourceforge.net/projects/gnuplot/files/gnuplot/5.0.6/gnuplot-5.0.6.tar.gz",
          "sha256": "5bbe4713e555c2e103b7d4ffd45fca69551fff09cf5c3f9cb17428aaacc9b460"
        }
      ]
    },
    {
      "name": "ghostscript",
      "config-opts": [
        "--disable-cups"
      ],
      "build-options": {
        "ldflags": "-L/app/lib"
      },
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs921/ghostscript-9.21.tar.gz",
          "sha256": "02bceadbc4dddeb6f2eec9c8b1623d945d355ca11b8b4df035332b217d58ce85"
        }
      ]
    },
    {
      "name": "gl2ps",
      "buildsystem": "cmake",
      "sources": [
        {
          "type": "archive",
          "url": "http://geuz.org/gl2ps/src/gl2ps-1.4.0.tgz",
          "sha256": "03cb5e6dfcd87183f3b9ba3b22f04cd155096af81e52988cc37d8d8efe6cf1e2"
        }
      ]
    },
    {
      "name": "qhull",
      "buildsystem": "cmake",
      "sources": [
        {
          "type": "archive",
          "url": "http://www.qhull.org/download/qhull-2015-src-7.2.0.tgz",
          "sha256": "78b010925c3b577adc3d58278787d7df08f7c8fb02c3490e375eab91bb58a436"
        }
      ]
    },
    {
      "name": "epstool",
      "no-autogen": true,
      "make-install-args": [
        "EPSTOOL_BASE=/app"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://pkgs.fedoraproject.org/repo/pkgs/epstool/epstool-3.08.tar.gz/465a57a598dbef411f4ecbfbd7d4c8d7/epstool-3.08.tar.gz",
          "sha256": "f3f14b95146868ff3f93c8720d5539deef3b6531630a552165664c7ee3c2cfdd"
        }
      ]
    },
    {
      "name": "hdf5",
      "no-autogen": true,
      "sources": [
        {
          "type": "archive",
          "url": "https://support.hdfgroup.org/ftp/HDF5/current18/src/hdf5-1.8.19.tar.bz2",
          "sha256": "59c03816105d57990329537ad1049ba22c2b8afe1890085f0c022b75f1727238"
        }
      ]
    },
    {
      "name": "qrupdate",
      "no-autogen": true,
      "make-args": [
        "solib",
        "BLAS=-lopenblas",
        "LAPACK="
      ],
      "make-install-args": [
        "PREFIX=/app"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://sourceforge.net/projects/qrupdate/files/qrupdate/1.2/qrupdate-1.1.2.tar.gz",
          "sha256": "e2a1c711dc8ebc418e21195833814cb2f84b878b90a2774365f0166402308e08"
        },
        {
          "type": "shell",
          "commands": [
            "sed -e 's|FFLAGS=-fimplicit-none -O3 -funroll-loops|FFLAGS=-fimplicit-none -O3 -funroll-loops -L/app/lib|' -i Makeconf"
          ]
        }
      ]
    },
    {
      "name": "suitesparse",
      "make-args": [
        "LAPACK=",
        "library"
      ],
      "make-install-args": [
        "LAPACK=",
        "INSTALL_LIB=/app/lib",
        "INSTALL_INCLUDE=/app/include",
        "library"
      ],
      "no-autogen": true,
      "sources": [
        {
          "type": "archive",
          "url": "http://faculty.cse.tamu.edu/davis/SuiteSparse/SuiteSparse-4.5.5.tar.gz",
          "sha256": "b9a98de0ddafe7659adffad8a58ca3911c1afa8b509355e7aa58b02feb35d9b6"
        }
      ]
    },
    {
      "name": "glpk",
      "sources": [
        {
          "type": "archive",
          "url": "https://ftp.gnu.org/gnu/glpk/glpk-4.63.tar.gz",
          "sha256": "914d27f1a51c2bf4a51f1bd4a507f875fcca99db7b219380b836a25b29b3e7f6"
        }
      ]
    },
    {
      "name": "portaudio",
      "sources": [
        {
          "type": "archive",
          "url": "http://www.portaudio.com/archives/pa_stable_v190600_20161030.tgz",
          "sha256": "f5a21d7dcd6ee84397446fa1fa1a0675bb2e8a4a6dceb4305a8404698d8d1513"
        }
      ]
    },
    {
      "name": "graphicsmagick",
      "config-opts": [
        "--enable-shared=yes"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://sourceforge.net/projects/graphicsmagick/files/graphicsmagick/1.3.26/GraphicsMagick-1.3.26.tar.bz2",
          "sha256": "054bd6e10c6d82b6adb36d1a9f860e9db90689d3b61e77a344d2f962b33167e5"
        }
      ]
    },
    {
      "name": "arpack-ng",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/opencollab/arpack-ng/archive/3.5.0.tar.gz",
          "sha256": "50f7a3e3aec2e08e732a487919262238f8504c3ef927246ec3495617dde81239"
        }
      ]
    },
    {
      "name": "fftw3",
      "no-autogen": true,
      "config-opts": [
        "--enable-shared",
        "--enable-threads"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://www.fftw.org/fftw-3.3.6-pl2.tar.gz",
          "sha256": "a5de35c5c824a78a058ca54278c706cdf3d4abba1c56b63531c2cb05f5d57da2"
        }
      ]
    },
    {
      "name": "fftw3f",
      "no-autogen": true,
      "config-opts": [
        "--enable-shared",
        "--enable-threads",
        "--enable-float"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://www.fftw.org/fftw-3.3.6-pl2.tar.gz",
          "sha256": "a5de35c5c824a78a058ca54278c706cdf3d4abba1c56b63531c2cb05f5d57da2"
        }
      ]
    },
    {
      "name": "mesa",
      "config-opts": [
        "--enable-osmesa"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://mesa.freedesktop.org/archive/mesa-17.2.0-rc6.tar.gz",
          "sha256": "ce25345b7da886cdc730299065e2f27ac285eddc75c89595be16cb8ec8497fcc"
        }
      ]
    },
    {
      "name": "qscintilla",
      "buildsystem": "simple",
      "sources": [
        {
          "type": "archive",
          "url": "https://sourceforge.net/projects/pyqt/files/QScintilla2/QScintilla-2.10/QScintilla_gpl-2.10.tar.gz",
          "sha256": "16be30577bc178470936c458551f2512cc068aff6e7a7de6ed244e28c045f6ec"
        }
      ],
      "build-commands": [
        "sed -e 's|\\(target.path\\) = .*|\\1 = /app/lib|' -i Qt4Qt5/qscintilla.pro",
        "sed -e 's|\\(header.path\\) = .*|\\1 = /app/include|' -i Qt4Qt5/qscintilla.pro",
        "sed -e 's|\\(trans.path\\) = .*|\\1 = /app/share/qt5/translations|' -i Qt4Qt5/qscintilla.pro",
        "sed -e 's|\\(qsci.path\\) = .*|\\1 = /app/share/qt5|' -i Qt4Qt5/qscintilla.pro",
        "sed -e 's|\\(features.path\\) = .*|\\1 = /app/lib/qt5/mkspecs/features|' -i Qt4Qt5/qscintilla.pro",
        "cd Qt4Qt5 && qmake && make install"
      ]
    },
    {
      "name": "sundials",
      "buildsystem": "cmake",
      "config-opts": [
        "-DKLU_ENABLE=ON",
        "-DKLU_INCLUDE_DIR:PATH=/app/include",
        "-DKLU_LIBRARY_DIR:PATH=/app/lib"
      ],
      "builddir": true,
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/LLNL/sundials/archive/v2.7.0.tar.gz",
          "sha256": "2cbedd5b4063078c7b060b346a3150e31fc2e9fea336aeb930a7c6b556b123c8"
        }
      ]
    },
    {
      "name": "openjdk",
      "buildsystem": "simple",
      "build-commands": [
        "/usr/lib/sdk/openjdk9/install.sh"
      ]
    },
    {
      "name": "octave",
      "config-opts": [
        "--disable-silent-rules",
        "--with-blas=openblas"
      ],
      "sources": [
        {
          "type": "archive",
          "path": "octave-4.3.0+.tar.gz",
          "sha256": "bd8cbcbac61cf552479e2163394ee4b7c6aeef7bd7a660ed1ddc1b48bb6f4899"
        }
      ]
    }
  ]
}
