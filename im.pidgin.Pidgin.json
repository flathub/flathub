{
  "id": "im.pidgin.Pidgin",
  "runtime": "org.gnome.Platform",
  "runtime-version": "3.28",
  "sdk": "org.gnome.Sdk",
  "command": "pidgin",
  "rename-desktop-file": "pidgin.desktop",
  "rename-icon": "pidgin",
  "rename-appdata-file": "pidgin.appdata.xml",
  "finish-args": [
    "--share=ipc",
    "--socket=x11",
    "--share=network",
    "--socket=pulseaudio",
    "--persist=.purple",
    "--filesystem=xdg-download",
    "--filesystem=xdg-run/dconf",
    "--filesystem=~/.config/dconf:ro",
    "--talk-name=ca.desrt.dconf",
    "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
    "--talk-name=org.freedesktop.Notifications",
    "--system-talk-name=org.freedesktop.Avahi"
  ],
  "cleanup": [
    "/include",
    "/share/man",
    "/share/info",
    "/share/gtk-doc",
    "/share/aclocal",
    "*.la",
    "*.a"
  ],
  "modules": [
    {
      "name": "gtkspell",
      "rm-configure": true,
      "sources": [
        {
          "type": "archive",
          "url": "https://sourceforge.net/projects/gtkspell/files/2.0.16/gtkspell-2.0.16.tar.gz",
          "sha256": "8fc7dc560167b2cb7193e76aca625a152dc19b0ebf49816b78539cbb90d80d02"
        },
        {
          "type": "script",
          "commands": [
            "autoreconf -sfi"
          ],
          "dest-filename": "autogen.sh"
        }
      ]
    },
    {
      "name": "libnice",
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.freedesktop.org/libnice/libnice.git",
          "tag": "0.1.14",
          "commit": "6bfea0d063fb358a44e8800eae314520a2babd61"
        }
      ]
    },
    {
      "name": "farstream",
      "sources": [
        {
          "type": "archive",
          "url": "http://freedesktop.org/software/farstream/releases/farstream/farstream-0.2.8.tar.gz",
          "sha256": "2b3b9c6b4f64ace8c83e03d1da5c5a2884c1cae10b35471072b574201ab38908"
        }
      ]
    },
    {
      "name": "avahi",
      "cleanup": [ "/bin" ],
      "config-opts": [
        "--with-distro=none",
        "--disable-libdaemon",
        "--disable-core-docs",
        "--disable-manpages",
        "--disable-mono",
        "--disable-qt3",
        "--disable-qt4",
        "--disable-python",
        "--disable-gtk",
        "--disable-gtk3"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://avahi.org/download/avahi-0.7.tar.gz",
          "sha256": "57a99b5dfe7fdae794e3d1ee7a62973a368e91e414bd0dfa5d84434de5b14804"
        }
      ]
    },
    {
      "name": "pidgin",
      "config-opts": [
        "--disable-meanwhile",
        "--disable-nm",
        "--enable-cyrus-sasl",
        "--disable-tk"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://sourceforge.net/projects/pidgin/files/Pidgin/2.13.0/pidgin-2.13.0.tar.bz2",
          "sha256": "2747150c6f711146bddd333c496870bfd55058bab22ffb7e4eb784018ec46d8f"
        }
      ],
      "post-install": [
        "chmod 755 /app/lib/pidgin/perl/auto/Pidgin/Pidgin.so",
        "chmod 755 /app/lib/purple-2/perl/auto/Purple/Purple.so"
      ]
    }
  ]
}
