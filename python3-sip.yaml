name: python3-sip
config-opts:
  - --sip-module=PyQt5.sip
  - --bindir=/app/bin
  - --destdir=/app/lib/python3.5/site-packages
  - --incdir=/app/include
  - --pyidir=/app/lib/python3.5/site-packages
  - --sipdir=/app/share/sip
  - --stubsdir=/app/lib/python3.5/site-packages
sources:
  # Source0
  - type: archive
    url: https://sourceforge.net/projects/pyqt/files/sip/sip-4.19.13/sip-4.19.13.tar.gz
    sha256: e353a7056599bf5fbd5d3ff9842a6ab2ea3cf4e0304a0f925ec5862907c0d15e
  # Patch50
  # make install should not strip (by default)
  - type: patch
    path: sip-4.18-no_strip.patch
  # Patch51
  # try not to rpath the world
  - type: patch
    path: sip-4.18-no_rpath.patch
  - type: script
    commands:
      - processed="$( sed -e 's|--prefix=/app||' <<< "${@}" )";
      - python3 "configure.py" ${processed};
    dest-filename: configure
cleanup:
  - /bin
