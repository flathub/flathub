id: io.github.ellie_commons.jorts
# elementary SDK is not available on Flathub, so use the elementary BaseApp instead
base: io.elementary.BaseApp
base-version: 'circe-24.08'
runtime: org.gnome.Platform
runtime-version: '48'
sdk: org.gnome.Sdk
command: io.github.ellie_commons.jorts
finish-args:
  - '--share=ipc'
  - '--device=dri'
  - '--socket=fallback-x11'
  - '--socket=wayland'
modules:
  # TODO Remove when https://github.com/flathub/io.elementary.BaseApp/pull/30 is merged
  - name: granite
    buildsystem: meson
    config-opts:
      - -Ddemo=false
    cleanup:
      - /share/icons
      - /share/metainfo
    sources:
      - type: git
        url: https://github.com/elementary/granite.git
        tag: 7.6.0
        commit: 065ba1f245b60ef867a6ca145e0891cf84eddcc7
        x-checker-data:
          type: git
          tag-pattern: '^([\d.]+)$'

  - name: RedactedScript
    buildsystem: simple
    build-commands:
     - install -Dm0644 RedactedScript-Regular.ttf -t ${FLATPAK_DEST}/share/fonts
     - install -Dm0644 OFL.txt -t ${FLATPAK_DEST}/share/doc/redacted-font
     - install -Dm0644 AUTHORS.txt -t ${FLATPAK_DEST}/share/doc/redacted-font
     - install -Dm0644 README.md -t ${FLATPAK_DEST}/share/doc/redacted-font
    cleanup:
      - '*'
    sources:
      - type: file
        url: https://github.com/christiannaths/redacted-font/raw/refs/heads/master/RedactedScript/fonts/ttf/RedactedScript-Regular.ttf
        sha256: 1ebaab9642a2f43fa33f449760469903143fd1d08b2433eb6c15e28602d9360d
      - type: file
        url: https://raw.githubusercontent.com/christiannaths/redacted-font/refs/heads/master/OFL.txt
        sha256: ed836da2ff14b9b2d04001057e03c0531afdd2626bf66a612b17124589f58efa
      - type: file
        url: https://raw.githubusercontent.com/christiannaths/redacted-font/refs/heads/master/AUTHORS.txt
        sha256: 84977eeb6e582a6d10bea0eda40e1c6dfdc8904309c6011932a9e2632c727043
      - type: file
        url: https://raw.githubusercontent.com/christiannaths/redacted-font/refs/heads/master/README.md
        sha256: e594f7f6bf03f7b11897d219184e215466cdfb9a8268b54cb7d5a626482dd722
        
  - name: jorts
    buildsystem: meson
    sources:
      - type: git
        url: https://github.com/ellie-commons/jorts.git
        tag: 3.1.1
        commit: f5c99a9637855d98b7ef714eb08b1f9b6aca9987
        x-checker-data:
          type: git
          tag-pattern: '^([\d.]+)$'
