app-id: com.metalcubebit.bitrip
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk
command: bitrip

finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=x11
  - --socket=pulseaudio
  - --device=all

modules:
  - name: app-files
    buildsystem: simple
    sources:
      - type: dir
        path: files
    build-commands:
      - install -D bitrip.sh /app/bin/bitrip
      - install -D com.metalcubebit.bitrip.desktop /app/share/applications/com.metalcubebit.bitrip.desktop
      - install -D metainfo/com.metalcubebit.bitrip.metainfo.xml /app/share/metainfo/com.metalcubebit.bitrip.metainfo.xml
      - install -D icons/hicolor/512x512/apps/com.metalcubebit.bitrip.png /app/share/icons/hicolor/512x512/apps/com.metalcubebit.bitrip.png

  - name: bitrip
    buildsystem: simple
    build-commands:
      - install -d /app/share/bitrip
      - bsdtar -xvf BITRIP-linux.tar.gz -C /app/share/bitrip
    sources:
      - type: file
        url: https://github.com/humbertinione/com.metalcubebit.bitrip/releases/download/v1.0.6/BITRIP-linux.tar.gz
        sha256: ae6377e6f43a0bc254f7323493ea7a1da6cba69f04d9bd3a4052a689a3636247
