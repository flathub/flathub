app-id: org.freedesktop.Sdk.Extension.dotnet10
branch: '25.08'
runtime: org.freedesktop.Sdk
runtime-version: '25.08'
sdk: org.freedesktop.Sdk
build-extension: true
separate-locales: false
modules:
  - name: dotnet-sdk
    buildsystem: simple
    build-commands:
      - mkdir -p /usr/lib/sdk/dotnet10/{bin,lib}
      - cp -r * /usr/lib/sdk/dotnet10/lib
      - ln -s /usr/lib/sdk/dotnet10/lib/dotnet /usr/lib/sdk/dotnet10/bin/dotnet
    sources:
      - type: archive
        only-arches: [x86_64]
        url: https://dotnetcli.blob.core.windows.net/dotnet/Sdk/10.0.100/dotnet-sdk-10.0.100-linux-x64.tar.gz
        sha256: a9631cc6bfad0ef167383ac654b54254bad95a6fb4b6f4309fa78f558055e637
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/Sdk/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://dotnetcli.blob.core.windows.net/dotnet/Sdk/$version/dotnet-sdk-$version-linux-x64.tar.gz
      - type: archive
        only-arches: [aarch64]
        url: https://dotnetcli.blob.core.windows.net/dotnet/Sdk/10.0.100/dotnet-sdk-10.0.100-linux-arm64.tar.gz
        sha256: b6425aeef6009a2d427bf600a2cd02f9dd6ac608e6bad021fd2f82f685914793
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/Sdk/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://dotnetcli.blob.core.windows.net/dotnet/Sdk/$version/dotnet-sdk-$version-linux-arm64.tar.gz
  - name: nuget-sources
    buildsystem: simple
    build-commands:
      - mkdir -p /usr/lib/sdk/dotnet10/nuget/packages
      - cp * /usr/lib/sdk/dotnet10/nuget/packages
    sources:
      - type: file
        only-arches: [x86_64]
        url: https://api.nuget.org/v3-flatcontainer/microsoft.aspnetcore.app.runtime.linux-x64/10.0.0/microsoft.aspnetcore.app.runtime.linux-x64.10.0.0.nupkg
        sha512: 5fc35c7082ca8ff684563cf51ade74cc6951a652076c8f87eae46fdb2158f4a8a833eb0a32075b35302c469f501b86b0e51180f488596317070906fc01373e5d
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/aspnetcore/Runtime/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://api.nuget.org/v3-flatcontainer/microsoft.aspnetcore.app.runtime.linux-x64/$version/microsoft.aspnetcore.app.runtime.linux-x64.$version.nupkg
      - type: file
        only-arches: [x86_64]
        url: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.runtime.linux-x64/10.0.0/microsoft.netcore.app.runtime.linux-x64.10.0.0.nupkg
        sha512: 58932d90464cd896e24bb55973f476fb7a9457188247e1b725ea50c1ccccd2a581aec469795a17189bbf6690db530afb02acf0266ea20fe6826d8a712bc2659e
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/aspnetcore/Runtime/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.runtime.linux-x64/$version/microsoft.netcore.app.runtime.linux-x64.$version.nupkg
      - type: file
        only-arches: [x86_64]
        url: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.crossgen2.linux-x64/10.0.0/microsoft.netcore.app.crossgen2.linux-x64.10.0.0.nupkg
        sha512: fa333d0e457c51dacb926e8fc9f6d4a5124b382d6955f0c794a0fd81753fd5f0e4169cbbabc4529d0e4609bc4be68e54eeaea57e1e2b43916c083d1f242fb363
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/aspnetcore/Runtime/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.crossgen2.linux-x64/$version/microsoft.netcore.app.crossgen2.linux-x64.$version.nupkg
      - type: file
        only-arches: [aarch64]
        url: https://api.nuget.org/v3-flatcontainer/microsoft.aspnetcore.app.runtime.linux-arm64/10.0.0/microsoft.aspnetcore.app.runtime.linux-arm64.10.0.0.nupkg
        sha512: b813d0975b5477971028df54742527274546fe263c6c8f16793329ae6a82fa6040d2183296c6632d425f05ce08f443ccc4d14e05027046343fbb3b75b3915048
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/aspnetcore/Runtime/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://api.nuget.org/v3-flatcontainer/microsoft.aspnetcore.app.runtime.linux-arm64/$version/microsoft.aspnetcore.app.runtime.linux-arm64.$version.nupkg
      - type: file
        only-arches: [aarch64]
        url: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.runtime.linux-arm64/10.0.0/microsoft.netcore.app.runtime.linux-arm64.10.0.0.nupkg
        sha512: ca8fffc5626e3b42699993b445a4f94086ba9efa81d4c334322780b57b835cce1265de1827c0f26f3d7ce58a353547b1a1b6a9788aca34b5f4d3671e87b28113
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/aspnetcore/Runtime/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.runtime.linux-arm64/$version/microsoft.netcore.app.runtime.linux-arm64.$version.nupkg
      - type: file
        only-arches: [aarch64]
        url: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.crossgen2.linux-arm64/10.0.0/microsoft.netcore.app.crossgen2.linux-arm64.10.0.0.nupkg
        sha512: 5245686e43206de142a5c8135744ef3144f35a52391b81dad4e952dba1ca0f3758f8012127b51cca667b491d7a5b79b0ea646e9ca890b57bb0b4df9f67f8c4d7
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/aspnetcore/Runtime/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://api.nuget.org/v3-flatcontainer/microsoft.netcore.app.crossgen2.linux-arm64/$version/microsoft.netcore.app.crossgen2.linux-arm64.$version.nupkg
      - type: file
        url: https://api.nuget.org/v3-flatcontainer/microsoft.net.illink.tasks/10.0.0/microsoft.net.illink.tasks.10.0.0.nupkg
        sha512: 9e6760040c938b8832b8fd7c53d23b2615520b7d7e999cb2410ce695d2b191a550081e6670f8e0be77e424242337ce1544513efa15d6d3106a3d26d4ba7cb441
        x-checker-data:
          type: html
          url: https://dotnetcli.blob.core.windows.net/dotnet/aspnetcore/Runtime/10.0/latest.version
          version-pattern: ^([\d\.a-z-]+)$
          url-template: https://api.nuget.org/v3-flatcontainer/microsoft.net.illink.tasks/$version/microsoft.net.illink.tasks.$version.nupkg
  - name: scripts
    buildsystem: simple
    build-commands:
      - mkdir -p /usr/lib/sdk/dotnet10/share/appdata
      - cp install.sh install-sdk.sh /usr/lib/sdk/dotnet10/bin
      - cp enable.sh /usr/lib/sdk/dotnet10
      - cp org.freedesktop.Sdk.Extension.dotnet10.appdata.xml ${FLATPAK_DEST}/share/appdata
    sources:
      - type: script
        commands:
          - mkdir -p /app/lib/dotnet
          - mkdir -p /app/bin
          - cp -r /usr/lib/sdk/dotnet10/lib/{dotnet,host,shared} /app/lib/dotnet
          - ln -s /app/lib/dotnet/dotnet /app/bin/dotnet
        dest-filename: install.sh
      - type: script
        commands:
          - /usr/lib/sdk/dotnet10/bin/install.sh
          - cp -r /usr/lib/sdk/dotnet10/lib/sdk /app/lib/dotnet
        dest-filename: install-sdk.sh
      - type: script
        commands:
          - export PATH=$PATH:/usr/lib/sdk/dotnet10/bin
          - export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/sdk/dotnet10/lib
          - export DOTNET_CLI_TELEMETRY_OPTOUT=true
          - export DOTNET_NOLOGO=true
          - export DOTNET_ROOT=/usr/lib/sdk/dotnet10/lib
        dest-filename: enable.sh
      - type: file
        path: org.freedesktop.Sdk.Extension.dotnet10.appdata.xml
