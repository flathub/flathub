{
    "app-id": "org.audacityteam.Audacity",
    "runtime": "org.gnome.Platform",
    "runtime-version": "3.24",
    "sdk": "org.gnome.Sdk",
    "command": "audacity",
    "finish-args": [
        "--share=ipc",
        "--socket=x11",
        "--socket=pulseaudio",
        "--filesystem=host"
    ],
    "rename-appdata-file": "audacity.appdata.xml",
    "rename-desktop-file": "audacity.desktop",
    "rename-icon": "audacity",
    "copy-icon": true,
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/share/aclocal",
        "/share/man",
        "*.la", "*.a"
    ],
    "modules": [
        {
            "name": "wxWidgets",
            "rm-configure": true,
            "cleanup": [
                "/bin",
                "/share/bakefile"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/wxWidgets/wxWidgets/releases/download/v3.0.2/wxWidgets-3.0.2.tar.bz2",
                    "sha256": "346879dc554f3ab8d6da2704f651ecb504a22e9d31c17ef5449b129ed711585d"
                },
                {
                    "type": "patch",
                    "path": "wxwidgets-gcc6.patch"
                }
            ]
        },
        {
            "name": "ffmpeg",
            "cleanup": ["/share/ffmpeg/examples"],
            "build-options" : {
                "arch" : {
                    "i386" : {"config-opts" : ["--arch=x86"]},
                    "arm" : {"config-opts" : ["--arch=arm"]}
                }
            },
            "config-opts": [
                "--enable-shared",
                "--disable-static",
                "--disable-everything",
                "--enable-decoder=aac",
                "--enable-decoder=ac3",
                "--enable-decoder=wmav2",
                "--enable-encoder=aac",
                "--enable-encoder=ac3",
                "--enable-encoder=wmav2",
                "--enable-demuxer=aac",
                "--enable-demuxer=ac3",
                "--enable-muxer=ac3",
                "--enable-muxer=asf",
                "--enable-muxer=ipod",
                "--enable-parser=aac",
                "--enable-parser=ac3"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://ffmpeg.org/releases/ffmpeg-2.3.6.tar.bz2",
                    "sha256": "cf1be1c5c3973b8db16b6b6e8e63a042d414fb5d47d3801a196cbba21a0a624a"
                }
            ]
        },
        {
            "name": "lame",
            "rm-configure": true,
            "config-opts": ["--disable-static"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz",
                    "sha256": "24346b4158e4af3bd9f2e194bb23eb473c75fb7377011523353196b19b9a23ff"
                },
                {
                    "type": "patch",
                    "path": "lame-msse.patch"
                },
                {
                    "type": "patch",
                    "path": "lame-gtk1-ac-directives.patch"
                },
                {
                    "type": "patch",
                    "path": "lame-ansi2knr2devnull.patch"
                },
                {
                    "type": "script",
                    "path": "autogen.sh",
                    "commands": [
                        "autoreconf -vfi"
                    ]
                }
            ]
        },
        {
            "name": "audacity",
            "config-opts": ["--disable-dynamic-loading"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://fossies.org/linux/misc/audacity-minsrc-2.1.3.tar.xz",
                    "sha256": "c8fe1d52a58cef05390118a7f458f89252a3aa70155b78e8e25c92c4eeaabf31"
                }
            ],
            "post-install": [
                "mv /app/share/mime/packages/audacity.xml /app/share/mime/packages/org.audacityteam.Audacity.xml"
            ]
        }
    ]
}
