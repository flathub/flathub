app-id: rocks.thorium.Thorium
base: org.electronjs.Electron2.BaseApp
base-version: '24.08'
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: thorium
separate-locales: false
rename-desktop-file: thorium-browser.desktop
rename-icon: thorium
finish-args:
  - --share=network
  - --share=ipc
  - --device=dri
  - --socket=fallback-x11
  - --socket=wayland
  - --socket=pulseaudio
  - --talk-name=org.kde.StatusNotifierWatcher
  - --env=LD_LIBRARY_PATH=/app/bundle/usr/lib:$LD_LIBRARY_PATH
modules:

  - name: thorium
    buildsystem: simple
    build-commands:
      - chmod +x App.AppImage
      - ./App.AppImage --appimage-extract
      - mv squashfs-root bundle
      - mkdir -p /app/share/icons/hicolor/512x512/apps
      - mkdir -p /app/share/applications
      - install -D bundle/thorium.png /app/share/icons/hicolor/512x512/apps/
      - install -D bundle/thorium-browser.desktop /app/share/applications/
      - mv bundle /app/
      - install -Dm755 thorium /app/bin/thorium
    sources:
      - type: file
        url: https://github.com/Alex313031/thorium/releases/download/M130.0.6723.174/Thorium_Browser_130.0.6723.174_AVX2.AppImage
        sha256: 123ece21d02361199a0e5bf9e80354e69b1cbb070110179ee953d903715dc6c4
        dest-filename: App.AppImage


      - type: script
        dest-filename: thorium
        commands:
          - zypak-wrapper /app/bundle/usr/bin/thorium --no-default-browser-check

      - type: file
        path: rocks.thorium.Thorium.appdata.xml
