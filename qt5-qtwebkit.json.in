{
    // see also: "base": "io.qt.qtwebkit.BaseApp"
    // https://github.com/flathub/io.qt.qtwebkit.BaseApp/blob/master/io.qt.qtwebkit.BaseApp.json
    //"name": "qtwebkit",
    "name": "qt5-qtwebkit",
    // The "buildsystem": "cmake-ninja" isn't available in flatpak 0.8.x in EL7 7.5
    // https://github.com/flatpak/flatpak/issues/461
    // https://github.com/matthiasclasen/flatpak/commit/75ae3d946e9787af3fb3281aedcb19358eb5bcfb
    //"buildsystem": "cmake-ninja",
    "buildsystem": "cmake",
    "builddir": true,
    "config-opts": [
        "-DCMAKE_BUILD_TYPE=Release",
        //"-DENABLE_TESTING=OFF",
        "-DCMAKE_INSTALL_LIBDIR=lib",
        //"-DENABLE_API_TESTS=OFF",
        //"-DENABLE_INSPECTOR_UI=OFF",
        //"-DENABLE_LEGACY_WEB_AUDIO=OFF",
        //"-DENABLE_MEDIA_SOURCE=OFF",
        //"-DENABLE_NETSCAPE_PLUGIN_API=OFF",
        //"-DENABLE_PRINT_SUPPORT=OFF",
        //"-DENABLE_SAMPLING_PROFILER=OFF",
        //"-DENABLE_SPELLCHECK=OFF",
        //"-DENABLE_VIDEO=OFF",
        //"-DENABLE_WEBKIT2=OFF",
        //"-DENABLE_WEB_AUDIO=OFF",
        //"-DUSE_GSTREAMER=OFF",
        //"-DENABLE_TOOLS=OFF",
        //"-DCMAKE_C_FLAGS_RELEASE:STRING=-DNDEBUG",
        //"-DCMAKE_CXX_FLAGS_RELEASE:STRING=-DNDEBUG",
        "-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON",
        "-DPORT=Qt"
    ],
    // https://bugzilla.redhat.com/show_bug.cgi?id=1456261
    // https://bugs.webkit.org/show_bug.cgi?id=140176
    "build-options": {
        "arch": {
            "i386": {
                "cflags": "-O2 -g1 -Wno-deprecated-declarations",
                "cxxflags": "-O2 -g1 -Wno-deprecated-declarations -fpermissive",
                "config-opts": [
                    "-DCMAKE_SYSTEM_PROCESSOR=i586"
                ]
            },
            "arm": {
                "cflags": "-O2 -g1 -Wno-deprecated-declarations",
                "cxxflags": "-O2 -g1 -Wno-deprecated-declarations -fpermissive",
                "config-opts": [
                    "-DCMAKE_SYSTEM_PROCESSOR=arm",
                    "-DENABLE_JIT=OFF"
                ]
            }
        }
    },
    "sources": [
        //{
        //    "type": "archive",
        //    "url": "https://github.com/annulen/webkit/releases/download/qtwebkit-5.212.0-alpha2/qtwebkit-5.212.0-alpha2.tar.xz",
        //    "sha256": "f8f901de567e11fc5659402b6b827eac75505ff9c5072d8e919aa306003f8f8a"
        //}
        {
            "type": "git",
            "url": "git://code.qt.io/qt/qtwebkit.git",
            "branch": "5.212",
            //"tag": "v5.212.0-alpha2"
            "commit": "72cfbd7664f21fcc0e62b869a6b01bf73eb5e7da"
        },
        //{
        //    // Patch0
        //    // Upstream patch to fix pagewidth issue with trojita
        //    // https://github.com/annulen/webkit/issues/511
        //    // https://github.com/annulen/webkit/commit/6faf11215e1af27d35e921ae669aa0251a01a1ab
        //    // https://github.com/annulen/webkit/commit/76420459a13d9440b41864c93cb4ebb404bdab55
        //    "type": "patch",
        //    "path": "qt5-qtwebkit-5.212.0-alpha2_fix-pagewidth.patch",
        //    "strip-components": 1,
        //    "sha256": "91d74e91e8ec81a3625dc2035078af1f05604f9c9ecaee4edd20a89e8873d11d"
        //},
        //{
        //    // Patch1
        //    // Patch from Kevin Kofler to fix https://github.com/annulen/webkit/issues/573
        //    "type": "patch",
        //    "path": "qt5-qtwebkit-5.212.0-alpha2_fix-null-pointer-dereference.patch",
        //    "strip-components": 1,
        //    "sha256": "467b9959be132d54e2891ef57dbca9fdafedc168d57e0e4abd0ba9d2a0662359"
        //},
        {
            // Patch2
            // Patch for new CMake policy CMP0071 to explicitly use old behaviour.
            "type": "patch",
            "path": "qt5-qtwebkit-5.212.0-alpha2_cmake-cmp0071.patch",
            "strip-components": 1,
            "sha256": "bcb5883913c6149e0b1fb4f369dc6db7eec4ca45891d37eb7787514c1eadab7f"
        }//,
        //{
        //    // Patch3
        //    // Patch to fix for missing source file.
        //    "type": "patch",
        //    "path": "qt5-qtwebkit-5.212.0-alpha2_fix-missing-sources.patch",
        //    "strip-components": 1,
        //    "sha256": "b4387305f84ba072176781b1b9fb5f2c3faa1a955b999eb31744bdeda34877fc"
        //},
        //{
        //    // Patch31
        //    // disable ES6 Proxy
        //    "type": "patch",
        //    "path": "qt5-qtwebkit-5.212.0-alpha2_Disable-ES6-Proxy-object.patch",
        //    "strip-components": 1,
        //    "sha256": "3065ed7ebc62d28877f0f0519db73bf4d054308dc4ebf54a3979bf4df5e03408"
        //}
    ],
    "post-install": [
        "mv '/app/mkspecs' '/app/lib';"
    ],
    "cleanup-platform": [
        //"/bin",
        "/mkspecs"
    ]
}
