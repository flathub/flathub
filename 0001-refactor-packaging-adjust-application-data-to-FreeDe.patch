From de08f0be527e7ace680c3296560d4970703fd1b8 Mon Sep 17 00:00:00 2001
From: Sefa Eyeoglu <contact@scrumplex.net>
Date: Fri, 31 Dec 2021 19:32:56 +0100
Subject: [PATCH 1/2] refactor(packaging): adjust application data to
 FreeDesktop specifications

---
 ...io.github.zeemzha.vibrantLinux.appdata.xml |  38 ++++++++++++++++++
 ...io.github.zeemzha.vibrantLinux.desktop.in} |   2 +-
 ...png => io.github.zeemzha.vibrantLinux.png} | Bin
 resources.qrc                                 |   2 +-
 src/mainwindow.cpp                            |   2 +-
 vibrantLinux.pro                              |  13 +++---
 6 files changed, 49 insertions(+), 8 deletions(-)
 create mode 100644 assets/io.github.zeemzha.vibrantLinux.appdata.xml
 rename assets/{application.desktop.in => io.github.zeemzha.vibrantLinux.desktop.in} (86%)
 rename assets/{vibrantLinux.png => io.github.zeemzha.vibrantLinux.png} (100%)

diff --git a/assets/io.github.zeemzha.vibrantLinux.appdata.xml b/assets/io.github.zeemzha.vibrantLinux.appdata.xml
new file mode 100644
index 0000000..c1edcce
--- /dev/null
+++ b/assets/io.github.zeemzha.vibrantLinux.appdata.xml
@@ -0,0 +1,38 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<component type="desktop-application">
+    <id>io.github.zeemzha.vibrantLinux</id>
+    <name>vibrantLinux</name>
+    <developer_name>zee</developer_name>
+    <summary>System utility to adjust color saturation of X11 screens</summary>
+    <metadata_license>CC0-1.0</metadata_license>
+    <project_license>MIT</project_license>
+    <description>
+        <p>
+            vibrantLinux is a GUI tool to serves the same purpose as VibranceGUI for Windows, which to modify
+            the saturation of any given screen whenever certain programs are launched/are in focus.
+        </p>
+    </description>
+    <launchable type="desktop-id">io.github.zeemzha.vibrantLinux.desktop</launchable>
+    <screenshots>
+        <screenshot type="default">
+            <image>https://github.com/zee-mzha/vibrantLinux/raw/a80e4c87ff048cc938d3276db8b6a324c9480bda/assets/program.png</image>
+        </screenshot>
+    </screenshots>
+    <categories>
+        <category>Utility</category>
+    </categories>
+    <url type="homepage">https://github.com/zee-mzha/vibrantLinux</url>
+    <url type="bugtracker">https://github.com/zee-mzha/vibrantLinux/issues</url>
+    <update_contact>contact@scrumplex.net</update_contact>
+    <releases>
+         <release date="2020-11-01" version="2.1.6">
+            <description>
+                <ul>
+                    <li>Initial release</li>
+                </ul>
+            </description>
+        </release>
+    </releases>
+    <content_rating type="oars-1.1"/>
+</component>
+
diff --git a/assets/application.desktop.in b/assets/io.github.zeemzha.vibrantLinux.desktop.in
similarity index 86%
rename from assets/application.desktop.in
rename to assets/io.github.zeemzha.vibrantLinux.desktop.in
index 30af0a4..355f11a 100644
--- a/assets/application.desktop.in
+++ b/assets/io.github.zeemzha.vibrantLinux.desktop.in
@@ -4,7 +4,7 @@ Name=Vibrant Linux
 GenericName=Digital vibrance controller
 Comment=Program-specific digital vibrance controller
 Exec=$${target.path}/vibrantLinux
-Icon=vibrantLinux
+Icon=io.github.zeemzha.vibrantLinux
 Terminal=false
 Type=Application
 Categories=Utility;
diff --git a/assets/vibrantLinux.png b/assets/io.github.zeemzha.vibrantLinux.png
similarity index 100%
rename from assets/vibrantLinux.png
rename to assets/io.github.zeemzha.vibrantLinux.png
diff --git a/resources.qrc b/resources.qrc
index dc14ba6..614ad80 100644
--- a/resources.qrc
+++ b/resources.qrc
@@ -1,5 +1,5 @@
 <RCC>
     <qresource prefix="/">
-        <file>assets/vibrantLinux.png</file>
+        <file>assets/io.github.zeemzha.vibrantLinux.png</file>
     </qresource>
 </RCC>
diff --git a/src/mainwindow.cpp b/src/mainwindow.cpp
index fc00e5c..592a85a 100644
--- a/src/mainwindow.cpp
+++ b/src/mainwindow.cpp
@@ -15,7 +15,7 @@ const int CURRENT_CONFIG_VER = 2;
 mainWindow::mainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::mainWindow){
 	ui->setupUi(this);
 
-	QIcon icon = QIcon::fromTheme("vibrantLinux", QIcon(":/assets/vibrantLinux.png"));
+	QIcon icon = QIcon::fromTheme("io.github.zeemzha.vibrantLinux", QIcon(":/assets/io.github.zeemzha.vibrantLinux.png"));
 	setWindowIcon(icon);
 	systray.setIcon(icon);
 
diff --git a/vibrantLinux.pro b/vibrantLinux.pro
index d487f8e..9792f94 100644
--- a/vibrantLinux.pro
+++ b/vibrantLinux.pro
@@ -63,8 +63,8 @@ else: unix:!android: target.path = /usr/bin
 !isEmpty(target.path): INSTALLS += target
 
 
-desktopconfig.input = assets/application.desktop.in
-desktopconfig.output = application.desktop
+desktopconfig.input = assets/io.github.zeemzha.vibrantLinux.desktop.in
+desktopconfig.output = io.github.zeemzha.vibrantLinux.desktop
 
 QMAKE_SUBSTITUTES += \
 	desktopconfig
@@ -72,10 +72,13 @@ QMAKE_SUBSTITUTES += \
 desktop.path = /usr/share/applications
 desktop.files += $${desktopconfig.output}
 
-icons.path = /usr/share/pixmaps
-icons.files += assets/vibrantLinux.png
+icons.path = /usr/share/icons/hicolor/512x512/apps
+icons.files += assets/io.github.zeemzha.vibrantLinux.png
 
-INSTALLS += desktop icons
+appdata.path = /usr/share/metainfo
+appdata.files += assets/io.github.zeemzha.vibrantLinux.appdata.xml
+
+INSTALLS += desktop icons appdata
 
 RESOURCES += \
 	resources.qrc
-- 
2.34.1

