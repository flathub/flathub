id: org.unifiedpush.Example
runtime: org.freedesktop.Platform
runtime-version: '25.08'
sdk: org.freedesktop.Sdk
command: unifiedpush_example
finish-args:
  # X11 fallback
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  # To send the test notification
  - --share=network
  # UnifiedPush
  - --talk-name=org.unifiedpush.Distributor.*
  # We don't need to explicitly own org.unifiedpush.Example, as our id
  # is automatically allowed, if we were using a different service name:
  #- --own-name=org.unifiedpush.Example
  #
  # Used to show notifications
  - --talk-name=org.freedesktop.Notifications
modules:
  - name: App
    buildsystem: simple
    build-commands:
      - unzip flutter-example-linux.zip -d ${FLATPAK_DEST}/bin/
    post-install:
      - install -Dm0644 LICENSE -t ${FLATPAK_DEST}/share/licenses/$FLATPAK_ID/App
      - install -Dm0644 org.unifiedpush.Example.png -t ${FLATPAK_DEST}/share/icons/hicolor/512x512/apps
      - install -Dm0644 org.unifiedpush.Example.service -t ${FLATPAK_DEST}/share/dbus-1/services
      - install -Dm0644 org.unifiedpush.Example.desktop -t ${FLATPAK_DEST}/share/applications
      - install -Dm0644 org.unifiedpush.Example.metainfo.xml -t ${FLATPAK_DEST}/share/metainfo
    sources:
      - type: file
        url: https://codeberg.org/api/packages/UnifiedPush/generic/flutter-connector/v6.2.0+1.0.0+1/flutter-example-linux.zip
        sha256: a6b74758342003b5479a630904669b9bfd8e947cbb409299d42b9e04b7bbbe40
      - type: file
        url: https://codeberg.org/UnifiedPush/flutter-connector/raw/commit/abd6ffe00ecf0564bd668000ae7559e0cf5a9368/example/flatpak/assets/LICENSE
        sha256: faaebd0bfade3856fabd34d5bf20bd0db37a849806bf45de3c213e6c2da2f51b
      - type: file
        url: https://codeberg.org/UnifiedPush/flutter-connector/raw/commit/abd6ffe00ecf0564bd668000ae7559e0cf5a9368/example/flatpak/assets/org.unifiedpush.Example.png
        sha256: 4e50cd21735c0f9785ddbd3f22f8daca9e4f97eb61ad661e61aa76be2a04e02c
      - type: file
        url: https://codeberg.org/UnifiedPush/flutter-connector/raw/commit/abd6ffe00ecf0564bd668000ae7559e0cf5a9368/example/flatpak/assets/org.unifiedpush.Example.service
        sha256: fd578966dd91720c614a20b9a7f6b2125dc93b46ba02bff166f3f655f7105079
      - type: file
        url: https://codeberg.org/UnifiedPush/flutter-connector/raw/commit/abd6ffe00ecf0564bd668000ae7559e0cf5a9368/example/flatpak/assets/org.unifiedpush.Example.desktop
        sha256: 41c23e89ec413c1ffce22968ac0777ea5df282aadc4a34b2137f4ef6a213e30f
      - type: file
        url: https://codeberg.org/UnifiedPush/flutter-connector/raw/commit/abd6ffe00ecf0564bd668000ae7559e0cf5a9368/example/flatpak/assets/org.unifiedpush.Example.metainfo.xml
        sha256: bf9583bb327655fcf6aa88a19be2f03ab2c905ed150f8f4083ce286f071d7de0
