{
  "app-id": "org.aimodels.aiy",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "22.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "aiy",
  "finish-args": [
    "--share=network"
  ],
  "modules": [
    {
      "name": "aiy",
      "buildsystem": "simple",
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/visioninit/aiy.git",
          "branch": "main"
        }
      ],
      "modules": [
        "resources/build/flatpak/pypi-dependencies.json",
        {
          "name": "other-modules"
        }
      ],
      "build-commands": [
        "pip3 install pyinstaller",
        "pyinstaller --onefile aiy.py --name aiy --distpath dist/.",
        "pip-licenses --with-system --with-authors --with-url > dist/licenses.txt",
        "cat LICENSE dist/licenses.txt > dist/all-licenses.txt",
        "install -D dist/aiy /app/bin/aiy",
        "cp dist/all-licenses.txt /app/bin/LICENSE",
        "install -D resources/build/flatpak/org.aimodels.aiy.metainfo.xml /app/share/metainfo/org.aimodels.aiy.metainfo.xml",
        "install -D resources/build/flatpak/org.aimodels.aiy.desktop /app/share/applications/org.aimodels.aiy.desktop",
        "install -D resources/build/flatpak/org.aimodels.aiy.png /app/share/icons/hicolor/128x128/apps/org.aimodels.aiy.png"
      ],
      "cleanup": [
        "venv",
        ".egg-info",
        ".whl",
        "dist",
        "build",
        "files/lib/python3.10"
      ]
    }
  ]
}
