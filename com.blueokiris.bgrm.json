{
    "app-id": "com.blueokiris.bgrm",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "22.08",
    "sdk": "org.freedesktop.Sdk",
    "command": "bgrm-fp.sh",
    "finish-args": [
        "--device=all",
        "--socket=x11",
        "--share=ipc",
        "--filesystem=host:ro"
    ], "modules": [
        {
            "name": "virtualenv",
            "buildsystem": "simple",
            "build-options": {
                "build-args": [
                    "--share=network"
                ]
            }, "build-commands": [
                "python3 -m pip install -U pip; python3 -m pip install virtualenv; python3 -m virtualenv /app/.venv",
                "source /app/.venv/bin/activate; pip install -U pip; pip install -r requirements.txt --no-cache-dir; deactivate"
            ], "sources": [
                {
                    "type": "file",
                    "path": "bgrm/requirements.txt"
                } 
            ]
        }, {
            "name": "v4l2-patch",
            "buildsystem": "simple",
            "build-commands": [
                "install -D v4l2\\ \\(patch\\).py /app/.venv/lib/python3.9/site-packages/v4l2.py"
            ], "sources": [
                {
                    "type": "file",
                    "path": "scripts/v4l2 (patch).py"
                }
            ]
        }, {
            "name": "bgrm",
            "buildsystem": "simple",
            "build-commands": [
                "install -D __main__.py /app/bgrm/__main__.py",
                "install -D bgrm.py /app/bgrm/bgrm.py",
                "install -D cam.py /app/bgrm/cam.py",
                "install -D settings.py /app/bgrm/settings.py",

                "install -D bgrm-fp.sh /app/bin/bgrm-fp.sh"
            ], "sources": [
                {
                    "type": "file",
                    "path": "bgrm-fp.sh"
                }, {
                    "type": "file",
                    "path": "bgrm/__main__.py"
                }, {
                    "type": "file",
                    "path": "bgrm/bgrm.py"
                }, {
                    "type": "file",
                    "path": "bgrm/cam.py"
                }, {
                    "type": "file",
                    "path": "bgrm/settings.py"
                }
            ]
        }
    ]
}
