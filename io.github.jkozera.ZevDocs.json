{
    "app-id" : "io.github.jkozera.ZevDocs",
    "runtime" : "org.gnome.Sdk",
    "runtime-version" : "3.28",
    "sdk" : "org.gnome.Sdk",
    "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.golang"
    ],
    "command" : "zevdocs",
    "rename-icon": "zevdocs",
    "finish-args" : [
        "--share=ipc",
        "--socket=x11",
        "--socket=wayland",
        "--device=dri",
        /* Needs to talk to the network: */
        "--share=network",
        "--filesystem=host:ro",
        "--filesystem=xdg-run/dconf",
        "--filesystem=~/.config/dconf:ro",
        "--talk-name=ca.desrt.dconf",
        "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
    ],
    "build-options" : {
        "cflags" : "-O2",
        "cxxflags" : "-O2",
        "env" : {
            "V" : "1"
        },
        "build-args": ["--share=network"]
    },
    "cleanup" : [
        "/include",
        "/lib/pkgconfig",
        "/share/pkgconfig",
        "/share/aclocal",
        "/man",
        "/share/man",
        "*.la",
        "*.a"
    ],
    "modules" : [
        {
            "name" : "zevdocs",
            "config-opts" : [
                "--enable-flatpak-build"
            ],
            "sources" : [
                {
                    "type" : "git",
                    "url" : "ssh://git@github.com/jkozera/zevdocs.git",
                    "tag" : "0.1.0",
		    "commit": "17f79dfbff8f2c8a90be4c7431ba5d2ed91c3c8c"
                }
            ]
        },
        {
            "name": "zealcore",
            "buildsystem": "simple",
            "sources": [
                {
                    "type": "git",
                    "url": "ssh://git@github.com/jkozera/zealcore.git",
                    "commit" : "83166e99106f3a3edb0e235e7f482078eaf682d9",
                    "dest": "go/src/github.com/zealdocs/zealcore"
                }
            ],
            "build-commands": [
                "GOPATH=$(pwd)/go sh -c '/usr/lib/sdk/golang/bin/go get -u github.com/golang/dep/cmd/dep && cd go/src/github.com/zealdocs/zealcore && $GOPATH/bin/dep ensure && /usr/lib/sdk/golang/bin/go build'",
                "install -D go/src/github.com/zealdocs/zealcore/zealcore /app/bin/zealcore"
            ]
        }
    ]
}
