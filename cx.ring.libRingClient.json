{
    "name": "libRingClient",
    "buildsystem": "cmake",
    "config-opts":[
        "-DCMAKE_INSTALL_PREFIX=/app",
        "-DCMAKE_BUILD_TYPE=Release"
    ],
    "sources":[
        {
            "type": "git",
            "url": "https://gerrit-ring.savoirfairelinux.com/ring-lrc.git",
            "commit": "a5544675c5fc65c91dc160435bebf6d7de37c769"
        }
    ],
    "modules":[
        "cx.ring.RingDaemon.json",
        {
            "name": "qt5-qtbase",
            "cleanup-platform": [ "/bin", "/mkspecs" ],
            "build-options" : {
                "arch" : {
                    "x86_64" : {
                        "config-opts" : [
                            "-debug",
                            "-reduce-relocations"
                        ]
                    },
                    "arm" : {
                        "config-opts" : [
                            "-no-reduce-relocations",
                            "-no-use-gold-linker",
                            "-optimize-size"
                        ]
                    }
                }
            },
            "config-opts": [
                "-prefix /app",
                "-confirm-license",
                "-opensource",
                "-shared",
                "-platform linux-g++",
                "-optimized-qmake",
                "-nomake examples",
                "-nomake tests",
                "-system-harfbuzz",
                "-system-sqlite",
                "-accessibility",
                "-dbus-linked",
                "-fontconfig",
                "-glib",
                "-icu",
                "-openssl-linked",
                "-no-pch",
                "-no-rpath",
                "-no-separate-debug-info",
                "-reduce-relocations",
                "-no-directfb",
                "-no-linuxfb",
                "-no-kms",
                "-no-cups",
                "-system-proxies",
                "-gtk"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.qt.io/official_releases/qt/5.9/5.9.2/submodules/qtbase-opensource-src-5.9.2.tar.xz",
                    "sha256": "7fe2bb468955f633c71b3ddd3c269e68a2c4137a4e5b8dd12dcdb34cbc6d609b"
                },
                {
                    "type": "shell",
                    "commands": [ "mv configure configure.qt" ]
                },
                {
                    "type": "script",
                    "commands": [
                        "processed=`sed -e 's/--/-/g ; s/=/ /g' <<< $@`",
                        "./configure.qt $processed"
                    ],
                    "dest-filename": "configure"
                }
            ]
        }
    ]
}
