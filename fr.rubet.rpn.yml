app-id: fr.rubet.rpn
runtime: org.freedesktop.Platform
runtime-version: '21.08'
sdk: org.freedesktop.Sdk
command: rpn
modules:
  - name: mpfr
    config-opts:
      - --disable-static
      - --enable-maintainer-mode
    sources:
      - type: archive
        url: https://ftp.gnu.org/gnu/mpfr/mpfr-4.0.2.tar.xz
        sha256: 1d3be708604eae0e42d578ba93b390c2a145f17743a744d8f3f8c2ad5855a38a
      - type: shell
        commands:
          - cp -p /usr/share/automake-*/config.{sub,guess} .;
          - autoreconf -vfi;
    post-install:
      - install -p -D -m 0644 "COPYING" -t "${FLATPAK_DEST}/share/licenses/mpfr/";
  - name: rpn
    buildsystem: cmake-ninja
    sources:
      - type: git
        url: https://github.com/louisrubet/rpn.git
        tag: v2.4
        commit: bafc48ab85e06003d38b4cba1a95fcbc4562acd5
    post-install:
      - install -p -D -m 0644 "LICENSE" -t "${FLATPAK_DEST}/share/licenses/rpn/";
