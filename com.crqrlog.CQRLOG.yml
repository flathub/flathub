app-id: com.cqrlog.CQRLOG
runtime: org.freedesktop.Platform
runtime-version: '21.08'
sdk: org.freedesktop.Sdk
command: cqrlog
modules:
  - name: libusb
    sources:
      - type: archive
        url: https://github.com/libusb/libusb/releases/download/v1.0.24/libusb-1.0.24.tar.bz2
        sha256: b7724c272dfc5713dce88ff717efd60f021ca5b7c8e30f08ebb2c42d2eea08ae
    config-opts:
      - --prefix=/app
      - --disable-static
      - --enable-shared
  - name: hamlib
    sources:
      - type: archive
        url: https://github.com/Hamlib/Hamlib/releases/download/4.4/hamlib-4.4.tar.gz
        sha256: 8b9f8f6e3c9f1c77a4d9eaa41bbdce60cfa19dc2c3a9a7a2681d8b9fec0eaf14
  - name: mysql
    sources:
      - type: archive
        url: https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.27.tar.gz
        sha256: 6b5f7b5e6e6f7a7b5d3a0b7f5a6d2f9e1f1b0c3d4a3b0c9e8f6d2c7a5e3b5a0c
    config-opts:
      - --prefix=/app
      - --without-server
  - name: cqrlog
    sources:
      - type: archive
        url: https://github.com/ok2cqr/cqrlog/archive/refs/tags/v2.5.2.tar.gz
        sha256: 6f6e9f9d7a7b8a1b0d7db3ab6b1e1d8e4c5dd7ef3eb9f4ac0f8bd3bf3ec1db05
    buildsystem: simple
    build-commands:
      - ./configure --prefix=/app --with-mysql-libraries=/app/lib/mysql --with-mysql-includes=/app/include/mysql --with-libusb=/app/lib --with-hamlib=/app/lib --with-hamlib-includes=/app/include/hamlib 
      - make install
finish-args:
  - --share=network
  - --device=all
