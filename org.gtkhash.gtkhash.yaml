app-id: org.gtkhash.gtkhash
runtime: org.freedesktop.Platform
runtime-version: '19.08'
sdk: org.freedesktop.Sdk
command: gtkhash

rename-desktop-file: gtkhash.desktop
rename-appdata-file: gtkhash.appdata.xml
rename-icon: gtkhash
copy-icon: true # GtkAboutDialog uses logo-icon-name:PACKAGE

finish-args:
  # X11 + XShm access
  - --share=ipc
  - --socket=x11
  # Wayland access
  - --socket=wayland
  # Allow opening files from cmdline, drag-and-drop
  - --filesystem=host:ro

modules:
  - shared-modules/intltool/intltool-0.51.json

  - name: gtkhash
    sources:
      - type: archive
        url: https://github.com/tristanheaven/gtkhash/releases/download/v1.3/gtkhash-1.3.tar.xz
        sha256: a94b12165bfa2ebec7270ce3bb8fb27da8a0624fb48ecfc0b68bcaf8c40db7af
    buildsystem: autotools
    config-opts:
      - --enable-gcrypt
      - --enable-linux-crypto
      - --disable-blake2
      - --disable-dependency-tracking
      - --disable-silent-rules
