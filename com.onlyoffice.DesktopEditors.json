{
  "app-id": "com.onlyoffice.DesktopEditors",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "19.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "/app/desktopeditors/onlyoffice_desktopeditors.sh",
  "separate-locales": false,
  "tags": [
    "AGPL-3.0"
  ],
    "finish-args": [
        "--share=network",
        "--share=ipc",
        "--socket=x11",
        "--socket=wayland",
        "--socket=pulseaudio",
        "--device=all",
        "--filesystem=xdg-videos:ro",
        "--filesystem=xdg-pictures:ro",
        "--filesystem=xdg-download",
        "--filesystem=host",
        "--talk-name=org.gtk.vfs.*"
   ],
  "modules": [
    {
      "name": "onlyoffice",
      "buildsystem": "simple",
      "build-commands": [
        "mv desktopeditors /app/desktopeditors",
        "chmod +x /app/desktopeditors/DesktopEditors",
        "chmod +x /app/desktopeditors/onlyoffice_desktopeditors.sh",
        "chmod +x /app/desktopeditors/post_install.sh",
        "/app/desktopeditors/post_install.sh",
        "install -d /app/share/applications",
        "install -Dm644 /app/desktopeditors/asc-de-64.png /app/share/icons/hicolor/256x256/apps/${FLATPAK_ID}.png",
        "install -Dm644 com.onlyoffice.DesktopEditors.appdata.xml /app/share/appdata/com.onlyoffice.DesktopEditors.appdata.xml"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.onlyoffice.com/install/desktop/editors/linux/old/onlyoffice-desktopeditors-x64.tar.gz",
          "sha256": "d6a85c8e0a7501591d518a37e90869557c9f542dcd93d8b1123226b82c2ce293",
          "strip-components": 0
        },
        {
          "type": "file",
          "path": "com.onlyoffice.DesktopEditors.appdata.xml"
        }
      ],
      "modules": [
        {
          "name": "libcxx",
          "buildsystem": "cmake-ninja",
          "builddir": true,
          "make-args": [
            "cxx"
          ],
          "no-make-install": true,
          "config-opts": [
            "-DCMAKE_BUILD_TYPE=Release"
          ],
          "cleanup": [
            "/include",
            "/lib/*.a"
          ],
          "build-commands": [
            "ninja install-libcxxabi",
            "ninja install-libcxx"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://releases.llvm.org/5.0.0/llvm-5.0.0.src.tar.xz",
              "sha256": "e35dcbae6084adcf4abb32514127c5eabd7d63b733852ccdb31e06f1373136da"
            },
            {
              "type": "archive",
              "url": "https://releases.llvm.org/5.0.0/libcxx-5.0.0.src.tar.xz",
              "sha256": "eae5981e9a21ef0decfcac80a1af584ddb064a32805f95a57c7c83a5eb28c9b1",
              "dest": "projects/libcxx"
            },
            {
              "type": "archive",
              "url": "https://releases.llvm.org/5.0.0/libcxxabi-5.0.0.src.tar.xz",
              "sha256": "176918c7eb22245c3a5c56ef055e4d69f5345b4a98833e0e8cb1a19cab6b8911",
              "dest": "projects/libcxxabi"
            }
          ]
        }
      ]
    }
  ]
}
