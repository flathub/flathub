---
app-id: org.otter_browser.OtterBrowser

base: io.qt.qtwebkit.BaseApp
base-version: '5.12'

runtime: org.kde.Platform
runtime-version: '5.12'
sdk: org.kde.Sdk

command: otter-browser
rename-desktop-file: otter-browser.desktop
rename-appdata-file: otter-browser.appdata.xml
rename-icon: otter-browser

finish-args:
  # X11 + XShm
  - --socket=x11
  - --share=ipc
  # Acceleration
  - --device=dri
  # Network access
  - --share=network
  # Sound
  - --socket=pulseaudio
  # Downloading files
  - --filesystem=xdg-download
  # Suppress unusable sandbox warnings
  - --env=QTWEBENGINE_DISABLE_SANDBOX=1

modules:
  - name: otter-browser
    buildsystem: cmake-ninja
    post-install:
      - mkdir -p /app/share/metainfo
      - install -Dm644 -t /app/share/metainfo packaging/otter-browser.appdata.xml
    sources:
      - type: archive
        url: https://github.com/OtterBrowser/otter-browser/archive/v0.9.96.tar.gz
        sha256: 3a3c971508a549579fbe83a94c1892c42296a3bd3e5209a035698ae03205c48d
