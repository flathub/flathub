app-id: org.milkytracker.MilkyTracker
runtime: org.freedesktop.Platform
runtime-version: '21.08'
sdk: org.freedesktop.Sdk
command: milkytracker
finish-args:
  - --socket=x11
  - --socket=pulseaudio
  - --device=dri
  - --filesystem=host # not likely to support portals anytime soon

rename-desktop-file: milkytracker.desktop
rename-icon: milkytracker

modules:
  - name: milkytracker
    buildsystem: cmake-ninja
    post-install:
      - install -Dm644 resources/milkytracker.appdata $FLATPAK_DEST/share/appdata/org.milkytracker.MilkyTracker.appdata.xml
      - install -Dm644 resources/milkytracker.desktop $FLATPAK_DEST/share/applications/milkytracker.desktop
      - install -Dm644 resources/pictures/carton.png $FLATPAK_DEST/share/icons/hicolor/128x128/apps/milkytracker.png
    sources:
      - type: archive
        strip-components: 0
        url: https://github.com/milkytracker/MilkyTracker/releases/download/v1.03.00/milkytracker-1.03.00.tar.gz
        sha256: 9ca940018bc07f6b420ab2070f3c09529a590d1588ad9fa7ea5cedc9468a598c
