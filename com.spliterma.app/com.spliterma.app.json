{
  "app-id": "com.spliterma.app",
  "runtime": "org.gnome.Platform",
  "runtime-version": "46",
  "sdk": "org.gnome.Sdk",
  "sdk-extensions": ["org.freedesktop.Sdk.Extension.rust-stable"],
  "command": "spliterma",
  "finish-args": [
    "--socket=wayland",
    "--socket=fallback-x11",
    "--share=network",
    "--device=dri",
    "--filesystem=home",
    "--env=TERM=xterm-256color",
    "--env=COLORTERM=truecolor",
    "--env=VTE_VERSION=6003",
    "--env=GTK_DEBUG="
  ],
  "modules": [
    {
      "name": "vte",
      "buildsystem": "meson",
      "config-opts": ["-Dgtk4=true", "-Dgtk3=false", "-Dvapi=false", "-Da11y=true"],
      "cleanup": ["/include", "/lib/pkgconfig", "/lib/*.a", "/share/gir-1.0", "/lib/girepository-1.0"],
      "sources": [
        { "type": "git", "url": "https://gitlab.gnome.org/GNOME/vte.git", "tag": "0.74.2" }
      ]
    },
    {
      "name": "spliterma",
      "buildsystem": "simple",
      "build-options": {
        "append-path": "/usr/lib/sdk/rust-stable/bin",
        "env": { "CARGO_HOME": "/run/build/spliterma/.cargo" }
      },
      "build-commands": [
        "cargo --version",
        "cargo build --release --frozen",
        "install -Dm755 target/release/spliterma /app/bin/spliterma",
        "install -Dm644 data/spliterma-rc /app/etc/spliterma-rc",
        "install -Dm644 data/com.spliterma.app.desktop /app/share/applications/com.spliterma.app.desktop",
        "install -Dm644 data/com.spliterma.app.metainfo.xml /app/share/metainfo/com.spliterma.app.metainfo.xml",
        "install -Dm644 data/icons/hicolor/16x16/apps/com.spliterma.app.png  /app/share/icons/hicolor/16x16/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/32x32/apps/com.spliterma.app.png  /app/share/icons/hicolor/32x32/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/48x48/apps/com.spliterma.app.png  /app/share/icons/hicolor/48x48/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/64x64/apps/com.spliterma.app.png   /app/share/icons/hicolor/64x64/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/128x128/apps/com.spliterma.app.png /app/share/icons/hicolor/128x128/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/256x256/apps/com.spliterma.app.png /app/share/icons/hicolor/256x256/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/512x512/apps/com.spliterma.app.png /app/share/icons/hicolor/512x512/apps/com.spliterma.app.png"
      ],
      "sources": [
        { "type": "git", "url": "https://github.com/ymoraviadev-droid/spliterma.git", "tag": "v0.1.0" }
      ]
    }
  ]
}
