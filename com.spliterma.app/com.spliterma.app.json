{
  "app-id": "com.spliterma.app",
  "runtime": "org.gnome.Platform",
  "runtime-version": "46",
  "sdk": "org.gnome.Sdk",
  "command": "spliterma",
  "finish-args": [
    "--socket=wayland",
    "--socket=fallback-x11",
    "--share=network",
    "--device=dri",
    "--filesystem=home",
    "--talk-name=org.freedesktop.portal.Desktop",
    "--talk-name=org.freedesktop.portal.Clipboard",
    "--own-name=com.spliterma.app",
    "--env=TERM=xterm-256color",
    "--env=COLORTERM=truecolor",
    "--env=VTE_VERSION=6003",
    "--env=SHELL=/bin/bash",
    "--env=BASH_ENV=/app/etc/flatpak-bashrc",
    "--env=GTK_DEBUG=",
    "--env=GTK_THEME=Adwaita:dark",
    "--env=PS1=\\[\\033[32m\\]\\u@\\h\\[\\033[0m\\]:\\w\\$ "
  ],
  "modules": [
    {
      "name": "vte",
      "buildsystem": "meson",
      "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/lib/*.a",
        "/share/gir-1.0",
        "/lib/girepository-1.0"
      ],
      "config-opts": [
        "-Dgtk4=true",
        "-Dgtk3=false",
        "-Dvapi=false",
        "-Da11y=true"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://gitlab.gnome.org/GNOME/vte.git",
          "tag": "0.74.2"
        }
      ]
    },
    {
      "name": "spliterma",
      "buildsystem": "simple",
      "build-options": {
        "build-args": [
          "--share=network"
        ],
        "env": {
          "CARGO_HOME": "/run/build/spliterma/.cargo",
          "RUSTUP_HOME": "/run/build/spliterma/.rustup"
        }
      },
      "build-commands": [
        "sh -lc 'curl https://sh.rustup.rs -sSf | sh -s -- -y --profile minimal --default-toolchain stable'",
        "sh -lc '. /run/build/spliterma/.cargo/env && cargo --version && rustc --version'",
        "sh -lc '. /run/build/spliterma/.cargo/env && cargo build --release --locked'",
        "install -Dm644 data/spliterma-rc /app/etc/spliterma-rc",
        "install -Dm755 target/release/spliterma /app/bin/spliterma",
        "install -Dm644 data/com.spliterma.app.desktop /app/share/applications/com.spliterma.app.desktop",
        "install -Dm644 data/com.spliterma.app.metainfo.xml /app/share/metainfo/com.spliterma.app.metainfo.xml",
        "install -Dm644 data/icons/hicolor/16x16/apps/com.spliterma.app.png  /app/share/icons/hicolor/16x16/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/32x32/apps/com.spliterma.app.png  /app/share/icons/hicolor/32x32/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/48x48/apps/com.spliterma.app.png  /app/share/icons/hicolor/48x48/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/64x64/apps/com.spliterma.app.png   /app/share/icons/hicolor/64x64/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/128x128/apps/com.spliterma.app.png /app/share/icons/hicolor/128x128/apps/com.spliterma.app.png",
        "install -Dm644 data/icons/hicolor/256x256/apps/com.spliterma.app.png /app/share/icons/hicolor/256x256/apps/com.spliterma.app.png",
        "mkdir -p /app/etc",
        "bash -lc 'echo \"[ -f \\\"$HOME/.bashrc\\\" ] && . \\\"$HOME/.bashrc\\\"\" > /app/etc/flatpak-bashrc'"
      ],
      "sources": [
        {
          "type": "dir",
          "path": ".."
        }
      ]
    }
  ]
}