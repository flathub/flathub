{
  "id": "net.scribus.ScribusDevel",
  "branch": "master",
  "runtime": "org.kde.Platform",
  "sdk": "org.kde.Sdk",
  "command": "scribus",
  "rename-desktop-file": "scribus.desktop",
  "rename-appdata-file": "scribus.appdata.xml",
  "rename-icon": "scribus",
  "tags": ["nightly"],
  "desktop-file-name-prefix": "(Nightly) ",
  "finish-args": ["--device=dri", "--share=ipc", "--socket=x11", "--socket=pulseaudio", "--filesystem=host" ],
  "build-options": {
    "cflags": "-O2 -g",
    "cxxflags": "-O2 -g",
    "env": {
      "V": "1"
    }
  },
  "cleanup": ["/include", "/lib/pkgconfig", "/share/pkgconfig", "/lib/cmake", "*.la", "*.a"],
  "modules": [
    {
      "name": "boost",
      "config-opts": [ "--with-libraries=python" ],
      "sources": [
        {
          "type": "archive",
          "url": "https://downloads.sourceforge.net/project/boost/boost/1.60.0/boost_1_60_0.tar.bz2",
          "sha256": "686affff989ac2488f79a97b9479efb9f2abae035b5ed4d8226de6857933fd3b"
        },
        {
          "type": "file",
          "path": "boost-configure",
          "dest-filename": "configure"
        }
      ],
      "cleanup": [
        "/include"
      ]
    },
    {
      "name": "graphicsmagick",
      "builddir": true,
      "config-opts": ["--enable-shared", "--disable-static", "--without-perl", "--with-modules", "--with-quantum-depth=16", "--with-threads"],
      "sources": [
        {
          "type": "archive",
          "url": "https://downloads.sourceforge.net/project/graphicsmagick/graphicsmagick/1.3.24/GraphicsMagick-1.3.24.tar.gz",
          "sha256":"5fa50af61e1c9841a24648d46f03a25a07919069950ffb97389724d20ef3c5d2"
        }
      ]
    },
    {
      "name": "gutenprint",
      "disabled": true,
      "config-opts": [],
      "sources": [
        {
          "type": "archive",
          "url": "https://downloads.sourceforge.net/gimp-print/gutenprint-5.2.12.tar.bz2",
          "sha256": "a42489fd7d6f2e4320811754bb80b0cd845db6632b52f819fbc2b4b75057341b"
        }
      ]
    },
    {
      "name": "scribus",
      "cmake": true,
      "config-opts": [ "-DWANT_GRAPHICSMAGICK=1" ],
      "post-install": [
        "for i in 16x16 32x32 128x128 256x256 512x512 1024x1024; do install -Dm644 resources/iconsets/artwork/icon_${i}.png /app/share/icons/hicolor/${i}/apps/scribus.png; done",
        "mv /app/share/mime/packages/scribus.xml /app/share/mime/packages/net.scribus.ScribusDevel.xml"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/scribusproject/scribus.git"
        }
      ]
    }
  ]
}
