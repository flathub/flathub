{
  "id": "org.kde.PlatformTheme.QAdwaitaPlatform",
  "branch": "5.15-22.08",
  "runtime": "org.kde.Platform",
  "build-extension": true,
  "sdk": "org.kde.Sdk",
  "runtime-version": "5.15-22.08",
  "appstream-compose": false,
  "separate-locales": false,
  "modules": [
    {
      "name": "Adwaita-qt",
      "buildsystem": "cmake-ninja",
      "config-opts": [
        "-DCMAKE_INSTALL_PREFIX=/usr/share/runtime/lib/plugins/QAdwaitaPlatform"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/FedoraQt/adwaita-qt.git",
          "tag": "1.4.2"
        },
        {
          "type": "shell",
          "commands": [
            "sed -i 's@add_subdirectory(style)@#add_subdirectory(style)@' src/CMakeLists.txt"
          ]
        }
      ]
    },
    {
      "name": "qadwaitaplatform",
      "buildsystem": "cmake-ninja",
      "config-opts": [
        "-DCMAKE_INSTALL_PREFIX=/usr/share/runtime/lib/plugins/QAdwaitaPlatform",
        "-DQT_PLUGINS_DIR=/usr/share/runtime/lib/plugins/QAdwaitaPlatform",
        "-DDISABLE_DECORATION_SUPPORT=true"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/urFate/QAdwaitaPlatform.git",
          "tag": "4.0.1"
        },
        {
          "type": "patch",
          "path": "qgnomeplatform-adwaita-include-dirs.patch"
        }
      ]
    },
    {
      "name": "appdata",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p ${FLATPAK_DEST}/share/appdata",
        "cp org.kde.PlatformTheme.QAdwaitaPlatform.appdata.xml ${FLATPAK_DEST}/share/appdata",
        "appstream-compose --basename=org.kde.PlatformTheme.QAdwaitaPlatform --prefix=${FLATPAK_DEST} --origin=flatpak org.kde.PlatformTheme.QAdwaitaPlatform"
      ],
      "sources": [
        {
          "type": "file",
          "path": "org.kde.PlatformTheme.QAdwaitaPlatform.appdata.xml"
        }
      ]
    }
  ]
}