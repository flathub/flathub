{
    "id": "org.freedesktop.Sdk.Extension.haskell",
    "branch": "19.08",
    "runtime": "org.freedesktop.Sdk",
    "runtime-version": "19.08",
    "build-extension": true,
    "sdk": "org.freedesktop.Sdk",
    "separate-locales": false,
    "appstream-compose": false,
    "build-options": {
        "prefix": "/usr/lib/sdk/haskell"
    },
    "modules": [
        {
            "name": "ghc",
            "buildsystem": "autotools",
            "make-args": [
                "install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "only-arches": ["x86_64"],
                    "url": "https://downloads.haskell.org/~ghc/8.10.1/ghc-8.10.1-x86_64-deb9-linux.tar.xz",
                    "sha512": "0df7c24e095bc60f761c953a292506c5068d84cef4b78bcf598eccd6d2397dd39b809576c37eca649c192eebfbf8d5b44ca3be06e149ef46bfd20e8690d6024a"

                }
            ]
        },
        {
            "name": "cabal",
            "buildsystem": "simple",
            "sources": [
                {
                    "type": "archive",
                    "only-arches": ["x86_64"],
                    "url": "https://downloads.haskell.org/~cabal/cabal-install-3.2.0.0/cabal-install-3.2.0.0-x86_64-unknown-linux.tar.xz",
                    "sha512": "af80b166f15485745fb738b72ea17588dba41c605cefa2690c81604f0e43af1c74decef6946ea72fb114f940176db4a965d432a79fdfb8c28dab1d81e5a2ad50",
                    "strip-components": 0
                }
            ],
            "build-commands": [
                "install -C ./cabal ${FLATPAK_DEST}/bin/"
            ]
        },
        {
            "name": "stack",
            "buildsystem": "simple",
            "sources": [
                {
                    "type": "archive",
                    "only-arches": ["x86_64"],
                    "url": "https://github.com/commercialhaskell/stack/releases/download/v2.3.1/stack-2.3.1-linux-x86_64.tar.gz",
                    "sha512": "eef99b5a1f7593ca884708a05bcf6f7c3e8a5ade4f71b6a802c961bdc346aa560861762b238d8cd6b3c8b85e45334235ef5eaf97126df5970863dca701d83298"
                }
            ],
            "build-commands": [
                "install -C ./stack ${FLATPAK_DEST}/bin/"
            ]
        },
        {
            "name": "scripts",
            "buildsystem": "simple",
            "sources": [
                {
                    "type": "script",
                    "commands": [
                        "export PATH=$PATH:/usr/lib/sdk/haskell/bin"
                    ],
                    "dest-filename": "enable.sh"
                }
            ],
            "build-commands": [
                "cp enable.sh ${FLATPAK_DEST}"
            ]
        },
        {
            "name": "appdata",
            "buildsystem": "simple",
            "build-commands": [
               "mkdir -p ${FLATPAK_DEST}/share/appdata",
               "cp org.freedesktop.Sdk.Extension.haskell.appdata.xml ${FLATPAK_DEST}/share/appdata",
               "appstream-compose --basename=org.freedesktop.Sdk.Extension.haskell --prefix=${FLATPAK_DEST} --origin=flatpak org.freedesktop.Sdk.Extension.haskell"
            ],
            "sources": [
               {
                  "type": "file",
                  "path": "org.freedesktop.Sdk.Extension.haskell.appdata.xml"
               }
            ]
         }
    ]
}
