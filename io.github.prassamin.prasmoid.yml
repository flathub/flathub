id: io.github.prassamin.prasmoid
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk

command: prasmoid

modules:
  - name: binary
    buildsystem: simple
    build-commands:
      - install -Dm755 prasmoid /app/bin/prasmoid
    sources:
      - type: file
        url: https://github.com/PRASSamin/prasmoid/releases/download/v0.0.4/prasmoid
        sha256: 90b0db543e27c82aa32ad1b67410a37b375a82638b48a3301e774be10e44af93
  
  - name: docs
    buildsystem: simple
    build-commands:
      - mkdir /app/doc
      - install -Dm644 *.md /app/doc/
    sources:
      - type: file
        path: ../../README.md
      - type: file
        path: ../../LICENSE.md

  - name: metadata
    buildsystem: simple
    build-commands:
      - install -Dm644 io.github.prassamin.prasmoid.metainfo.xml -t /app/share/metainfo/
      - mv logo.svg io.github.prassamin.prasmoid.svg
      - install -Dm644 io.github.prassamin.prasmoid.svg -t /app/share/icons/hicolor/scalable/apps/
    sources:
        - type: file
          path: io.github.prassamin.prasmoid.metainfo.xml
        - type: file
          path: ../../logo.svg

finish-args:
  - --filesystem=home:rw #give write access to user's home folder