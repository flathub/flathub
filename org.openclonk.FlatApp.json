{
	"app-id": "org.openclonk.FlatApp",
	"runtime": "org.kde.Platform",
	"runtime-version": "5.10",
	"sdk": "org.kde.Sdk",
	"command": "openclonk",
	"finish-args": [
		"--socket=x11",
		"--share=network",
		"--filesystem=~/.clonk/",
		"--socket=pulseaudio",
		"--device=dri"
	],
	"modules": [
		"flathub-shared-modules/glew/glew.json",
		"flathub-shared-modules/glu/glu-9.0.0.json",
		"module.freealut.json",
		{
			"name": "openclonk",
			"sources": [
				{
					"type": "archive",
					"url": "http://www.openclonk.org/builds/release/8.0/openclonk-8.0-src.tar.bz2",
					"sha256": "6fc88e8c9bb0ca7eb3e3c8f60af80f77bd6d8f23632bb03f4f5e6ac4e97ae354"
				},
				{
					"type": "patch",
					"path": "cmake.diff"
				},
				{
					"type": "file",
					"url": "http://www.openclonk.org/download/Music.ocg",
					"sha256": "3327baa65d5e4a0110fef38b7c3b1d1c38e9da58dbddeb86281afbb37ebed96e",
					"dest-filename": "full-Music.ocg"
				},
				{
					"type": "file",
					"path": "substitute-full-music.sh"
				}
			],
			"buildsystem": "cmake-ninja",
			"config-opts": [
				"-DCMAKE_BUILD_TYPE=Release",
				"-DAudio_FIND_REQUIRED=On",
				"-DAudio_TK=OpenAL",
				"-DCMAKE_CXX_FLAGS=-w",
				"-DCMAKE_C_FLAGS=-w"
			],
			"build-commands": [
				"./substitute-full-music.sh"
			],
			"cleanup": [
				"/include",
				"/lib",
				"../app/lib/debug/*"
			]
		}
	]
}
