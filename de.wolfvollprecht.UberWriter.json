{
    "app-id": "de.wolfvollprecht.UberWriter",
    "runtime": "org.gnome.Platform",
    "runtime-version": "3.26",
    "sdk": "org.gnome.Sdk",
    "command": "uberwriter",
    "rename-icon": "uberwriter",
    "finish-args": [
        "--socket=x11",
        "--share=ipc",
        "--filesystem=host",
        "--filesystem=xdg-run/dconf",
        "--filesystem=~/.config/dconf:ro",
        "--talk-name=ca.desrt.dconf",
        "--env=DCONF_USER_CONFIG_DIR=.config/dconf",
        "--env=PATH=/app/extensions/TexLive/bin:/app/extensions/TexLive/2018/bin/x86_64-linux:/app/bin:/usr/bin"
    ],
    "build-options" : {
      "env": {
        "PYTHON": "python3"
        }
    },
    "add-extensions": {
        "de.wolfvollprecht.UberWriter.Plugin": {
          "directory": "extensions",
          "version": "stable",
          "subdirectories": true,
          "no-autodownload": true,
          "autodelete": true
    }
    },
    "modules": [
        {
        "name": "uberwriter",
        "sources": [
                {
                    "type" : "git",
                    "url" : "git://github.com/wolfv/uberwriter",
                    "tag" : "v2.0.1",
                    "commit": "0cbb9aecf0949537bd6c680cc41a9c049cd2778a"
                }
            ],
            "build-commands": [
                "install -Dm644 flatpak/de.wolfvollprecht.UberWriter.appdata.xml /app/share/appdata/de.wolfvollprecht.UberWriter.appdata.xml "
            ],
            "post-install": [
            "glib-compile-schemas /app/share/glib-2.0/schemas",
            "install -d /app/extensions"
            ]
        },
        {
        "name": "pandoc",
        "only-arches": [
          "x86_64"
            ],
        "buildsystem": "simple",
        "build-commands": [
          "cp bin/pandoc /app/bin/pandoc",
          "cp bin/pandoc-citeproc /app/bin/pandoc-citeproc"
            ],
        "sources": [
                {
            "type": "archive",
            "url": "https://github.com/jgm/pandoc/releases/download/2.2/pandoc-2.2-linux.tar.gz",
            "sha256": "06ecd882e42ef9b7390b1c82e1e71b3ea48679181289b9b810a8797825bed8ed"
                }
            ]
        },
        "de.wolfvollprecht.UberWriter.pipdeps.json",
        {
        "name": "fonts",
            "buildsystem": "simple",
            "build-commands": [
          "mkdir -p /app/share/fonts/",
          "cp ttf/* /app/share/fonts/"
            ],
            "sources": [
                {
            "type": "git",
            "url": "https://github.com/mozilla/Fira",
            "tag": "4.202"
                }
            ]
        },
        {
            "name": "appdata",
            "buildsystem": "simple",
            "build-commands": [
                "mkdir -p /app/share/appdata",
                "install -Dm644 de.wolfvollprecht.UberWriter.appdata.xml /app/share/appdata/de.wolfvollprecht.UberWriter.appdata.xml"
            ],
            "sources": [
                {
                    "type": "file",
                    "path": "de.wolfvollprecht.UberWriter.appdata.xml"
                }
            ]
        }
    ]
    }