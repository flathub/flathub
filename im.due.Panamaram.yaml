app-id: im.due.Panamaram
runtime: org.kde.Platform
runtime-version: '6.9'
sdk: org.kde.Sdk
base: io.qt.PySide.BaseApp
base-version: '6.9'

command: run-app.sh

finish-args:
  - --socket=fallback-x11
  - --share=ipc
  - --socket=wayland
  - --device=dri

modules:
  - name: panamaram
    buildsystem: simple
    build-commands:
      - pip3 install --prefix=/app --no-warn-script-location flatpak/pypi/*.whl
      - install -Dm755 main.py /app/bin/main.py
      - install -Dm755 run-app.sh /app/bin/run-app.sh
      - install -d /app/bin/assets && cp -r assets/* /app/bin/assets/
      - install -d /app/bin/auth && cp -r auth/* /app/bin/auth/
      - install -d /app/bin/db && cp -r db/* /app/bin/db/
      - install -d /app/bin/worker && cp -r worker/* /app/bin/worker/
      - install -d /app/bin/utils && cp -r utils/* /app/bin/utils/
      - install -d /app/bin/ui && cp -r ui/* /app/bin/ui/
      - install -Dm644 im.due.Panamaram.desktop /app/share/applications/im.due.Panamaram.desktop
      - install -Dm644 im.due.Panamaram.png /app/share/icons/hicolor/128x128/apps/im.due.Panamaram.png
      - install -Dm644 im.due.Panamaram.metainfo.xml /app/share/metainfo/im.due.Panamaram.metainfo.xml
    sources:
      - type: archive
        url: https://github.com/manikandancode/Panamaram/releases/download/v1.0.0/Panamaram-1.0.0.tar.gz
        sha256: ab63e4c1f33414ece5c447b904a85cd69c1c538276abe2f0292b68de0f164510

